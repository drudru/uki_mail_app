(function(){function U(a,b){b=b||M;for(var c=b.length-1;c>=0;c--){if(b[c].children()){var e=U(a,b[c].children());if(e)return e}if(b[c].id()==a)return b[c]}return false}uki_mail_app={};var A=this,s=document,H=navigator.userAgent,N="uki"+ +new Date,x=Math.max,F=Math.min,R=Math.floor,P=Math.ceil;A.uki=A.uki||function(a,b){if(typeof a==="string"){var c=a.match(/^#((?:[\w\u00c0-\uFFFF_-]|\\.)+)$/),e=c&&uki._ids[c[1]];if(c&&!b)return new uki.Collection(e?[e]:[]);return uki.find(a,b)}if(a.length===undefined)a=
[a];if(a.length>0&&uki.isFunction(a[0].typeName))return new uki.Collection(a);return uki.build(a)};uki.version="0.3.8";uki.guid=1;uki.F=function(){return false};uki._ids={};uki.registerId=function(a){uki._ids[uki.attr(a,"id")]=a};uki.unregisterId=function(a){uki._ids[uki.attr(a,"id")]=undefined};(function(){function a(){}var b=Object.prototype.toString,c=String.prototype.trim,e=Array.prototype.slice,g=/^\s+|\s+$/g,d={attr:function(f,h,j){if(j!==undefined){if(f[h]&&f[h].apply)f[h](j);else f[h]=j;return f}else return f[h]&&
f[h].apply?f[h]():f[h]},proxy:function(f,h){var j=e.call(arguments,2),l=function(){return f.apply(h,j.concat(e.call(arguments,0)))};l.huid=f.huid=f.huid||uki.guid++;return l},isFunction:function(f){return b.call(f)==="[object Function]"},isArray:function(f){return b.call(f)==="[object Array]"},trim:function(f){f=f||"";return c?c.call(f):f.replace(g,"")},escapeHTML:function(f){var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return(f+"").replace(/[&<>\"\']/g,function(j){return h[j]})},
each:function(f,h,j){var l,p=0,m=f.length;if(m===undefined)for(l in f){if(!(!l||f[l]===undefined||!f.hasOwnProperty(l)))if(h.call(j||f[l],l,f[l])===false)break}else for(l=f[0];p<m&&h.call(j||l,p,l)!==false;l=f[++p]);return f},inArray:function(f,h){for(var j=0,l=h.length;j<l;j++)if(h[j]===f)return j;return-1},unique:function(f){if(f.length&&(typeof f[0]=="object"||typeof f[0]=="function")){var h=[],j;for(j=0;j<f.length;j++){f[j].__uki_marked||(h[h.length]=f[j]);f[j].__uki_marked=true}for(j=0;j<h.length;j++)delete h[j].__uki_marked;
return h}else{h=[];var l={};j=0;for(var p=f.length;j<p;j++){var m=f[j];if(!l[m]){l[m]=true;h.push(f[j])}}return h}},grep:function(f,h){for(var j=[],l=0,p=f.length;l<p;l++)h(f[l],l)&&j.push(f[l]);return j},map:function(f,h,j){for(var l=[],p=uki.isFunction(h)?h:function(k){return uki.attr(k,h)},m=0,o=f.length;m<o;m++){var n=p.call(j||f[m],f[m],m);if(n!=null)l[l.length]=n}return l},reduce:function(f,h,j,l){for(var p=0,m=h.length;p<m;p++)f=j.call(l||h[p],f,h[p],p);return f},extend:function(){for(var f=
arguments[0]||{},h=1,j=arguments.length,l;h<j;h++)if((l=arguments[h])!=null)for(var p in l){var m=l[p];if(m!==undefined)f[p]=m}return f},newClass:function(){var f=function(){this.init.apply(this,arguments)},h;h=0;var j,l=[],p,m,o=arguments,n;if((n=o.length)>1){p=o[0];if(p.prototype){a.prototype=p.prototype;f.prototype=new a;h=1;l=[a.prototype];for(j in p){m=p[j];!p.hasOwnProperty(j)||m===undefined||j=="prototype"||(f[j]=m)}}}for(h=h;h<n;h++){p=o[h];if(this.isFunction(p)){j={};p.apply(j,l);p=j}l[l.length]=
p;uki.extend(f.prototype,p)}if(!f.prototype.init)f.prototype.init=function(){};return f},binarySearch:function(f,h){for(var j=0,l=h.length,p;j<l;){p=j+l>>1;h[p]<f?(j=p+1):(l=p)}return j},newProp:function(f,h){return function(j){if(j===undefined)return this[f];if(h)h.call(this,j);else this[f]=j;return this}},addProps:function(f,h){for(var j=0,l=h.length;j<l;j++)f[h[j]]=uki.newProp("_"+h[j])},toArray:function(f){return e.call(f,0)},delegateProp:function(f,h,j){var l="_"+h;f[h]=function(p){if(p===undefined){if(this[j])return uki.attr(this[j],
h,p);return this[l]}if(this[j])uki.attr(this[j],h,p);else this[l]=p;return this}},camalize:function(f){return f.replace(/[-_]\S/g,function(h){return h.substr(1).toUpperCase()})},dasherize:function(f){return f.replace(/[A-Z]/g,function(h){return"-"+h.toLowerCase()})}};d.extend(uki,d)})();uki.geometry={};var B=uki.geometry.Point=function(a,b){this.x=a*1||0;this.y=b*1||0};B.prototype={toString:function(){return this.x+" "+this.y},clone:function(){return new B(this.x,this.y)},eq:function(a){return this.x==
a.x&&this.y==a.y},offset:function(a,b){if(typeof a=="object"){b=a.y;a=a.x}this.x+=a;this.y+=b;return this},constructor:B};B.fromString=function(a){a=a.split(/\s+/);return new B(a[0],a[1])};var w=uki.geometry.Size=function(a,b){this.width=a*1||0;this.height=b*1||0};w.prototype={toString:function(){return this.width+" "+this.height},clone:function(){return new w(this.width,this.height)},eq:function(a){return this.width==a.width&&this.height==a.height},empty:function(){return this.width<=0||this.height<=
0},constructor:w};w.fromString=function(a){a=a.split(/\s+/);return new w(a[0],a[1])};w.create=function(a,b){if(a===undefined)return null;if(a.width!==undefined)return a;if(/\S+\s+\S+/.test(a+""))return w.fromString(a,b);return new w(a,b)};var t=uki.geometry.Rect=function(a,b,c,e){if(c!==undefined){this.x=a*1||0;this.y=b*1||0;this.width=c*1||0;this.height=e*1||0}else if(a===undefined||a.x===undefined){this.y=this.x=0;this.width=a*1||0;this.height=b*1||0}else{this.x=a?a.x*1:0;this.y=a?a.y*1:0;this.width=
b?b.width*1:0;this.height=b?b.height*1:0}};t.prototype={toString:function(){return[this.x,this.y,this.width,this.height].join(" ")},toCoordsString:function(){return[this.x,this.y,this.maxX(),this.maxY()].join(" ")},clone:function(){return new t(this.x,this.y,this.width,this.height)},minX:function(){return this.x},maxX:function(){return this.x+this.width},midX:function(){return this.x+this.width/2},minY:function(){return this.y},midY:function(){return this.y+this.height/2},maxY:function(){return this.y+
this.height},normalize:function(){this.x=this.y=0;return this},empty:w.prototype.empty,eq:function(a){return a&&this.x==a.x&&this.y==a.y&&this.height==a.height&&this.width==a.width},inset:function(a,b){this.x+=a;this.y+=b;this.width-=a*2;this.height-=b*2;return this},offset:B.prototype.offset,intersection:function(a){var b=new B(x(this.x,a.x),x(this.y,a.y));a=new w(F(this.maxX(),a.maxX())-b.x,F(this.maxY(),a.maxY())-b.y);return a.empty()?new t:new t(b,a)},union:function(a){return t.fromCoords(F(this.x,
a.x),F(this.y,a.y),x(this.maxX(),a.maxX()),x(this.maxY(),a.maxY()))},containsPoint:function(a){return a.x>=this.minX()&&a.x<=this.maxX()&&a.y>=this.minY()&&a.y<=this.maxY()},containsRect:function(a){return this.eq(this.union(a))},constructor:t};t.prototype.left=t.prototype.minX;t.prototype.top=t.prototype.minY;t.fromCoords=function(a,b,c,e){if(c===undefined)return new t(a.x,a.y,b.x-a.x,b.y-a.y);return new t(a,b,c-a,e-b)};t.fromCoordsString=function(a){a=a.split(/\s+/);return t.fromCoords(a[0],a[1],
a[2],a[3])};t.fromString=function(a){a=a.split(/\s+/);if(a.length>2)return new t(a[0],a[1],a[2],a[3]);return new t(a[0],a[1])};t.create=function(a,b,c,e){if(a===undefined)return null;if(a.x!==undefined)return a;if(/\S+\s+\S+/.test(a+""))return t.fromString(a,b);if(c===undefined)return new t(a,b);return new t(a,b,c,e)};var z=uki.geometry.Inset=function(a,b,c,e){this.top=a*1||0;this.right=b*1||0;this.bottom=c===undefined?this.top*1:c*1;this.left=e===undefined?this.right*1:e*1};z.prototype={toString:function(){return[this.top,
this.right,this.bottom,this.left].join(" ")},clone:function(){return new z(this.top,this.right,this.bottom,this.left)},width:function(){return this.left+this.right},height:function(){return this.top+this.bottom},negative:function(){return this.top<0||this.left<0||this.right<0||this.bottom<0},empty:function(){return!this.top&&!this.left&&!this.right&&!this.bottom}};z.fromString=function(a){a=a.split(/\s+/);if(a.length<3)a[2]=a[0];if(a.length<4)a[3]=a[1];return new z(a[0],a[1],a[2],a[3])};z.create=
function(a,b,c,e){if(a===undefined)return null;if(a.top!==undefined)return a;if(/\S+\s+\S+/.test(a+""))return z.fromString(a,b);if(c===undefined)return new z(a,b);return new z(a,b,c,e)};uki.dom={createElement:function(a,b,c){a=s.createElement(a);if(b)a.style.cssText=b;if(c)a.innerHTML=c;a[N]=uki.guid++;return a},probe:function(a,b){var c=s.body;c.appendChild(a);b=b(a);c.removeChild(a);return b},layout:function(a,b,c){c=c||{};if(c.left!=b.left)a.left=b.left+"px";if(c.top!=b.top)a.top=b.top+"px";if(c.right!=
b.right)a.right=b.right+"px";if(c.bottom!=b.bottom)a.bottom=b.bottom+"px";if(c.width!=b.width)a.width=x(b.width,0)+"px";if(c.height!=b.height)a.height=x(b.height,0)+"px";return b},computedStyle:function(a){if(s&&s.defaultView&&s.defaultView.getComputedStyle)return s.defaultView.getComputedStyle(a,null);else if(a.currentStyle)return a.currentStyle},contains:function(a,b){try{if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16)}catch(c){}for(;b&&
b!=a;)try{b=b.parentNode}catch(e){b=null}return a==b},createStylesheet:function(a){var b=s.createElement("style");s.getElementsByTagName("head")[0].appendChild(b);if(b.styleSheet)b.styleSheet.cssText=a;else b.appendChild(document.createTextNode(a));return b}};uki.each(["createElement"],function(a,b){uki[b]=uki.dom[b]});uki.dom.special={};uki.dom.Event=function(a){a=a||{};this.domEvent=a.domEvent||a;for(var b=uki.dom.props.length,c;b;){c=uki.dom.props[--b];this[c]=a[c]}};uki.dom.Event.prototype=new (function(){function a(){return true}
this.preventDefault=function(){var b=this.domEvent;b.preventDefault&&b.preventDefault();b.returnValue=false;this.isDefaultPrevented=a};this.stopPropagation=function(){var b=this.domEvent;b.stopPropagation&&b.stopPropagation();b.cancelBubble=true;this.isPropagationStopped=a};this.isDefaultPrevented=this.isPropagationStopped=uki.F});uki.extend(uki.dom,{bound:{},handlers:{},props:"type altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which dragOffset dataTransfer".split(" "),
events:"blur focus load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error draggesturestart draggestureend draggesture dragstart dragend drag drop dragenter dragleave dragover".split(" "),bind:function(a,b,c){if(a.setInterval&&a!=window)a=window;c.huid=c.huid||uki.guid++;var e=a[N]=a[N]||uki.guid++,g=uki.dom.handlers[e]=uki.dom.handlers[e]||function(){uki.dom.handler.apply(arguments.callee.elem,
arguments)},d,f;g.elem=a;uki.dom.bound[e]||(uki.dom.bound[e]={});b=b.split(" ");for(d=0;d<b.length;d++){f=b[d];if(!uki.dom.bound[e][f]){uki.dom.bound[e][f]=[];if(!uki.dom.special[f]||uki.dom.special[f].setup.call(a)===false)a.addEventListener?a.addEventListener(f,g,false):a.attachEvent("on"+f,g)}uki.dom.bound[e][f].push(c)}c=g=a=null},unbind:function(a,b,c){var e=a[N],g=c&&c.huid,d,f;if(b)b=b.split(" ");else{b=[];uki.each(uki.dom.bound[e]||[],function(j){b.push(j)})}for(d=0;d<b.length;d++){f=b[d];
if(!(!e||!uki.dom.bound[e]||!uki.dom.bound[e][f])){uki.dom.bound[e][f]=c?uki.grep(uki.dom.bound[e][f],function(j){return j.huid!==g}):[];if(uki.dom.bound[e][f].length==0){var h=uki.dom.handlers[e];if(!uki.dom.special[f]||uki.dom.special[f].teardown.call(a)===false)a.removeEventListener?a.removeEventListener(f,h,false):a.detachEvent("on"+f,h);uki.dom.bound[e][f]=null}}}},handler:function(a){a=a||A.event;var b=a.type,c=this[N],e=uki.dom.bound[c];if(!a.domEvent){a=new uki.dom.Event(a);a=uki.dom.fix(a)}if(!(!c||
!e||!e[b])){uki.after.start();c=0;for(e=e[b];c<e.length;c++)e[c].call(this,a);uki.after.stop()}},fix:function(a){if(!a.target)a.target=a.srcElement||s;if(a.target.nodeType==3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement==a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){var b=s.documentElement,c=s.body;a.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-
(b.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)try{a.metaKey=a.ctrlKey}catch(e){}if(!a.which&&a.button)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},preventDefaultHandler:function(a){a&&a.preventDefault();return false}});uki.each({mouseover:"mouseenter",mouseout:"mouseleave"},function(a,b){var c=function(e){if(!uki.dom.contains(this,e.relatedTarget)){e.type=b;uki.dom.handler.apply(this,arguments)}};
uki.dom.special[b]={setup:function(){uki.dom.bind(this,a,c)},teardown:function(){uki.dom.unbind(this,a,c)}}});A.attachEvent&&A.attachEvent("onunload",function(){uki.each(uki.dom.bound,function(a,b){uki.each(b,function(c){try{uki.dom.handlers[a].elem.detachEvent("on"+c,uki.dom.handlers[a])}catch(e){}})})});(function(){function a(l){if(!d.draggable){d.draggable=l;uki.dom.bind(s,"mousemove scroll",e);uki.dom.bind(s,j,g);uki.dom.bind(s,"selectstart mousedown",uki.dom.preventDefaultHandler)}}function b(){d.draggable=
null;uki.dom.unbind(s,"mousemove scroll",e);uki.dom.unbind(s,j,g);uki.dom.unbind(s,"selectstart mousedown",uki.dom.preventDefaultHandler)}function c(l){l=new uki.dom.Event(l);l.type="draggesturestart";uki.dom.handler.apply(this,arguments);if(!l.isDefaultPrevented()){a(this);d.position=new B(-l.pageX,-l.pageY)}}function e(l){l=new uki.dom.Event(l);l.type="draggesture";l.dragOffset=(new B(l.pageX,l.pageY)).offset(d.position);uki.dom.handler.apply(d.draggable,arguments);l.isDefaultPrevented()&&b(d.draggable)}
function g(l){l=new uki.dom.Event(l);l.type="draggestureend";l.dragOffset=(new B(l.pageX,l.pageY)).offset(d.position);uki.dom.handler.apply(d.draggable,arguments);b(d.draggable)}var d=uki.dom.dnd={draggable:null,nativeDnD:false,position:null};try{if(typeof s.createEvent("MouseEvent").dataTransfer=="object"||s.createEvent("DragEvent").initDragEvent)d.nativeDnD=!H.match(/Chrome\//)}catch(f){}var h={setup:function(){if(this.__draggesturebound)this.__draggesturebound++;else{this.__draggesturebound=1;
uki.dom.bind(this,"mousedown",c);if(!d.nativeDnD&&typeof this.ondragstart=="object")this.ondragstart=function(){event.returnValue=false}}},teardown:function(){this.__draggesturebound--;this.__draggesturebound||uki.dom.unbind(this,"mousedown",c)}};uki.extend(uki.dom.special,{draggesturestart:h,draggestureend:h,draggesture:h});var j="mouseup "+(d.nativeDnD?" dragend":"")})();(function(){function a(n){if(uki.isFunction(n.dom)){if(n.parent().length)return n.dom();var k=uki.createElement("div","width:1px;height:1px;position:absolute;left:-999em;top:0");
s.body.appendChild(k);n.attachTo(k);return k}return n}function b(n){n=new uki.dom.Event(n);var k=n.dataTransfer;n.dataTransfer=new uki.dom.DataTransferWrapper(k);uki.dom.handler.apply(this,arguments);k.effectAllowed=n.dataTransfer.effectAllowed;k.dropEffect=n.dataTransfer.dropEffect}function c(n){uki.dom.bind(n,"draggestureend",h)}function e(n){if(j.dataTransfer){j.dataTransfer.cleanup();j.dragOver=j.dataTransfer=j.target=null;uki.dom.unbind(n,"draggestureend",h)}}function g(n){if(!(!j.dataTransfer||
n.domEvent.__dragEntered||!l)){n=new uki.dom.Event(n);n.domEvent.__dragEntered=true;if(j.dragOver!=this){j.dragOver=this;n.type="dragenter";uki.dom.handler.apply(this,arguments)}}}function d(n){if(l){if(!n.domEvent.__dragEntered&&j.dragOver){n=new uki.dom.Event(n);n.type="dragleave";uki.dom.handler.apply(j.dragOver,arguments);j.dragOver=null}}else{if(j.dataTransfer){n.type="drag";n.target=j.target}else if(n.dragOffset.x>j.dragDelta||n.dragOffset.y>j.dragDelta){var k=n.target,q=this.parentNode;try{for(;k&&
k!=q&&!k.getAttribute("draggable");)k=k.parentNode}catch(u){k=null}if(k&&k.getAttribute("draggable")){j.target=n.target=k;n.type="dragstart";j.dataTransfer=n.dataTransfer=new uki.dom.DataTransfer(n.domEvent.dataTransfer);c(this)}else return}else return;n=new uki.dom.Event(n);uki.dom.handler.apply(this,arguments);n.isDefaultPrevented()?e(this):f(n)}}function f(n){var k=j.dataTransfer._dragImage.style,q=n.domEvent.type;n.stopPropagation();n.preventDefault();k.left="-999em";k=s.elementFromPoint(n.pageX,
n.pageY);j.dataTransfer.update(n);try{var u;l=true;try{if(s.createEventObject){u=s.createEventObject();for(var D=o.length,y;D;){y=uki.dom.props[--D];u[y]=n.domEvent[y]}k.fireEvent("on"+q,u)}else{u=s.createEvent("MouseEvents");u.initMouseEvent(q,true,true,s.defaultView,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,null);k.dispatchEvent(u)}}catch(E){}l=false}catch(C){}}function h(n){if(!l)if(j.dataTransfer){n.type="dragend";n.target=j.target;n.dataTransfer=
j.dataTransfer;uki.dom.handler.apply(this,arguments);f(n);e(this)}}var j=uki.dom.dnd,l=false;uki.extend(j,{dragDelta:5,initNativeDnD:function(){var n=uki.createElement("div","position: absolute;left:-999em;");s.body.appendChild(n);j.dragImageContainer=n;j.initNativeDnD=uki.F;return true},dragImageContainer:null,dataTransfer:null,target:null,dragOver:null});var p=["dropEffect","effectAllowed","types","files"];uki.dom.DataTransferWrapper=uki.newClass(new (function(){this.init=function(n){this.dataTransfer=
n;for(var k=p.length-1;k>=0;k--)this[p[k]]=n[p[k]]};this.setData=function(n,k){return this.dataTransfer.setData(n,k)};this.clearData=function(n){return this.dataTransfer.clearData(n)};this.getData=function(n){return this.dataTransfer.getData(n)};this.setDragImage=function(n,k,q){j.initNativeDnD();n=a(n);var u=n.cloneNode(true);n=u.style;n.left=n.right=n.top=n.bottom="";n.position="static";j.dragImageContainer.appendChild(u);setTimeout(function(){j.dragImageContainer.removeChild(u)},1);return this.dataTransfer.setDragImage(u,
k,q)}}));uki.dom.DataTransfer=uki.newClass(new (function(){this.init=function(){uki.extend(this,{dropEffect:"none",effectAllowed:"none",types:[],files:[],dragImage:new Image,imagePosition:new B,data:{}})};this.setData=function(n,k){this.data[n]=k;uki.inArray(n,this.types)==-1&&this.types.push(n)};this.clearData=function(n){if(n){delete this.data[n];this.types=uki.grep(this.types,function(k){return k!=n})}else{this.data={};this.types=[]}};this.getData=function(n){return this.data[n]};this.setDragImage=
function(n,k,q){this._dragImage=this._initDragImage(n);this._imagePosition=new B(k||0,q||0)};this.update=function(n){if(this._dragImage){this._dragImage.style.left=n.pageX-this._imagePosition.x+"px";this._dragImage.style.top=n.pageY-this._imagePosition.y+"px"}};this.cleanup=function(){this._dragImage&&this._dragImage.parentNode.removeChild(this._dragImage);this._dragImage=undefined};this._initDragImage=function(n){n=a(n);n=n.cloneNode(true);var k=n.style;k.left=k.right=k.top=k.bottom="";k.position=
"absolute";k.left="-999em";k.zIndex="9999";s.body.appendChild(n);return n}}));var m={setup:function(){if(this.__w3cdragbound)this.__w3cdragbound++;else{this.__w3cdragbound=1;uki.dom.bind(this,"draggesture",d)}},teardown:function(){this.__w3cdragbound--;this.__draggesturebound||uki.dom.unbind(this,"draggesture",d)}};if(j.nativeDnD)uki.extend(uki.dom.special,{dragstart:{setup:function(){this.addEventListener("dragstart",b,false)},teardown:function(){this.removeEventListener("dragstart",b,false)}}});
else{uki.extend(uki.dom.special,{dragstart:m,drag:m,dragend:m});uki.each({dragover:"mousemove",drop:"mouseup"},function(n,k){var q=function(u){if(j.dataTransfer&&l){u=new uki.dom.Event(u);u.type=n;u.dataTransfer=j.dataTransfer;if(n=="dragover")j.__canDrop=false;else{e(this);if(!j.__canDrop)return}uki.dom.handler.apply(this,arguments);if(u.isDefaultPrevented())j.__canDrop=true}};uki.dom.special[n]={setup:function(){uki.dom.bind(this,k,q)},teardown:function(){uki.dom.unbind(this,k,q)}}});uki.dom.special.dragenter=
{setup:function(){uki.dom.bind(this,"mousemove",g)},teardown:function(){uki.dom.unbind(this,"mousemove",g)}};uki.dom.special.dragleave={setup:function(){},teardown:function(){}}}var o="detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button".split(" ")})();(function(){var a;a=s.documentElement.getBoundingClientRect?(uki.dom.offset=function(b){if(!b||b==A)return new B;if(b===b.ownerDocument.body)return a.bodyOffset(b);a.boxModel===undefined&&a.initializeBoxModel();var c=b.getBoundingClientRect(),
e=b.ownerDocument;b=e.body;e=e.documentElement;return new B(c.left+(a.pageXOffset||a.boxModel&&e.scrollLeft||b.scrollLeft)-(e.clientLeft||b.clientLeft||0),c.top+(a.pageYOffset||a.boxModel&&e.scrollTop||b.scrollTop)-(e.clientTop||b.clientTop||0))}):(uki.dom.offset=function(b){if(!b||b==A)return new B;if(b===b.ownerDocument.body)return a.bodyOffset(b);a.initialized||a.initialize();var c=b.offsetParent,e=b.ownerDocument,g,d=e.documentElement,f=e.body;e=e.defaultView;g=e.getComputedStyle(b,null);for(var h=
b.offsetTop,j=b.offsetLeft;(b=b.parentNode)&&b!==f&&b!==d;){g=e.getComputedStyle(b,null);h-=b.scrollTop;j-=b.scrollLeft;if(b===c){h+=b.offsetTop;j+=b.offsetLeft;if(a.doesNotAddBorder&&!(a.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.tagName))){h+=parseInt(g.borderTopWidth,10)||0;j+=parseInt(g.borderLeftWidth,10)||0}c=b.offsetParent}if(a.subtractsBorderForOverflowNotVisible&&g.overflow!=="visible"){h+=parseInt(g.borderTopWidth,10)||0;j+=parseInt(g.borderLeftWidth,10)||0}g=g}if(g.position===
"relative"||g.position==="static"){h+=f.offsetTop;j+=f.offsetLeft}if(g.position==="fixed"){h+=x(d.scrollTop,f.scrollTop);j+=x(d.scrollLeft,f.scrollLeft)}return new B(j,h)});uki.extend(a,{initialize:function(){if(!this.initialized){var b=s.body,c=s.createElement("div"),e,g,d,f=b.style.marginTop;e={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(g in e)c.style[g]=e[g];c.innerHTML='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';
b.insertBefore(c,b.firstChild);e=c.firstChild;g=e.firstChild;d=e.nextSibling.firstChild.firstChild;this.doesNotAddBorder=g.offsetTop!==5;this.doesAddBorderForTableAndCells=d.offsetTop===5;e.style.overflow="hidden";e.style.position="relative";this.subtractsBorderForOverflowNotVisible=g.offsetTop===-5;b.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=b.offsetTop===0;b.style.marginTop=f;b.removeChild(c);this.boxModel===undefined&&this.initializeBoxModel();this.initialized=true}},initializeBoxModel:function(){if(this.boxModel===
undefined){var b=s.createElement("div");b.style.width=b.style.paddingLeft="1px";s.body.appendChild(b);this.boxModel=b.offsetWidth===2;s.body.removeChild(b).style.display="none"}},bodyOffset:function(b){a.initialized||a.initialize();var c=b.offsetTop,e=b.offsetLeft;if(uki.dom.doesNotIncludeMarginInBodyOffset){c+=parseInt(uki.dom.elem.currentStyle(b).marginTop,10)||0;e+=parseInt(uki.dom.elem.currentStyle(b).marginLeft,10)||0}return new B(e,c)}})})();uki.browser=new (function(){function a(l,p,m){var o=
l[p];l[p]=undefined;l[m]=o}function b(l){for(var p=uki.createElement("div").style,m=["","-webkit-","-moz-"],o=0;o<m.length;o++)if(p[uki.camalize(m[o]+l)]!==undefined)return m[o]+l;return"unsupported"}function c(){var l=uki.createElement("div","background-image:-moz-linear-gradient(right,red,red);background-image:linear-gradient(right,red,red);background-image:-webkit-gradient(linear,0 0,100% 0,from(red),to(red))").style.backgroundImage+"";return l.indexOf("-moz-linear-gradient")>-1?"-moz-linear-gradient":
l.indexOf("-webkit-gradient")>-1?"-webkit-gradient":l.indexOf("linear-gradient")>-1?"linear-gradient":"unsupported"}var e;this.cssBoxShadow=function(){return e=e||(A.opera?"unsupported":b("box-shadow"))};var g;this.cssBorderRadius=function(){return g=g||b("border-radius")};var d;this.cssUserSelect=function(){return d=d||b("user-select")};var f;this.cssLinearGradient=function(){return f=f||c()};var h;this.canvas=function(){if(h===undefined)h=!!uki.createElement("canvas").getContext;return h};var j;
this.cssFilter=function(){if(j===undefined)j=typeof uki.createElement("div").style.filter!="undefined";return j};this.css=function(l){if(!l)return"";if(typeof l=="string")return l.replace(/(^|[^-])(box-shadow|border-radius|user-select)/g,function(p){var m;if((m=p.indexOf("box-shadow"))>-1)return p.substr(0,m)+uki.browser.cssBoxShadow();if((m=p.indexOf("border-radius"))>-1)return p.substr(0,m)+uki.browser.cssBorderRadius();if((m=p.indexOf("user-select"))>-1)return p.substr(0,m)+uki.browser.cssUserSelect()});
uki.each(["boxShadow","borderRadius","userSelect"],function(p,m){l[m]&&a(l,m,uki.camalize(uki.browser[uki.camalize("css-"+m)]()))});return l};this.textStyles="font fontFamily fontWeight fontSize textDecoration textOverflow textAlign textShadow overflow color".split(" ")});uki.initNativeLayout=function(){uki.supportNativeLayout===undefined&&uki.dom.probe(uki.createElement("div","position:absolute;width:100px;height:100px;left:-999em;",'<div style="position:absolute;left:0;right:0"></div>'),function(a){uki.supportNativeLayout=
a.childNodes[0].offsetWidth==100&&!A.opera})};uki.after=function(){var a=function(b){b.huid=b.huid||uki.guid++;if(!a._bound[b.huid]){a._bound[b.huid]=true;a._queue.push(b);a._running||a._startTimer()}};a._bound={};a._running=false;a._timer=0;a._queue=[];a.start=function(){a._clearTimer();a._running++};a.stop=function(){--a._running||a._runCallbacks()};a._runCallbacks=function(){a._clearTimer();var b=a._queue;a._queue=[];a._bound={};for(var c=0;c<b.length;c++)b[c]()};a._startTimer=function(){if(!a._timer)a._timer=
setTimeout(a._runCallbacks,1)};a._clearTimer=function(){if(a._timer){clearTimeout(a._timer);a._timer=0}};return a}();uki.view={declare:function(){var a=uki.toArray(arguments),b=a.shift();a=uki.newClass.apply(uki,a);var c=b.split("."),e=A,g,d,f=c.length-1;a.prototype.typeName=function(){return b};for(g=0;g<f;g++){d=c[g];e[d]||(e[d]={});e=e[d]}return e[c[f]]=a}};uki.view.Observable={bind:function(a,b){b.huid=b.huid||uki.guid++;uki.each(a.split(" "),function(c,e){this._bound(e)||this._bindToDom(e);this._observersFor(e).push(b)},
this);return this},unbind:function(a,b){if(this._observers){var c;if(a)c=a.split(" ");else{c=[];uki.each(this._observers,function(e){c.push(e)})}uki.each(c,function(e,g){this._observers[g]=!b?[]:uki.grep(this._observersFor(g,true),function(d){return d!=b&&d.huid!=b.huid});if(this._observers[g].length==0){this._observers[g]=undefined;this._unbindFromDom(g)}},this);return this}},trigger:function(a){var b=Array.prototype.slice.call(arguments,1);uki.each(this._observersFor(a,true),function(c,e){e.apply(this,
b)},this);return this},_unbindFromDom:function(a){this._domHander&&this._eventTargets[a]&&uki.dom.unbind(this._eventTargets[a],a,this._domHander)},_bindToDom:function(a,b){if(!b&&!this.dom)return false;this._domHander=this._domHander||uki.proxy(function(c){c.source=this;this.trigger(c.type,c)},this);this._eventTargets=this._eventTargets||{};this._eventTargets[a]=b||this.dom();uki.dom.bind(this._eventTargets[a],a,this._domHander);return true},_bound:function(a){return this._observers&&this._observers[a]},
_observersFor:function(a,b){if(b&&(!this._observers||!this._observers[a]))return[];if(!this._observers)this._observers={};this._observers[a]||(this._observers[a]=[]);return this._observers[a]}};(function(){function a(){return s.compatMode=="CSS1Compat"&&s.documentElement||s.body}var b=uki.Attachment=uki.newClass(uki.view.Observable,{init:function(c,e,g){uki.initNativeLayout();this._dom=c=c||A;this._view=e;this._rect=t.create(g)||this.rect();uki.dom.offset.initialize();e.parent(this);this.domForChild().appendChild(e.dom());
if(c!=A&&c.tagName!="BODY"){e=c.runtimeStyle||c.ownerDocument.defaultView.getComputedStyle(c,null);if(!e.position||e.position=="static")c.style.position="relative"}b.register(this);this.layout()},domForChild:function(){return this._dom===A?s.body:this._dom},rectForChild:function(){return this.rect()},scroll:function(){},scrollTop:function(){return this._dom.scrollTop||0},scrollLeft:function(){return this._dom.scrollLeft||0},parent:uki.F,childResized:uki.F,layout:function(){var c=this._rect,e=this._rect=
this.rect();this._view.parentResized(c,e);this._view._needsLayout&&this._view.layout();this.trigger("layout",{source:this,rect:e})},dom:function(){return this._dom},view:function(){return this._view},rect:function(){var c=this._dom===A||this._dom===s.body?x(a().clientWidth,this._dom.offsetWidth||0):this._dom.offsetWidth,e=this._dom===A||this._dom===s.body?x(a().clientHeight,this._dom.offsetHeight||0):this._dom.offsetHeight;return new t(c,e)}});b.instances=[];b.register=function(c){if(b.instances.length==
0){var e=false;uki.dom.bind(A,"resize",function(){if(!e){e=true;setTimeout(function(g,d){uki.after.start();e=false;g=0;for(d=b.instances.length;g<d;g++)b.instances[g].layout();uki.after.stop()},1)}})}b.instances.push(c)};b.childViews=function(){return uki.map(b.instances,"view")};uki.top=function(){return[b]}})();uki.Collection=function(a){this.length=0;Array.prototype.push.apply(this,a)};uki.fn=uki.Collection.prototype=new (function(){var a=this;this.each=function(b){return uki.each(this,b)};this.grep=
function(b){return new uki.Collection(uki.grep(this,b))};this.attr=function(b,c){if(c!==undefined){for(var e=this.length-1;e>=0;e--)uki.attr(this[e],b,c);return this}else return this[0]?uki.attr(this[0],b):""};this.find=function(b){return uki.find(b,this)};this.attachTo=function(b,c){this.each(function(){new uki.Attachment(b,this,c)});return this};this.append=function(b){var c=this[0];if(!c)return this;b=b.length!==undefined?b:[b];for(var e=b.length-1;e>=0;e--)c.appendChild(b[e]);return this};this.appendTo=
function(b){b=uki(b)[0];this.each(function(){b.appendChild(this)});return this};uki.Collection.addAttrs=function(b){uki.each(b,function(c,e){a[e]=function(g){return this.attr(e,g)}})};uki.Collection.addAttrs("dom html text background value rect checked anchors childViews typeName id name visible disabled focusable style draggable textSelectable width height minX maxX minY maxY left top x y contentsSize".split(" "));uki.each([["parent","parent"],["next","nextView"],["prev","prevView"]],function(b,
c){a[c[0]]=function(){return new uki.Collection(uki.unique(uki.map(this,c[1])))}});uki.each("bind unbind trigger layout appendChild removeChild insertBefore addRow removeRow resizeToContents toggle".split(" "),function(b,c){a[c]=function(){for(var e=this.length-1;e>=0;e--)this[e][c].apply(this[e],arguments);return this}});uki.each(uki.dom.events,function(b,c){a[c]=function(e){if(e)this.bind(c,e);else for(e=this.length-1;e>=0;e--)this[e][c]?this[e][c]():this[e].trigger(c);return this}})});(function(){function a(e){return uki.map(e,
function(g){return b(g)})}function b(e){if(uki.isFunction(e.typeName))return e;var g=e.view||e.type,d;if(uki.isFunction(g))d=new g(e.rect);else if(typeof g==="string"){for(var f=0,h=uki.viewNamespaces,j=h.length;f<j;f++){for(var l=(h[f]+g).split("."),p=A,m=0,o=l.length;p&&m<o;m++)p=p[l[m]];if(p){d=new p(e.rect);break}}if(!p)throw"No view of type "+g+" found";}else d=g;c(d,e);return d}function c(e,g){uki.each(g,function(d,f){d=="view"||d=="type"||d=="rect"||uki.attr(e,d,f)});return e}uki.build=function(e){return new uki.Collection(a(e.length===
undefined?[e]:e))};uki.viewNamespaces=["uki.view.",""];uki.build.copyAttrs=c})();(function(){function a(m){return m.parent().childViews().slice((m._viewIndex||0)+1)}function b(m){return c(uki.map(m,function(o){return[o].concat(b(d(o,"childViews")))}))}function c(m){return uki.reduce([],m,e)}function e(m,o){return m.concat(o)}var g,d=uki.attr,f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,h=[{name:"ID",regexp:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/},
{name:"ATTR",regexp:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/},{name:"TYPE",regexp:/^((?:[\w\u00c0-\uFFFF\*_\.-]|\\.)+)/},{name:"POS",regexp:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/}],j={first:function(m){return m===0},last:function(m,o,n){return m===n.length-1},even:function(m){return m%2===0},odd:function(m){return m%2===1},lt:function(m,o){return m<o[2]-0},gt:function(m,o){return m>o[2]-0},nth:function(m,o){return o[2]-0==m},eq:function(m,o){return o[2]-
0==m}},l={TYPE:function(m,o){o=o[1];if(o=="*")return true;return(m=d(m,"typeName"))&&m.length>=o.length&&("."+m).indexOf("."+o)==m.length-o.length},ATTR:function(m,o){m=d(m,o[1]);var n=m+"",k=o[2];o=o[4];return m==null?k==="!=":k==="="?n===o:k==="*="?n.indexOf(o)>=0:k==="~="?(" "+n+" ").indexOf(o)>=0:!o?n&&m!==false:k==="!="?n!=o:k==="^="?n.indexOf(o)===0:k==="$="?n.substr(n.length-o.length)===o:false},ID:function(m,o){return l.ATTR(m,["","id","=","",o[1]])},POS:function(m,o,n,k){return(m=j[o[1]])?
m(n,o,k):false}},p={"+":function(m){return uki.unique(uki.map(m,"nextView"))},">":function(m){return uki.unique(c(uki.map(m,"childViews")))},"":function(m){return uki.unique(b(c(uki.map(m,"childViews"))))},"~":function(m){return uki.unique(c(uki.map(m,a)))}};g=uki.Selector={find:function(m,o,n){o=o||uki.top();if(o.length===undefined)o=[o];var k=g.tokenize(m);m=k[0];k=k[1];for(var q=o,u;m.length>0;){u=p[m[0]]?p[m.shift()]:p[""];q=u(q);if(m.length==0)break;q=g.reduce(m.shift(),q)}if(k)q=q.concat(g.find(k,
o,true));return n?q:new uki.Collection(uki.unique(q))},reduce:function(m,o){if(!o||!o.length)return[];for(var n,k;m!="";){k=false;uki.each(h,function(q,u){if(n=m.match(u.regexp)){k=true;o=uki.grep(o,function(D,y){return l[u.name](D,n,y,o)});m=m.replace(u.regexp,"");return false}});if(!k)break}return o},tokenize:function(m){var o=[],n,k;for(f.lastIndex=0;(n=f.exec(m))!==null;){o.push(n[1]);if(n[2]){k=RegExp.rightContext;break}}return[o,k]}};uki.find=g.find})();uki.image=function(a,b,c){var e=new Image;
e.src=uki.imageSrc(a,b,c);return e};uki.imageSrc=function(a,b,c){if(uki.image.dataUrlSupported&&b)return b;if(c&&uki.image.needAlphaFix)return c;return a};uki.imageHTML=function(a,b,c,e){if(uki.image.needAlphaFix&&c)a=c;else if(uki.image.dataUrlSupported)a=b;return"<img"+(e||"")+' src="'+a+'" />'};uki.image.dataUrlSupported=s.createElement("canvas").toDataURL||/MSIE (8)/.test(H);uki.image.needAlphaFix=/MSIE 6/.test(H);if(uki.image.needAlphaFix)try{s.execCommand("BackgroundImageCache",false,true)}catch(ba){}(function(){var a=
/^\s*null\s*$/,b=/theme\s*\(\s*(.*\s*)\)/,c=/rows\s*\(\s*(.*\s*)\)/,e=/cssBox\s*\(\s*(.*\s*)\)/,g=uki.background=function(d){if(typeof d==="string"){var f;if(d.match(a))return new g.Null;if(f=d.match(b))return uki.theme.background(f[1]);if(f=d.match(c))return new g.Rows(f[1].split(",")[0],f[1].split(/\s*,\s*/).slice(1));if(f=d.match(e))return new g.CssBox(f[1]);return new g.Css(d)}return d}})();uki.background.Base=uki.background.Null=uki.newClass({init:uki.F,attachTo:uki.F,detach:uki.F});uki.background.Sliced9=
uki.newClass(new (function(){function a(d,f,h,j,l){j=h[3]?c(h,j):"";h[3]||(f+=b(h,l));return'<div class="'+d+'" style="position:absolute;overflow:hidden;'+f+'">'+j+"</div>"}function b(d,f){return";background: url("+uki.imageSrc(d[0],d[1],d[2])+") "+f}function c(d,f){return uki.imageHTML(d[0],d[1],d[2],' ondragstart="return false;" galleryimg="no" style="-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;position:absolute;'+f+'"')}var e=uki.dom,g={};this.init=function(d,f,h){this._settings=
uki.extend({},d);this._inset=z.create(f);this._size=null;this._inited=false;h=h||{};this._fixedSize=w.create(h.fixedSize)||new w;this._bgInset=z.create(h.inset)||new z;this._zIndex=h.zIndex||-1;this._container=this._getContainer();this._container.style.zIndex=this._zIndex};this._getContainer=function(){var d=this._getKey();if(!g[d])return g[d]=this._createContainer();return g[d].cloneNode(true)};this._createContainer=function(){var d=this._inset,f=this._bgInset,h=this._settings,j=d.left+d.right,l=
d.top+d.bottom;f=["left:"+f.left+"px","right:"+f.right+"px","top:"+f.top+"px","bottom:"+f.bottom+"px"].join(";");var p=[];if(d.top&&d.left)p[p.length]=a("tl",["left:0;top:0","width:"+d.left+"px","height:"+d.top+"px"].join(";"),h.c,["left:0;top:0","width:"+j+"px","height:"+l+"px"].join(";"),"top left");if(d.top)p[p.length]=a("t",["left:"+d.left+"px","top:0","height:"+d.top+"px","right:"+d.right+"px"].join(";"),h.h,["left:0;top:0;width:100%","height:"+l+"px"].join(";"),"repeat-x top");if(d.top&&d.right)p[p.length]=
a("tr",["right:0;top:0","width:"+d.right+"px","height:"+d.top+"px"].join(";"),h.c,["left:-"+d.left+"px","top:0","width:"+j+"px","height:"+l+"px"].join(";"),"top right");if(d.left)p[p.length]=a("l",["left:0","top:"+d.top+"px","width:"+d.left+"px","bottom:"+d.bottom+"px"].join(";"),h.v,["left:0;top:0;height:100%","width:"+j+"px"].join(";"),"repeat-y left");if(h.m)p[p.length]=a("m",["left:"+d.left+"px","top:"+d.top+"px","right:"+d.right+"px","bottom:"+d.bottom+"px"].join(";"),h.m,"left:0;top:0;height:100%;width:100%",
"");if(d.right)p[p.length]=a("r",["right:0","top:"+d.top+"px","width:"+d.right+"px","bottom:"+d.bottom+"px"].join(";"),h.v,["left:-"+d.left+"px","top:0;height:100%","width:"+j+"px"].join(";"),"repeat-y right");if(d.bottom&&d.left)p[p.length]=a("bl",["left:0;bottom:0","width:"+d.left+"px","height:"+d.bottom+"px"].join(";"),h.c,["left:0","top:-"+d.top+"px","width:"+j+"px","height:"+l+"px"].join(";"),"left -"+d.top+"px");if(d.bottom)p[p.length]=a("b",["left:"+d.left+"px","bottom:0","height:"+d.bottom+
"px","right:"+d.right+"px"].join(";"),h.h,["left:0","top:-"+d.top+"px","width:100%","height:"+l+"px"].join(";"),"repeat-x 0 -"+d.top+"px");if(d.bottom&&d.right)p[p.length]=a("br",["right:0;bottom:0","width:"+d.right+"px","height:"+d.bottom+"px"].join(";"),h.c,["left:-"+d.left+"px","top:-"+d.top+"px","width:"+j+"px","height:"+l+"px"].join(";"),"right -"+d.top+"px");d=uki.createElement("div","position:absolute;overflow:hidden;"+f,p.join(""));d.className="uki-background-Sliced9";return d};this._getKey=
function(){return uki.map(["v","h","m","c"],function(d){return this._settings[d]&&this._settings[d][0]||""},this).concat([this._inset,this._bgInset,this._fixedSize]).join(",")};this.attachTo=function(d){this._comp=d;this._container.style.visibility="visible";this._comp.dom().insertBefore(this._container,this._comp.dom().firstChild);if(!uki.supportNativeLayout){this._layoutHandler=this._layoutHandler||uki.proxy(function(f){if(!(this._size&&this._size.eq(f.rect))){this._size=f.rect;this.layout()}},
this);this._comp.bind("layout",this._layoutHandler);this.layout()}};this.detach=function(){if(this._comp){this._container.style.visibility="hidden";uki.supportNativeLayout||this._comp.unbind("layout",this._layoutHandler);this._size=this._comp=null;this._attached=this._inited=false}};this.layout=function(){var d=this._comp.rect(),f=this._parts,h=this._inset,j=this._bgInset,l=this._fixedSize,p=R(l.width||d.width-j.left-j.right);d=R(l.height||d.height-j.top-j.bottom);j=h.left+h.right;h=h.top+h.bottom;
if(!f){f={};uki.each(this._container.childNodes,function(){if(this.className)f[this.className]=this});this._parts=f}f.t&&e.layout(f.t.style,{width:p-j});f.b&&e.layout(f.b.style,{width:p-j});f.l&&e.layout(f.l.style,{height:d-h});f.r&&e.layout(f.r.style,{height:d-h});f.m&&e.layout(f.m.style,{height:d-h,width:p-j});e.layout(this._container.style,{width:p,height:d})}}));uki.background.Css=uki.newClass(new (function(){this.init=function(a){this._options=typeof a=="string"?{background:a}:a;this._options=
uki.browser.css(this._options)};this.attachTo=function(a){this._comp=a;this._originalValues={};uki.each(this._options,function(b,c){this._originalValues[b]=a.style(b);a.style(b,c)},this)};this.detach=function(){this._comp&&uki.each(this._options,function(a){this._comp.style(a,this._originalValues[a])},this)}}));uki.background.CssBox=uki.newClass(new (function(){function a(c){b[c]||uki.dom.probe(uki.createElement("div",c+";position:absolute;overflow:hidden;left:-999em;width:10px;height:10px;"),function(e){b[c]=
new z(e.offsetHeight-10,e.offsetWidth-10)});return b[c]}var b={};this.init=function(c,e){this._options=c;e=e||{};this._inset=inset=z.create(e.inset)||new z;this._insetWidth=a(c).left+inset.left+inset.right;this._insetHeight=a(c).top+inset.top+inset.bottom;this._container=uki.createElement("div","position:absolute;overflow:hidden;z-index:"+(e.zIndex||"-1")+";left:"+inset.left+"px;top:"+inset.top+"px;right:"+inset.right+"px;bottom:"+inset.bottom+"px;"+uki.browser.css(c),e.innerHTML);this._container.className=
"uki-background-CssBox";this._attached=false};this.attachTo=function(c){this._comp=c;this._comp.dom().insertBefore(this._container,this._comp.dom().firstChild);if(!uki.supportNativeLayout){this._layoutHandler=this._layoutHandler||uki.proxy(function(e){this.layout(e.rect)},this);this._comp.bind("layout",this._layoutHandler);this.layout(this._comp.rect())}};this.layout=function(c){this._prevLayout=uki.dom.layout(this._container.style,{width:c.width-this._insetWidth,height:c.height-this._insetHeight},
this._prevLayout)};this.detach=function(){if(this._comp){this._comp.dom().removeChild(this._container);uki.supportNativeLayout||this._comp.unbind("layout",this._layoutHandler);this._attached=false}}}));uki.background.LinearGradient=uki.newClass(uki.background.CssBox,new (function(){function a(g,d,f,h){var j=g+d+(f?1:0)+uki.map(h,function(m){return m.pos+"-"+m.color});if(!e[j]){var l=document.createElement("canvas");l.width=l.height=c;var p=l.getContext("2d");f=p.createLinearGradient(0,0,f?c:0,f?0:
c);f.addColorStop(0,g);f.addColorStop(1,d);for(g=0;g<h.length;g++)f.addColorStop(h[g].pos,h[g].color);p.fillStyle=f;p.fillRect(0,0,c,c);e[j]=l.toDataURL&&l.toDataURL()}return e[j]}function b(g,d,f){return"filter:progid:DXImageTransform.Microsoft.gradient(gradientType="+(g?"1":"0")+", startColorstr=#FF"+d.substr(1)+", endColorstr=#FF"+f.substr(1)+");"}var c=200;this.init=function(g){this._options=g;var d=this._inset=uki.geometry.Inset.create(this._options.inset)||new uki.geometry.Inset;this._container=
this._createContainer();g=this._container.cloneNode(true);g.style.cssText+=";width:100px;height:100px;";uki.dom.probe(g,uki.proxy(function(f){this._insetWidth=f.offsetWidth-100+d.width();this._insetHeight=f.offsetHeight-100+d.height()},this));this._container.style.cssText+=";left:"+d.left+"px;top:"+d.top+"px;right:"+d.right+"px;bottom:"+d.bottom+"px;";this._attached=false};var e={};this._createContainer=function(){var g=this._options.startColor||"#FFFFFF",d=this._options.endColor||"#CCCCCC",f=this._options.horizontal,
h=this._options.stops||[],j="",l=0,p=uki.browser.cssLinearGradient(),m;if(p=="-moz-linear-gradient"||p=="linear-gradient"){for(j+="background-image:"+p+"("+(f?"left":"top")+", "+g;l<h.length;l++)j+=","+h[l].color+" "+h[l].pos*100+"%";j+=", "+d+");"}else if(p=="-webkit-gradient"){for(j+="background-image:"+p+"(linear, 0% 0%, "+(f?"100% 0%":"0% 100%")+", from("+g+"), to("+d+")";l<h.length;l++)j+=",color-stop("+h[l].pos*100+"%,"+h[l].color+")";j+=");"}else if(!uki.browser.canvas()&&uki.browser.cssFilter()&&
h.length==0)j+=b(f,g,d);p=uki.createElement("div",uki.browser.css(this._options.css)+";position:absolute;overflow:hidden;z-index:"+(this._options.zIndex||"-1")+";"+j,this._options.innerHTML);p.className="uki-background-CssBox";if(j)return p;if(uki.browser.canvas()&&(m=a(g,d,f,h))){f=uki.createElement("img","position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;");f.src=m;p.appendChild(f)}else if(uki.browser.cssFilter()&&h.length>0){h.unshift({pos:0,color:g});for(h.push({pos:1,color:d});l<
h.length-1;l++){m=uki.createElement("div","position:absolute;z-index:-1;left:"+(f?h[l].pos*100-(l&&1)+"%":"0")+";top:"+(f?"0":h[l].pos*100-(l&&1)+"%")+";width:"+(f?(h[l+1].pos-h[l].pos)*100+1+"%":"100%")+";height:"+(f?"100%":(h[l+1].pos-h[l].pos)*100+1+"%")+";"+b(f,h[l].color,h[l+1].color));p.appendChild(m)}}return p}}));uki.background.Rows=uki.newClass(new (function(){function a(e,g){var d=e+" "+g.join(" "),f=[],h=[],j,l=g.length;if(!b[d]){for(j=0;j<l;j++)f[j]=['<div style="height:',e,"px;width:100%;overflow:hidden;",
g[j]?"background:"+g[j]:"",'"></div>'].join("");for(j=0;j<c;j++)h[j]=f[j%l];b[d]=h.join("")}return b[d]}var b=[],c=100;this.init=function(e,g){this._height=e||20;this._colors=uki.isArray(g)?g:g.split(" ");this._packSize=P(c/this._colors.length)*this._colors.length;this._renderedHeight=0;this._visibleExt=200;if(this._colors.length==1)this._colors=this._colors.concat(["#FFF"])};this.attachTo=function(e){this._comp&&this.detach();this._comp=e;if(!this._container){this._container=uki.createElement("div",
"position:absolute;left:0;top:0;width:100%;z-index:-1");this._container.className="uki-background-Rows"}this._layoutHandler=this._layoutHandler||uki.proxy(function(g){this.layout(g.rect,g.visibleRect)},this);this._comp.dom().appendChild(this._container);this._comp.bind("layout",this._layoutHandler)};this.layout=function(e,g){for(e=g?g.height+this._visibleExt*2:e.maxY();this._renderedHeight<e;){var d=c*this._height,f=uki.createElement("div","height:"+d+"px;overflow:hidden;width:100%;",a(this._height,
this._colors));this._renderedHeight+=d;this._container.appendChild(f)}if(g)this._container.style.top=P((g.y-this._visibleExt)/this._height/this._colors.length)*this._height*this._colors.length+"px"};this.detach=function(){if(this._comp){this._comp.dom().removeChild(this._container);this._comp.unbind("layout",this._layoutHandler);this._comp=null}}}));uki.background.Multi=uki.newClass({init:function(){this._bgs=Array.prototype.slice.call(arguments,0)},attachTo:function(a){for(var b=0,c=this._bgs.length;b<
c;b++)this._bgs[b].attachTo(a)},detach:function(){for(var a=0,b=this._bgs.length;a<b;a++)this._bgs[a].detach()}});(function(){var a=uki.theme={themes:[],register:function(b,c){(c=a.themes)[c.length]=b},background:function(b,c){return a._namedResource(b,"background",c)||new uki.background.Null},image:function(b,c){return a._namedResource(b,"image",c)||new Image},imageSrc:function(b,c){return a._namedResource(b,"imageSrc",c)||""},style:function(b,c){return a._namedResource(b,"style",c)||""},dom:function(b,
c){return a._namedResource(b,"dom",c)||uki.createElement("div")},template:function(b,c){return a._namedResource(b,"template",c)||""},_namedResource:function(b,c,e,g,d){for(g=a.themes.length-1;g>=0;g--)if(d=a.themes[g][c](b,e))return d;return null}}})();uki.theme.Base={images:[],imageSrcs:[],backgrounds:[],doms:[],styles:[],templates:[],background:function(a,b){return this.backgrounds[a]&&this.backgrounds[a](b)},image:function(a,b){if(this.images[a])return this.images[a](b);return this.imageSrcs[a]&&
uki.image.apply(uki,this.imageSrcs[a](b))},imageSrc:function(a,b){if(this.imageSrcs[a])return uki.imageSrc.apply(uki,this.imageSrcs[a](b));return this.images[a]&&this.images[a](b).src},dom:function(a,b){return this.doms[a]&&this.doms[a](b)},style:function(a,b){return this.styles[a]&&this.styles[a](b)},template:function(a,b){return this.templates[a]&&this.templates[a](b)}};uki.theme.Template=function(a){a=a.split("${");var b,c,e;this.parts=[a[0]];this.names=[];b=1;for(c=a.length;b<c;b++){e=a[b].split("}");
this.names.push(e.shift());this.parts.push("");this.parts.push(e.join("}"))}};uki.theme.Template.prototype.render=function(a){for(var b=0,c=this.names,e=c.length;b<e;b++)this.parts[b*2+1]=a[c[b]]||"";return this.parts.join("")};uki.view.utils=new (function(){function a(b){return b.visibleRect?b.visibleRect():b.rect().clone()}this.visibleRect=function(b,c){var e=[],g,d=b;do{e[e.length]=d;d=d.parent()}while(d&&d!=c);if(c&&c!=b)e[e.length]=c;for(b=e.length-1;b>=0;b--){d=e[b];c=a(d);g=g?g.intersection(c):
c;g.x-=d.rect().x;g.y-=d.rect().y}return g};this.top=function(b){for(;b.parent();)b=b.parent();return b};this.offset=function(b,c){for(var e=new B,g;b&&b!=c;){g=b.rect();e.x+=g.x;e.y+=g.y;if(b.scrollTop){e.x-=b.scrollLeft();e.y-=b.scrollTop()}b=b.parent()}return e};this.scrollableParent=function(b){do{if(uki.isFunction(b.scrollTop))return b;b=b.parent()}while(b);return null}});uki.extend(uki.view,uki.view.utils);uki.view.Styleable=new (function(){this.style=function(a,b){if(typeof a=="string")return this._style(a,
b);uki.each(a,function(c,e){this._style(c,e)},this);return this};this._style=function(a,b){if(b===undefined)return this._dom.style[a];this._dom.style[a]=b;return this};this.textSelectable=uki.newProp("_textSelectable",function(a){this._textSelectable=a;if(uki.browser.cssUserSelect()!="unsupported")this._dom.style[uki.camalize(uki.browser.cssUserSelect())]=a?"":uki.browser.cssUserSelect()=="-moz-user-select"?"-moz-none":"none";else uki.dom[a?"unbind":"bind"](this.dom(),"selectstart",uki.dom.preventDefaultHandler);
this._dom.style.cursor=a?"":"default"});this.draggable=function(a){if(a===undefined)return this._dom.getAttribute("draggable");this._dom.setAttribute("draggable",true);this._dom.style.WebkitUserDrag="element";return this}});uki.view.Focusable=new (function(){this._focusOnClick=this._focusable=true;this.focusOnClick=uki.newProp("_focusOnClick");this.focusable=uki.newProp("_focusable",function(a){(this._focusable=a)&&this._initFocusable();this._updateFocusable()});this.disabled=uki.newProp("_disabled",
function(a){var b=a!==!!this._disabled;(this._disabled=a)&&this.blur();this._updateFocusable();b&&this._updateBg&&this._updateBg()});this._updateFocusable=function(){if(!(this._preCreatedFocusTarget||!this._focusTarget))this._focusTarget.style.display=this._focusable&&!this._disabled?"block":"none"};this._initFocusable=function(a){if(!(!a&&!this._focusable||this._focusTarget)){this._preCreatedFocusTarget=this._focusTarget=a;if(!a){this._focusTarget=uki.createElement("input","position:absolute;left:-9999px;top:0;width:1px;height:1px;");
this._focusTarget.className="uki-view-Focusable";this.dom().appendChild(this._focusTarget)}this._hasFocus=false;this._firstFocus=true;uki.dom.bind(this._focusTarget,"focus",uki.proxy(function(b){this._stopWatingForBlur();this._hasFocus||this._focus(b)},this));uki.dom.bind(this._focusTarget,"blur",uki.proxy(function(){if(this._hasFocus){this._hasFocus=false;this._waitingForBlur=setTimeout(uki.proxy(function(){this._waitingForBlur=false;this._hasFocus||this._blur()},this),1)}},this));a||this.bind("mousedown",
function(){this._focusOnClick&&this.focus()});this._updateFocusable()}};this._focus=function(){this._hasFocus=true;this._firstFocus=false};this._blur=function(){this._hasFocus=false};this._stopWatingForBlur=function(){if(this._waitingForBlur){clearTimeout(this._waitingForBlur);this._waitingForBlur=false;this._hasFocus=true}};this.focus=function(){if(this._focusable&&!this._disabled){this._stopWatingForBlur();this._hasFocus||this._focus();var a=this._focusTarget;setTimeout(function(){try{a.focus()}catch(b){}a=
null},1)}return this};this.blur=function(){try{this._focusTarget.blur()}catch(a){}return this};this.hasFocus=function(){return this._hasFocus};this._bindToDom=function(a){if(!this._focusTarget||"keyup keydown keypress focus blur".indexOf(a)==-1)return false;return uki.view.Observable._bindToDom.call(this,a,this._focusTarget)}});var I=16,J=32;uki.view.declare("uki.view.Base",uki.view.Observable,uki.view.Styleable,function(){function a(c){if(!c)return 0;var e=0;if(c.indexOf("width")>-1)e|=I;if(c.indexOf("height")>
-1)e|=J;return e}var b=1;this.defaultCss="position:absolute;z-index:100;-moz-user-focus:none;";this.init=function(c){this._parentRect=this._rect=t.create(c);this._setup();uki.initNativeLayout();this._createDom()};this._setup=function(){uki.extend(this,{_anchors:0,_parent:null,_visible:true,_needsLayout:true,_textSelectable:false,_styleH:"left",_styleV:"top",_firstLayout:true});this.defaultCss+=uki.theme.style("base")};this.dom=function(){return this._dom};this.id=function(c){if(c===undefined)return this._dom.id;
this._dom.id&&uki.unregisterId(this);this._dom.id=c;uki.registerId(this);return this};uki.delegateProp(this,"className","_dom");this.visible=function(c){if(c===undefined)return this._dom.style.display!="none";this._dom.style.display=c?"block":"none";return this};this.background=function(c){if(c===undefined&&!this._background&&this.defaultBackground)this._background=this.defaultBackground();if(c===undefined)return this._background;c=uki.background(c);if(c==this._background)return this;this._background&&
this._background.detach(this);c.attachTo(this);this._background=c;return this};this.defaultBackground=function(){return this._defaultBackground&&uki.background(this._defaultBackground)};this.parent=function(c){if(c===undefined)return this._parent;this._parent=c;return this};this.childViews=function(){return[]};this.prevView=function(){if(!this.parent())return null;return this.parent().childViews()[this._viewIndex-1]||null};this.nextView=function(){if(!this.parent())return null;return this.parent().childViews()[this._viewIndex+
1]||null};this.rect=function(c){if(c===undefined)return this._rect;this._parentRect=c=t.create(c);this._rect=this._normalizeRect(c);this._needsLayout=this._needsLayout||b++;return this};this.anchors=uki.newProp("_anchors",function(c){if(c.indexOf){var e=0;if(c.indexOf("right")>-1)e|=2;if(c.indexOf("bottom")>-1)e|=4;if(c.indexOf("top")>-1)e|=1;if(c.indexOf("left")>-1)e|=8;if(c.indexOf("width")>-1||e&8&&e&2)e|=I;if(c.indexOf("height")>-1||e&4&&e&1)e|=J;c=e}this._anchors=c;this._styleH=c&8?"left":"right";
this._styleV=c&1?"top":"bottom"});this.rectForChild=function(){return this.rect()};this.layout=function(){this._layoutDom(this._rect);this._needsLayout=false;this.trigger("layout",{rect:this._rect,source:this});this._firstLayout=false};this.layoutIfNeeded=function(){this._needsLayout&&this.visible()&&this.layout()};uki.each(["min","max"],function(c,e){c=e+"Size";var g="_"+c;this[c]=function(d){if(d===undefined)return this[g]||new w;this[g]=w.create(d);this.rect(this._parentRect);this._dom.style[e+
"Width"]=this[g].width?this[g].width+"px":"";this._dom.style[e+"Height"]=this[g].height?this[g].height+"px":"";return this}},this);this.parentResized=function(c,e){var g=this._parentRect.clone(),d=(e.width-c.width)/((this._anchors&8^8?1:0)+(this._anchors&I?1:0)+(this._anchors&2^2?1:0));c=(e.height-c.height)/((this._anchors&1^1?1:0)+(this._anchors&J?1:0)+(this._anchors&4^4?1:0));if(this._anchors&8^8)g.x+=d;if(this._anchors&I)g.width+=d;if(this._anchors&1^1)g.y+=c;if(this._anchors&J)g.height+=c;this.rect(g)};
this.childResized=function(){};this.resizeToContents=function(c){c=a(c);if(0==c)return this;this.rect();this._rect=this._parentRect=this._calcRectOnContentResize(c);this._needsLayout=true;return this};this.contentsSize=function(){return this.rect()};this._normalizeRect=function(c){if(this._minSize)c=new t(c.x,c.y,x(this._minSize.width,c.width),x(this._minSize.height,c.height));if(this._maxSize)c=new t(c.x,c.y,F(this._maxSize.width,c.width),F(this._maxSize.height,c.height));return c};this._initBackgrounds=
function(){this.background()&&this.background().attachTo(this)};this._calcRectOnContentResize=function(c){var e=this.contentsSize(c),g=this.rect();if(e.eq(g))return g;var d=this.rect().clone(),f=e.width-g.width;e=e.height-g.height;if(c&I){if(this._anchors&8^8&&this._anchors&2^2)d.x-=f/2;else if(this._anchors&8^8)d.x-=f;d.width+=f}if(c&J){if(this._anchors&1^1&&this._anchors&4^4)d.y-=e/2;else if(this._anchors&1^1)d.y-=e;d.height+=e}return d};uki.each(["width","height","minX","maxX","minY","maxY","x",
"y","left","top"],function(c,e){this[e]=function(g){if(g===undefined)return uki.attr(this.rect(),e);uki.attr(this.rect(),e,g);return this}},this);this._createDom=function(){this._dom=uki.createElement("div",this.defaultCss);this._initClassName()};this._initClassName=function(){this._dom.className=this.typeName().replace(/\./g,"-")};this._layoutDom=function(c){var e={},g=uki.supportNativeLayout,d=this.parent().rectForChild(this);if(g&&this._anchors&8&&this._anchors&2){e.left=c.x;e.right=d.width-c.x-
c.width}else{e.width=c.width;e[this._styleH]=this._styleH=="left"?c.x:d.width-c.x-c.width}if(g&&this._anchors&1&&this._anchors&4){e.top=c.y;e.bottom=d.height-c.y-c.height}else{e.height=c.height;e[this._styleV]=this._styleV=="top"?c.y:d.height-c.y-c.height}this._lastLayout=uki.dom.layout(this._dom.style,e,this._lastLayout);this._firstLayout&&this._initBackgrounds();return true};this._bindToDom=function(c){if("resize layout".indexOf(c)>-1)return true;return uki.view.Observable._bindToDom.call(this,
c)}});uki.view.declare("uki.view.Container",uki.view.Base,function(a){function b(c,e){var g=0,d;for(d=c._childViews.length-1;d>=0;d--)if(c._childViews[d].visible())g=x(g,c._childViews[d].rect()[e]());return g}this._inset=new z;this._setup=function(){this._childViews=[];a._setup.call(this)};this.contentsWidth=function(){return b(this,"maxX")+this.inset().right};this.contentsHeight=function(){return b(this,"maxY")+this.inset().bottom};this.contentsSize=function(){return new w(this.contentsWidth(),this.contentsHeight())};
this.childViews=function(c){if(c===undefined)return this._childViews;uki.each(this._childViews,function(e,g){this.removeChild(g)},this);uki.each(uki.build(c),function(e,g){this.appendChild(g)},this);return this};this.removeChild=function(c){c.parent(null);this.domForChild(c).removeChild(c.dom());var e,g;e=c._viewIndex+1;for(g=this._childViews.length;e<g;e++)this._childViews[e]._viewIndex--;this._childViews=uki.grep(this._childViews,function(d){return d!=c});this._contentChanged()};this.appendChild=
function(c){c._viewIndex=this._childViews.length;this._childViews.push(c);c.parent(this);this.domForChild(c).appendChild(c.dom());this._contentChanged()};this.insertBefore=function(c,e){var g,d;g=c._viewIndex=e._viewIndex;for(d=this._childViews.length;g<d;g++)this._childViews[g]._viewIndex++;this._childViews.splice(e._viewIndex-1,0,c);c.parent(this);this.domForChild(c).insertBefore(c.dom(),e.dom());this._contentChanged()};this.domForChild=function(){return this._dom};this.inset=uki.newProp("_inset",
function(c){this._inset=z.create(c)});this._contentChanged=function(){};this._layoutDom=function(c){a._layoutDom.call(this,c);this._layoutChildViews(c)};this._layoutChildViews=function(){for(var c=0,e=this.childViews();c<e.length;c++)e[c].layoutIfNeeded()};this.rect=function(c){if(c===undefined)return this._rect;this._parentRect=c=t.create(c);var e=this._rect;if(!this._resizeSelf(c))return this;this._needsLayout=true;if(e.width!=c.width||e.height!=c.height)this._resizeChildViews(e);this.trigger("resize",
{oldRect:e,newRect:this._rect,source:this});return this};this._resizeSelf=function(c){this._rect=this._normalizeRect(c);return true};this._resizeChildViews=function(c){for(var e=0,g=this.childViews();e<g.length;e++)g[e].parentResized(c,this._rect)}});uki.view.declare("uki.view.Box",uki.view.Container,{});uki.view.declare("uki.view.Image",uki.view.Base,function(){this.typeName=function(){return"uki.view.Image"};uki.delegateProp(this,"src","_dom");this._createDom=function(){this._dom=uki.createElement("img",
this.defaultCss);this._initClassName()}});uki.view.declare("uki.view.Label",uki.view.Base,function(a){this._setup=function(){a._setup.call(this);uki.extend(this,{_scrollable:false,_textSelectable:false,_inset:new z});this.defaultCss+=uki.theme.style("label")};this._style=function(b,c){if(c!==undefined&&uki.inArray(b,uki.browser.textStyles)!=-1)this._label.style[b]=c;return a._style.call(this,b,c)};this.adaptToContents=uki.newProp("_adaptToContents");this.textSelectable=function(b){if(b!==undefined&&
!this._textSelectProp)this._label.unselectable=b?"":"on";return a.textSelectable.call(this,b)};this.contentsSize=function(b){var c=this._createLabelClone(b),e=this.inset(),g;uki.dom.probe(c,function(){g=new w(c.offsetWidth+e.width(),c.offsetHeight+e.height())});return g};this.text=function(b){return b===undefined?this.html():this.html(uki.escapeHTML(b))};this.html=function(b){if(b===undefined)return this._label.innerHTML;this._label.innerHTML=b;return this};this.inset=uki.newProp("_inset",function(b){this._inset=
z.create(b)});this.scrollable=uki.newProp("_scrollable",function(b){this._scrollable=b;this._label.style.overflow=b?"auto":"hidden"});this.multiline=uki.newProp("_multiline",function(b){this._multiline=b;this._label.style.whiteSpace=b?"":"nowrap"});this._createLabelClone=function(b){var c=this._label.cloneNode(true),e=this.inset(),g=this.rect();if(b&I)c.style.width=c.style.right="";else if(uki.supportNativeLayout){c.style.right="";c.style.width=g.width-e.width()+"px"}if(b&J)c.style.height=c.style.bottom=
"";else if(uki.supportNativeLayout){c.style.bottom="";c.style.height=g.height-e.height()+"px"}c.style.paddingTop=0;c.style.visibility="hidden";return c};this._createDom=function(){a._createDom.call(this);this._label=uki.createElement("div",this.defaultCss+"white-space:nowrap;");this._dom.appendChild(this._label);this.textSelectable(this.textSelectable())};this._layoutDom=function(){var b=this._inset,c,e=this._anchors,g="";c=uki.supportNativeLayout?{left:b.left,top:b.top,right:b.right,bottom:b.bottom}:
{left:b.left,top:b.top,width:this._rect.width-b.width(),height:this._rect.height-b.height()};if(e&4)if(e&1)if(e&2){if(!(e&8)){c.left=c.width=undefined;g="offsetWidth"}}else{c.right=c.width=undefined;g="offsetWidth"}else{c.height=c.bottom=undefined;g="offsetHeight"}else{c.height=c.bottom=undefined;g="offsetHeight"}a._layoutDom.apply(this,arguments);if(!this.multiline()){parseInt(this.style("fontSize"),10);this._label.style.lineHeight=this._rect.height-b.top-b.bottom+"px"}this._lastLabelLayout=uki.dom.layout(this._label.style,
c,this._lastLabelLayout);if(this.adaptToContents()&&g){b=this._label[g];if(b!=this._lastWatchValue&&this.parent()){this.resizeToContents(g=="offsetWidth"?"width":"height");this.parent().childResized(this)}this._lastWatchValue=b}}});uki.view.declare("uki.view.Button",uki.view.Label,uki.view.Focusable,function(a,b){this._backgroundPrefix="button-";this._setup=function(){a._setup.call(this);uki.extend(this,{_inset:new z(0,4)});this.defaultCss+="cursor:default;-moz-user-select:none;-webkit-user-select:none;"+
uki.theme.style("button")};uki.addProps(this,["backgroundPrefix"]);uki.each(["normal","hover","down","focus","disabled"],function(c,e){var g=e+"-background";this[g]=function(d){if(d)this["_"+g]=d;return this["_"+g]=this["_"+g]||uki.theme.background(this._backgroundPrefix+e,{height:this.rect().height,view:this})}},this);this._createLabelClone=function(c){return a._createLabelClone.call(this,c)};this._layoutDom=function(c){a._layoutDom.call(this,c);if(this._firstLayout){this["hover-background"]();this["down-background"]();
this._backgroundByName(this._backgroundName||"normal")}};this._updateBg=function(){this._backgroundByName(this._disabled?"disabled":this._down?"down":this._over?"hover":"normal")};this._createDom=function(){this._dom=uki.createElement("div",this.defaultCss);this._initClassName();this._label=uki.createElement("div",this.defaultCss);this._dom.appendChild(this._label);this._dom.appendChild(uki.createElement("div","left:0;top:0;width:100%;height:100%;position:absolute;background:url("+uki.theme.imageSrc("x")+
");"));this.textSelectable(this.textSelectable());this._initFocusable();uki.dom.bind(document,"mouseup",uki.proxy(this._mouseup,this));this.bind("mousedown",this._mousedown);this.bind("mouseenter",this._mouseenter);this.bind("mouseleave",this._mouseleave);this.bind("keyup",this._keyup);this.bind("keydown",this._keydown)};this._mouseup=function(){if(this._down){this._down=false;this._updateBg()}};this._mousedown=function(){this._down=true;this._updateBg()};this._mouseenter=function(){this._over=true;
this._updateBg()};this._mouseleave=function(){this._over=false;this._updateBg()};this._focus=function(c){this["focus-background"]().attachTo(this);b._focus.call(this,c)};this._keydown=function(c){if((c.which==32||c.which==13)&&!this._down)this._mousedown()};this._keyup=function(c){if((c.which==32||c.which==13)&&this._down){this._mouseup();this.trigger("click",{domEvent:c,source:this})}c.which==27&&this._down&&this._mouseup()};this._blur=function(c){this["focus-background"]().detach();b._blur.call(this,
c)};this._backgroundByName=function(c){var e=this[c+"-background"]();if(this._background!=e){this._background&&this._background.detach();e.attachTo(this);this._background=e;this._backgroundName=c}};this._bindToDom=function(c){return uki.view.Focusable._bindToDom.call(this,c)||uki.view.Label.prototype._bindToDom.call(this,c)}});uki.view.declare("uki.view.TextField",uki.view.Base,uki.view.Focusable,function(a,b){function c(d){if(!g[d]){var f=uki.createElement("input",a.defaultCss+"border:none;padding:0;border:0;margin:0;overflow:hidden;left:-999em;top:0;line-height:1;"+
d);uki.dom.probe(f,function(h){g[d]=h.offsetHeight})}return g[d]}function e(d){return typeof d.placeholder=="string"}var g={};this._backgroundPrefix="";this._tagName="input";this._type="text";this._setup=function(){a._setup.apply(this,arguments);uki.extend(this,{_value:"",_multiline:false,_placeholder:""});this.defaultCss+="margin:0;border:none;outline:none;padding:0;left:2px;top:0;z-index:100;-moz-resize:none;resize:none;background: url("+uki.theme.imageSrc("x")+");"+uki.theme.style("input")};this._updateBg=
function(){this._input.style.color=this._disabled?"#999":"#000"};uki.delegateProp(this,"name","_input");this.value=function(d){if(d===undefined)return this._input.value;this._input.value=d;this._updatePlaceholderVis();return this};this.placeholder=uki.newProp("_placeholder",function(d){this._placeholder=d;if(!this._multiline&&e(this._input))this._input.placeholder=d;else if(this._placeholderDom)this._placeholderDom.innerHTML=d;else{this._placeholderDom=uki.createElement("div",this.defaultCss+"z-input:103;color:#999;cursor:text;-moz-user-select:none;",
d);if(!this._multiline)this._placeholderDom.style.whiteSpace="nowrap";this._dom.appendChild(this._placeholderDom);this._updatePlaceholderVis();uki.each(["fontSize","fontFamily","fontWeight"],function(f,h){this._placeholderDom.style[h]=this._input.style[h]},this);uki.dom.bind(this._placeholderDom,"mousedown",uki.proxy(function(f){this.focus();f.preventDefault()},this))}});this._style=function(d,f){if(uki.inArray(d,uki.browser.textStyles)!=-1){if(f===undefined)return this._input.style[d];this._input.style[d]=
f;if(this._placeholderDom)this._placeholderDom.style[d]=f}return a._style.call(this,d,f)};uki.addProps(this,["backgroundPrefix"]);this.defaultBackground=function(){return uki.theme.background(this._backgroundPrefix+"input")};this._createDom=function(){this._dom=uki.createElement("div",a.defaultCss+";cursor:text;overflow:visible;");this._initClassName();this._input=uki.createElement(this._tagName,this.defaultCss+(this._multiline?"":";overflow:hidden;"));this._input.value=this._value;if(this._type)this._input.type=
this._type;this._dom.appendChild(this._input);this._input.value=this.value();this._initFocusable(this._input);this.bind("mousedown",function(d){d.target!=this._input&&this.focus()})};this._layoutDom=function(){a._layoutDom.apply(this,arguments);uki.dom.layout(this._input.style,{width:this._rect.width-4});var d;if(this._multiline){this._input.style.height=this._rect.height-4+"px";this._input.style.top="2px";d="2px 0"}else{d=(this._rect.height-c("font-size:"+this.style("fontSize")+";font-family:"+this.style("fontFamily")))/
2;d=P(d)+"px 0 "+R(d)+"px 0";this._input.style.padding=d}if(this._placeholderDom)this._placeholderDom.style.padding=d};this._updatePlaceholderVis=function(){if(this._placeholderDom)this._placeholderDom.style.display=this.value()?"none":"block"};this._focus=function(d){this._focusBackground=this._focusBackground||uki.theme.background(this._backgroundPrefix+"input-focus");this._focusBackground.attachTo(this);if(this._placeholderDom)this._placeholderDom.style.display="none";b._focus.call(this,d)};this._blur=
function(d){this._focusBackground.detach();this._updatePlaceholderVis();b._blur.call(this,d)};this._bindToDom=function(d){return b._bindToDom.call(this,d)||a._bindToDom.call(this,d)}});uki.view.declare("uki.view.MultilineTextField",uki.view.TextField,function(a){this._tagName="textarea";this._type="";this._setup=function(){a._setup.call(this);this._multiline=true}});uki.view.declare("uki.view.PasswordTextField",uki.view.TextField,function(a){this._setup=function(){a._setup.call(this);this._type="password"}});
uki.Collection.addAttrs(["placeholder"]);(function(){function a(){b||uki.dom.probe(uki.createElement("div","position:absolute;left:-99em;width:100px;height:100px;overflow:scroll;",'<div style="position:absolute;left:0;width:100%;"></div>'),function(e){b=e.offsetWidth-e.clientWidth;c=e.firstChild.offsetWidth==100});return b}var b,c;uki.view.declare("uki.view.ScrollPane",uki.view.Container,function(e){uki.extend(this,{_scrollableY:true,_scrollableX:false,_scrollY:false,_scrollX:false,_sbY:false,_sbX:false});
this._setup=function(){e._setup.call(this);this._clientRect=this.rect().clone();this._rectForChild=this.rect().clone()};uki.addProps(this,["scrollableY","scrollableX","scrollX","scrollY"]);this.scrollV=this.scrollY;this.scrollH=this.scrollX;this.scrollableV=this.scrollableY;this.scrollableH=this.scrollableX;this.rectForChild=function(){return this._rectForChild};this.clientRect=function(){return this._clientRect};this.scroll=function(g,d){g&&this.scrollLeft(this.scrollLeft()+g);d&&this.scrollTop(this.scrollTop()+
d)};uki.each(["scrollTop","scrollLeft"],function(g,d){this[d]=function(f){if(f==undefined)return this._dom[d];this._dom[d]=f;this.trigger("scroll",{source:this});return this}},this);this.visibleRect=function(){var g=this._clientRect.clone();g.x=this.rect().x+this.scrollLeft();g.y=this.rect().y+this.scrollTop();return g};this.rect=function(g){if(g===undefined)return this._rect;g=t.create(g);var d=this._rect;this._parentRect=g;if(!this._resizeSelf(g))return this;this._updateClientRects();this._needsLayout=
true;this.trigger("resize",{oldRect:d,newRect:this._rect,source:this});return this};this._createDom=function(){e._createDom.call(this);if(H.indexOf("Gecko/")>-1)this._dom.tabIndex="-1"};this._recalcClientRects=function(){a();var g=this.contentsWidth(),d=this.contentsHeight();g=this._scrollableX?g>this._rect.width:false;d=this._scrollableY?d>this._rect.height:false;this._sbX=g||this._scrollX;this._sbY=d||this._scrollY;this._clientRect=new t(this._rect.width+(d?-1:0)*b,this._rect.height+(g?-1:0)*b);
this._rectForChild=new t(this._rect.width+(d&&!c?-1:0)*b,this._rect.height+(g&&!c?-1:0)*b)};this._updateClientRects=function(){var g=this._clientRect;this._recalcClientRects();if(g.width!=this._clientRect.width||g.height!=this._clientRect.height)this._resizeChildViews(g)};this._resizeChildViews=function(g){for(var d=0,f=this.childViews();d<f.length;d++)f[d].parentResized(g,this._clientRect)};this._layoutChildViews=function(){for(var g=0,d=this.childViews();g<d.length;g++)d[g]._needsLayout&&d[g].visible()&&
d[g].layout()};this._layoutDom=function(g){this._updateClientRects();if(this._layoutScrollX!==this._sbX){this._dom.style.overflowX=this._sbX?"scroll":"hidden";this._layoutScrollX=this._sbX}if(this._layoutScrollY!==this._sbY){this._dom.style.overflowY=this._sbY?"scroll":"hidden";this._layoutScrollY=this._sbY}e._layoutDom.call(this,g)};this._contentChanged=this.childResized=function(){this._needsLayout=true;uki.after(uki.proxy(this.layoutIfNeeded,this))}});uki.view.ScrollPane.initScrollWidth=a})();
uki.Collection.addAttrs(["scrollTop","scrollLeft"]);uki.fn.scroll=function(a,b){this.each(function(){this.scroll(a,b)})};uki.view.list={};uki.view.declare("uki.view.List",uki.view.Base,uki.view.Focusable,function(a,b){function c(d,f){for(var h=new Array(f-d),j=0;d<=f;d++,j++)h[j]=d;return h}function e(d,f,h){for(var j=f=uki.binarySearch(f,d);d[f]<=h;)f++;f>j&&d.splice(j,f-j)}this._throttle=42;this._visibleRectExt=300;this._defaultBackground="theme(list)";this._setup=function(){a._setup.call(this);
uki.extend(this,{_rowHeight:30,_render:new uki.view.list.Render,_data:[],_lastClickIndex:-1,_selectedIndexes:[]})};this.defaultBackground=function(){return uki.theme.background("list",this._rowHeight)};uki.addProps(this,["render","packSize","visibleRectExt","throttle","lastClickIndex","multiselect"]);this.rowHeight=uki.newProp("_rowHeight",function(d){this._rowHeight=d;this.minSize(new w(this.minSize().width,this._rowHeight*this._data.length));this._background&&this._background.detach();this._background=
null;this.background()&&this.background().attachTo(this);this._contentChanged()});this.data=function(d){if(d===undefined)return this._data;this.clearSelection();this._data=d;this._packs[0].itemFrom=this._packs[0].itemTo=this._packs[1].itemFrom=this._packs[1].itemTo=0;this.minSize(new w(this.minSize().width,this._rowHeight*this._data.length));this.trigger("selection",{source:this});this._contentChanged();return this};this.relayout=function(){this._packs[0].itemFrom=this._packs[0].itemTo=this._packs[1].itemFrom=
this._packs[1].itemTo=0;this.layout()};this.contentsSize=function(){return new w(this.rect().width,this._rowHeight*this._data.length)};this.addRow=function(d,f){this._data.splice(d,0,f);f=this._itemAt(d);var h=s.createElement("div");h.innerHTML=this._rowTemplate.render({height:this._rowHeight,text:this._render.render(this._data[d],this._rowRect(d),d)});f?f.parentNode.insertBefore(h.firstChild,f):this._dom.childNodes[0].appendChild(h.firstChild);if(d<=this._packs[0].itemTo){this._packs[0].itemTo++;
this._packs[1].itemFrom++;this._packs[1].itemTo++;this._packs[1].dom.style.top=this._packs[1].itemFrom*this._rowHeight+"px"}else this._packs[1].itemTo++;for(d=uki.binarySearch(d,this.selectedIndexes());d<this._selectedIndexes.length;d++)this._selectedIndexes[d]++;this.minSize(new w(this.minSize().width,this._rowHeight*this._data.length));this._contentChanged();return this};this.removeRow=function(d){this._data.splice(d,1);this.data(this._data);return this};this.redrawRow=function(d){var f=this._itemAt(d);
if(f)f.innerHTML=this._render.render(this._data[d],this._rowRect(d),d);return this};this.selectedIndex=function(d){if(d===undefined)return this._selectedIndexes.length?this._selectedIndexes[0]:-1;this.selectedIndexes([d]);this._scrollToPosition(d);return this};this.selectedIndexes=function(d){if(d===undefined)return this._selectedIndexes;this.clearSelection(true);this._selectedIndexes=d;for(d=0;d<this._selectedIndexes.length;d++)this._setSelected(this._selectedIndexes[d],true);this.trigger("selection",
{source:this});return this};this.selectedRow=function(){return this._data[this.selectedIndex()]};this.selectedRows=function(){return uki.map(this.selectedIndexes(),function(d){return this._data[d]},this)};this.clearSelection=function(d){for(var f=0;f<this._selectedIndexes.length;f++)this._setSelected(this._selectedIndexes[f],false);this._selectedIndexes=[];if(!d)this._lastClickIndex=-1};this.isSelected=function(d){return this._selectedIndexes[uki.binarySearch(d,this._selectedIndexes)]==d};this.layout=
function(){this._layoutDom(this._rect);this._needsLayout=false;this.trigger("layout",{rect:this._rect,source:this,visibleRect:this._visibleRect});this._firstLayout=false};this._rowRect=function(d){return new t(0,d*this._rowHeight,this.rect().width,this._rowHeight)};this._toggleSelection=function(d){var f=[].concat(this._selectedIndexes),h=uki.binarySearch(d,f);f[h]==d?f.splice(h,1):f.splice(h,0,d);this.selectedIndexes(f)};var g=false;this._scrollableParentScroll=function(){if(!g)if(this._throttle){if(!this._throttleStarted){this._throttleStarted=
true;setTimeout(uki.proxy(function(){this._throttleStarted=false;this.layout()},this),this._throttle)}}else this.layout()};this._contentChanged=function(){this._needsLayout=true;uki.after(uki.proxy(this._relayoutParent,this))};this._relayoutParent=function(){this.parent().childResized(this);if(this._scrollableParent){for(var d=this;d&&d!=this._scrollableParent;){d._needsLayout=true;d=d.parent()}d.layout()}};this.keyPressEvent=function(){return A.opera||/mozilla/i.test(H)&&!/(compatible|webkit)/i.test(H)?
"keypress":"keydown"};this._bindSelectionEvents=function(){this.bind("mousedown",this._mousedown);this.bind("mouseup",this._mouseup);this.bind(this.keyPressEvent(),this._keypress)};this._mouseup=function(d){if(this._multiselect){var f=uki.dom.offset(this._dom);d=(d.pageY-f.y)/this._rowHeight<<0;this._selectionInProcess&&this._lastClickIndex==d&&this.isSelected(d)&&this.selectedIndexes([d]);this._selectionInProcess=false}};this._mousedown=function(d){var f=uki.dom.offset(this._dom);f=(d.pageY-f.y)/
this._rowHeight<<0;var h=this._selectedIndexes;if(this._multiselect){this._selectionInProcess=false;if(d.shiftKey&&h.length>0)if(this.isSelected(f)){h=[].concat(h);e(h,Math.min(f+1,this._lastClickIndex),Math.max(f-1,this._lastClickIndex));this.selectedIndexes(h)}else this.selectedIndexes(c(Math.min(f,h[0]),Math.max(f,h[h.length-1])));else if(d.metaKey)this._toggleSelection(f);else if(this.isSelected(f))this._selectionInProcess=true;else this.selectedIndexes([f])}else this.selectedIndexes([f]);this._lastClickIndex=
f};this._keypress=function(d){var f=-1;if(d.which==38||d.keyCode==38){f=Math.max(0,this._lastClickIndex-1);d.preventDefault()}else if(d.which==40||d.keyCode==40){f=Math.min(this._data.length-1,this._lastClickIndex+1);d.preventDefault()}else if(this._multiselect&&(d.which==97||d.which==65)&&d.metaKey){d.preventDefault();this.selectedIndexes(c(0,this._data.length-1))}if(f>-1&&f!=this._lastClickIndex){if(d.shiftKey&&this._multiselect){this.isSelected(f)?this._toggleSelection(this._lastClickIndex):this._toggleSelection(f);
this._scrollToPosition(f)}else this.selectedIndex(f);this._lastClickIndex=f}};this._createDom=function(){this._dom=uki.createElement("div",this.defaultCss+"overflow:hidden");this._initClassName();var d=uki.createElement("div","position:absolute;left:0;top:0px;width:100%;overflow:hidden");this._packs=[{dom:d,itemTo:0,itemFrom:0},{dom:d.cloneNode(false),itemTo:0,itemFrom:0}];this._dom.appendChild(this._packs[0].dom);this._dom.appendChild(this._packs[1].dom);this._initFocusable();this._bindSelectionEvents()};
this._setSelected=function(d,f){var h=this._itemAt(d);h&&this._render.setSelected(h,this._data[d],f,this.hasFocus())};this._scrollToPosition=function(d){if(this._visibleRect){var f;f=(d+1)*this._rowHeight;d=d*this._rowHeight;g=true;if(f>=this._visibleRect.maxY())this._scrollableParent.scroll(0,f-this._visibleRect.maxY());else d<this._visibleRect.y&&this._scrollableParent.scroll(0,d-this._visibleRect.y);g=false;this.layout()}};this._itemAt=function(d){if(d<this._packs[1].itemTo&&d>=this._packs[1].itemFrom)return this._packs[1].dom.childNodes[d-
this._packs[1].itemFrom];else if(d<this._packs[0].itemTo&&d>=this._packs[0].itemFrom)return this._packs[0].dom.childNodes[d-this._packs[0].itemFrom];return null};this._rowTemplate=new uki.theme.Template('<div style="width:100%;height:${height}px;overflow:hidden;">${text}</div>');this._renderPack=function(d,f,h){var j=[];for(i=f;i<h;i++)j[j.length]=this._rowTemplate.render({height:this._rowHeight,text:this._render.render(this._data[i],this._rowRect(i),i)});d.dom.innerHTML=j.join("");d.itemFrom=f;d.itemTo=
h;d.dom.style.top=f*this._rowHeight+"px";this._restorePackSelection(d,f,h)};this._restorePackSelection=function(d){var f=this._selectedIndexes;if(f[0]<=d.itemFrom&&f[f.length-1]>=d.itemFrom||f[0]<=d.itemTo&&f[f.length-1]>=d.itemTo||f[0]>=d.itemFrom&&f[f.length-1]<=d.itemTo){var h=uki.binarySearch(d.itemFrom,f);for(h=Math.max(h,0);f[h]!==null&&f[h]<d.itemTo;){var j=f[h]-d.itemFrom;this._render.setSelected(d.dom.childNodes[j],this._data[j],true,this.hasFocus());h++}}};this._swapPacks=function(){var d=
this._packs[0];this._packs[0]=this._packs[1];this._packs[1]=d};this._layoutDom=function(d){if(!this._scrollableParent){this._scrollableParent=uki.view.scrollableParent(this);this._scrollableParent.bind("scroll",uki.proxy(this._scrollableParentScroll,this))}var f=this._rowHeight*this._data.length;this._visibleRect=uki.view.visibleRect(this,this._scrollableParent);if(this._focusTarget)this._focusTarget.style.top=this._visibleRect.y+"px";var h=P((this._visibleRect.height+this._visibleRectExt*2)/this._rowHeight),
j=x(0,this._visibleRect.y-this._visibleRectExt),l=F(f,this._visibleRect.maxY()+this._visibleRectExt),p=this._packs[0].itemFrom*this._rowHeight,m=this._packs[1].itemTo*this._rowHeight;f=true;a._layoutDom.call(this,d);if(l<=p||j>=m||l>m&&this._packs[1].itemFrom*this._rowHeight>this._visibleRect.y&&this._packs[1].itemTo>this._packs[1].itemFrom||j<p&&this._packs[0].itemTo*this._rowHeight<this._visibleRect.maxY()){d=j-this._visibleRectExt/2;d=x(0,Math.round(d/this._rowHeight));h=F(this._data.length,d+
h);this._renderPack(this._packs[0],d,h);this._renderPack(this._packs[1],h,h)}else if(l>m&&this._packs[1].itemTo>this._packs[1].itemFrom){d=this._packs[1].itemTo;h=F(this._data.length,this._packs[1].itemTo+h);this._renderPack(this._packs[0],d,h);this._swapPacks()}else if(l>m){d=this._packs[0].itemTo;h=F(this._data.length,this._packs[1].itemTo+h);this._renderPack(this._packs[1],d,h)}else if(j<p){d=x(this._packs[0].itemFrom-h,0);h=this._packs[0].itemFrom;this._renderPack(this._packs[1],d,h);this._swapPacks()}else f=
false;if(f&&/MSIE 6|7/.test(H))this.dom().className+=""};this._bindToDom=function(d){return b._bindToDom.call(this,d)||a._bindToDom.call(this,d)};this._focus=function(d){b._focus.call(this,d);this._selectedIndexes.length==0&&this._data.length>0?this.selectedIndexes([0]):this.selectedIndexes(this.selectedIndexes())};this._blur=function(d){b._blur.call(this,d);this.selectedIndexes(this.selectedIndexes())}});uki.Collection.addAttrs(["data","selectedIndex","selectedIndexes","selectedRow","selectedRows",
"lastClickIndex"]);uki.view.declare("uki.view.ScrollableList",uki.view.ScrollPane,function(a){this._createDom=function(){a._createDom.call(this);this._list=uki({view:"List",rect:this.rect().clone().normalize(),anchors:"left top right bottom"})[0];this.appendChild(this._list)};uki.each("data rowHeight render packSize visibleRectExt throttle focusable selectedIndex selectedIndexes selectedRow selectedRows multiselect draggable textSelectable".split(" "),function(b,c){uki.delegateProp(this,c,"_list")},
this)});uki.view.list.Render=uki.newClass({init:function(){},render:function(a,b){return'<div style="line-height: '+b.height+'px; font-size: 12px; padding: 0 4px;">'+a+"</div>"},setSelected:function(a,b,c,e){a.style.backgroundColor=c&&e?"#3875D7":c?"#CCC":"";a.style.color=c&&e?"#FFF":"#000"}});uki.view.table={};uki.view.declare("uki.view.Table",uki.view.Container,function(a){var b="rowHeight data packSize visibleRectExt render selectedIndex selectedIndexes selectedRows selectedRow focus blur hasFocus lastClickIndex focusable textSelectable multiselect".split(" ");
this._headerHeight=this._rowHeight=17;this._listImpl="uki.view.List";uki.each(b,function(c,e){uki.delegateProp(this,e,"_list")},this);this._setup=function(){a._setup.call(this);this._columns=[];this.defaultCss+="overflow:hidden;"};this._style=function(c,e){this._header.style(c,e);return a._style.call(this,c,e)};this.list=function(){return this._list};this.header=function(){return this._header};this.columns=uki.newProp("_columns",function(c){for(var e=0;e<this._columns.length;e++)this._columns[e].unbind();
this._columns=uki.build(c);for(e=this._totalWidth=0;e<this._columns.length;e++){this._columns[e].position(e);this._columns[e].bind("beforeResize",uki.proxy(function(){this._updateTotalWidth();this._scrollPane.layout()},this))}this._updateTotalWidth();this._header.columns(this._columns)});this.redrawCell=function(c,e){var g=this._list._itemAt(c);if(g){var d=s.createElement("div");d.innerHTML=this.columns()[e].render(this.data()[c],new t(0,c*this.rowHeight(),this.list().width(),this.rowHeight()),c);
g.replaceChild(d.firstChild,g.childNodes[e])}return this};uki.each(["redrawRow","addRow","removeRow"],function(c,e){this[e]=function(){this.list()[e].apply(this.list(),arguments);return this}},this);this.redrawColumn=function(c){for(var e=this._list._packs[1].itemTo,g=this._list._packs[0].itemFrom;g<e;g++)this.redrawCell(g,c);return this};this._updateTotalWidth=function(){for(var c=this._totalWidth=0;c<this._columns.length;c++){this._columns[c].position(c);this._totalWidth+=this._columns[c].width()}this._list.minSize(new w(this._totalWidth,
this._list.minSize().height));this._header.minSize(new w(this._totalWidth,0))};this._createDom=function(){a._createDom.call(this);this._initClassName();var c=new t(0,this._headerHeight,this.rect().width,this.rect().height-this._headerHeight),e=c.clone().normalize(),g=new t(0,0,this.rect().width,this._headerHeight),d={view:this._listImpl,rect:e,anchors:"left top bottom right",render:new uki.view.table.Render(this),className:"table-list"};c={view:"ScrollPane",rect:c,anchors:"left top right bottom",
scrollableH:true,childViews:[d],className:"table-scroll-pane"};g={view:"table.Header",rect:g,anchors:"top left right",className:"table-header"};uki.each(b,function(f,h){if(this["_"+h]!==undefined)d[h]=this["_"+h]},this);this._scrollPane=uki.build(c)[0];this._list=this._scrollPane.childViews()[0];this._header=uki.build(g)[0];this._scrollPane.resizeToContents();this.appendChild(this._header);this.appendChild(this._scrollPane);this._scrollPane.bind("scroll",uki.proxy(function(){this._header.dom().style.left=
-this._scrollPane.scrollLeft()+"px"},this))}});uki.Collection.addAttrs(["columns"]);uki.view.table.Render=uki.newClass(uki.view.list.Render,new (function(){this.init=function(a){this._table=a};this.render=function(a,b,c){var e=this._table.columns();return uki.map(e,function(g,d){return e[d].render(a,b,c)}).join("")}}));uki.view.table.Column=uki.newClass(uki.view.Observable,new (function(){this._width=100;this._maxWidth=this._minWidth=this._position=this._offset=0;this._css="float:left;white-space:nowrap;text-overflow:ellipsis;";
this._inset=new z(3,5);this._templatePrefix="table-";this.init=function(){};uki.addProps(this,["position","css","formatter","label","resizable","maxWidth","minWidth","maxWidth","key","sort"]);this.template=function(){return this._template||(this._template=uki.theme.template(this._templatePrefix+"cell"))};this.headerTemplate=function(){var a="";if(this.sort()=="ASC")a="-asc";if(this.sort()=="DESC")a="-desc";return uki.theme.template(this._templatePrefix+"header-cell"+a)};this.sortData=function(a){var b=
this;return a.sort(function(c,e){return b._key?b.compare(uki.attr(c,b._key),uki.attr(e,b._key)):b.compare(c[b._position],e[b._position])})};this.compare=function(a,b){return(a>=b?1:a==b?0:-1)*(this._sort=="DESC"?-1:1)};this.width=uki.newProp("_width",function(a){var b={oldWidth:this._width,source:this};this._width=this._normailizeWidth(a);b.newWidth=this._width;this.trigger("beforeResize",b);if(this._stylesheet&&b.newWidth!=b.oldWidth)(this._stylesheet.styleSheet?this._stylesheet.styleSheet.rules:
this._stylesheet.sheet.cssRules)[0].style.width=this._clientWidth()+"px";this.trigger("resize",b)});this._bindToDom=uki.F;this._normailizeWidth=function(a){if(this._maxWidth)a=F(this._maxWidth,a);if(this._minWidth)a=x(this._minWidth,a);return a};this.inset=uki.newProp("_inset",function(a){this._inset=z.create(a)});this.render=function(a,b,c){this._prerenderedTemplate||this._prerenderTemplate(b);b=this._key?uki.attr(a,this._key):a[this._position];this._prerenderedTemplate[1]=this._formatter?this._formatter(b,
a,c):b;return this._prerenderedTemplate.join("")};this.appendResizer=function(a,b){b=uki.theme.dom("resizer",b);a.appendChild(b);return b};this.renderHeader=function(a){this._className||this._initStylesheet();return this.headerTemplate().render({data:'<div style="overflow:hidden;text-overflow:ellipsis;*width:100%;height:100%;padding-top:'+this._inset.top+'px">'+this.label()+"</div>",style:"*overflow-y:hidden;"+this._cellStyle(true,a),className:this._className})};this._prerenderTemplate=function(a){this._className||
this._initStylesheet();this._prerenderedTemplate=this.template().render({data:"\u0001\u0001",style:"overflow:hidden;"+this._cellStyle(false,a.height),className:this._className}).split("\u0001")};this._cellPadding=function(a){var b=this._inset;return["padding:",a?"0":b.top,"px ",b.right,"px ",a?"0":b.bottom,"px ",b.left,"px;"].join("")};this._cellHeight=function(a,b){return"height:"+(b-(uki.dom.offset.boxModel&&!a?this._inset.height():0))+"px;"};this._cellStyle=function(a,b){return this._css+this._cellPadding(a)+
";"+this._cellHeight(a,b)};this._clientWidth=function(){return this._width-(uki.dom.offset.boxModel?this._inset.width()+1:0)};this._initStylesheet=function(){if(!this._className){uki.dom.offset.initializeBoxModel();this._className="uki-table-column-"+uki.guid++;var a="."+this._className+" {width:"+this._clientWidth()+"px;}";this._stylesheet=uki.dom.createStylesheet(a)}}}));uki.view.table.NumberColumn=uki.newClass(uki.view.table.Column,new function(){this._css=uki.view.table.Column.prototype._css+
"text-align:right;";this.compare=function(a,b){a*=1;b*=1;return(a>=b?1:a==b?0:-1)*(this._sort=="DESC"?-1:1)}});uki.view.table.CustomColumn=uki.view.table.Column;uki.view.declare("uki.view.table.Header",uki.view.Label,function(a){this._defaultBackground="theme(table-header)";this._setup=function(){a._setup.call(this);this._multiline=true;this._resizers=[]};this.columns=uki.newProp("_columns",function(b){this._columns=b;this.html(this._createColumns());this._createResizers()});this._createDom=function(){a._createDom.call(this);
this.bind("click",this._click)};this._click=function(b){if(!this._dragging){b=b.target;if(!(b==this.dom()||b==this._label)){for(;b.parentNode!=this._label;)b=b.parentNode;b=uki.inArray(b,this._label.childNodes);b>-1&&this.trigger("columnClick",{source:this,columnIndex:b,column:this._columns[b]})}}};this.redrawColumn=function(b){this._resizers[b]&&uki.dom.unbind(this._resizers[b]);var c=s.createElement("div");c.innerHTML=this._columns[b].renderHeader(this.rect().height);this._label.replaceChild(c.firstChild,
this._label.childNodes[b]);this._columns[b].resizable()&&this._createResizers(b)};this._createColumns=function(){for(var b=[],c=0,e=this._columns,g=e.length;c<g;c++)b[b.length]=e[c].renderHeader(this.rect().height);return b.join("")};this._createResizer=function(b){var c=this._columns[b];if(c.resizable()){c=c.appendResizer(this._label.childNodes[b],this.rect().height);this._bindResizerDrag(c,b);this._resizers[b]=c}};this._createResizers=function(){uki.each(this._columns,this._createResizer,this)};
this._bindResizerDrag=function(b,c){var e=this;uki.dom.bind(b,"draggesture",function(g){e._dragging=true;var d=uki.dom.offset(e.dom());g=g.pageX-d.x;d=0;var f,h=e._columns[c];for(f=0;f<c;f++)d+=e._columns[f].width();h.width(g-d)});uki.dom.bind(b,"draggestureend",function(){setTimeout(function(){e._dragging=false},1)})}});uki.view.declare("uki.view.HSplitPane",uki.view.Container,function(a){this._throttle=0;this._setup=function(){a._setup.call(this);this._originalRect=this._rect;uki.extend(this,{_vertical:false,
_handlePosition:200,_autogrowLeft:false,_autogrowRight:true,_handleWidth:7,_leftMin:100,_rightMin:100,_panes:[]})};uki.addProps(this,["leftMin","rightMin","autogrowLeft","autogrowRight","throttle"]);this.topMin=this.leftMin;this.bottomMin=this.rightMin;this.handlePosition=uki.newProp("_handlePosition",function(b){this._handlePosition=this._normalizePosition(b);this.trigger("handleMove",{source:this,handlePosition:this._handlePosition,dragValue:b});this._resizeChildViews()});this.handleWidth=uki.newProp("_handleWidth",
function(b){if(this._handleWidth!=b){this._handleWidth=b;b=this._createHandle();this._dom.insertBefore(b,this._handle);this._removeHandle();this._handle=b;this._resizeChildViews()}});this._normalizePosition=function(b){var c=this._vertical?"height":"width";return x(this._leftMin,F(this._rect[c]-this._rightMin-this._handleWidth,x(0,F(this._rect?this._rect[c]:1E3,b*1))))};this._removeHandle=function(){this._dom.removeChild(this._handle)};this._createHandle=function(){var b;if(this._vertical){b=uki.theme.dom("splitPane-vertical",
{handleWidth:this._handleWidth});b.style.top=this._handlePosition+"px"}else{b=uki.theme.dom("splitPane-horizontal",{handleWidth:this._handleWidth});b.style.left=this._handlePosition+"px"}uki.each(["draggesturestart","draggesture","draggestureend"],function(c,e){uki.dom.bind(b,e,uki.proxy(this["_"+e],this))},this);return b};this._createDom=function(){this._dom=uki.createElement("div",this.defaultCss);this._initClassName();for(var b=0,c;b<2;b++){c={view:"Container"};c.anchors=b==1?"left top bottom right":
this._vertical?"left top right":"left top bottom";c.rect=b==0?this._leftRect():this._rightRect();this._panes[b]=uki.build(c)[0];this.appendChild(this._panes[b])}this._dom.appendChild(this._handle=this._createHandle())};this._normalizeRect=function(b){b=a._normalizeRect.call(this,b);b=b.clone();if(this._vertical)b.height=x(b.height,this._leftMin+this._rightMin);else b.width=x(b.width,this._leftMin+this._rightMin);return b};this._resizeSelf=function(b){var c=this._rect,e=this._vertical?"height":"width";
if(!a._resizeSelf.call(this,b))return false;if(this._autogrowLeft){c=b[e]-c[e];this._handlePosition=this._normalizePosition(this._handlePosition+(this._autogrowRight?c/2:c))}if(this._vertical){if(b.height-this._handlePosition<this._rightMin)this._handlePosition=x(this._leftMin,b.height-this._rightMin)}else if(b.width-this._handlePosition<this._rightMin)this._handlePosition=x(this._leftMin,b.width-this._rightMin);return true};this._draggesturestart=function(b){var c=uki.dom.offset(this.dom());this._posWithinHandle=
b[this._vertical?"pageY":"pageX"]-c[this._vertical?"y":"x"]-this._handlePosition;return true};this._draggesture=function(b){this._updatePositionOnDrag(b)};this._draggestureend=function(b){this._updatePositionOnDrag(b)};this._updatePositionOnDrag=function(b){var c=uki.dom.offset(this.dom());this.handlePosition(b[this._vertical?"pageY":"pageX"]-c[this._vertical?"y":"x"]-this._posWithinHandle);if(this._throttle){this._throttleHandler=this._throttleHandler||uki.proxy(function(){this.layout();this._trottling=
false},this);if(!this._trottling){this._trottling=true;setTimeout(this._throttleHandler,this._throttle)}}else this.layout()};this.topPane=this.leftPane=function(b){return this._paneAt(0,b)};this.bottomPane=this.rightPane=function(b){return this._paneAt(1,b)};this.topChildViews=this.leftChildViews=function(b){return this._childViewsAt(0,b)};this.bottomChildViews=this.rightChildViews=function(b){return this._childViewsAt(1,b)};this._childViewsAt=function(b,c){if(c===undefined)return this._panes[b].childViews();
this._panes[b].childViews(c);return this};this._paneAt=function(b,c){if(c===undefined)return this._panes[b];uki.build.copyAttrs(this._panes[b],c);return this};this._leftRect=function(){return this._vertical?new t(this._rect.width,this._handlePosition):new t(this._handlePosition,this._rect.height)};this._rightRect=function(){return this._vertical?new t(0,this._handlePosition+this._handleWidth,this._rect.width,this._rect.height-this._handleWidth-this._handlePosition):new t(this._handlePosition+this._handleWidth,
0,this._rect.width-this._handleWidth-this._handlePosition,this._rect.height)};this._resizeChildViews=function(){this._panes[0].rect(this._leftRect());this._panes[1].rect(this._rightRect())};this._layoutDom=function(b){a._layoutDom.call(this,b);this._handle.style[this._vertical?"top":"left"]=this._handlePosition+"px"};this._bindToDom=function(b){if(b=="handleMove")return true;return a._bindToDom.call(this,b)}});uki.view.declare("uki.view.VSplitPane",uki.view.HSplitPane,function(a){this._setup=function(){a._setup.call(this);
this._vertical=true}});uki.Collection.addAttrs(["handlePosition"]);uki.view.declare("uki.view.VFlow",uki.view.Container,function(a){this.contentsSize=function(){var b=uki.reduce(0,this._childViews,function(c,e){return c+(e.visible()?e.rect().height:0)});return new w(this.contentsWidth(),b)};this.hidePartlyVisible=uki.newProp("_hidePartlyVisible");this.resizeToContents=function(b){this._resizeChildViews(this._rect);return a.resizeToContents.call(this,b)};this.layout=function(){return a.layout.call(this)};
this._resizeChildViews=function(b){for(var c=0,e,g=0,d=this.childViews();g<d.length;g++){e=d[g];e.parentResized(b,this._rect);e.rect().y=c;this._hidePartlyVisible&&e.visible(e._rect.height+c<=this._rect.height);if(e.visible())c+=e._rect.height}};this._contentChanged=this.childResized=function(){this._needsLayout=true;uki.after(uki.proxy(this._afterChildResized,this))};this._afterChildResized=function(){this.resizeToContents("height");this.parent().childResized(this);this.layoutIfNeeded()}});uki.view.declare("uki.view.HFlow",
uki.view.VFlow,function(){this.contentsSize=function(){var a=uki.reduce(0,this._childViews,function(b,c){return b+(c.visible()?c.rect().width:0)});return new w(a,this.contentsHeight())};this._resizeChildViews=function(a){for(var b=0,c,e=0,g=this.childViews();e<g.length;e++){c=g[e];c.parentResized(a,this._rect);c.rect().x=b;this._hidePartlyVisible&&c.visible(c._rect.width+b<=this._rect.width);if(c.visible())b+=c._rect.width}};this._afterChildResized=function(){this.resizeToContents("width");this.parent().childResized(this);
this.layoutIfNeeded()}});(function(){function a(b){return uki_mail_app.theme.imagePath+b}uki_mail_app.theme=uki.extend({},uki.theme.Base,{imagePath:"/src/uki-theme/airport/i/",backgrounds:{"toolbar-button-full-normal":function(){return new uki.background.Sliced9({v:[a("button-full/normal-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAACdElEQVQ4T52UWU/bQBhF5/8/tC9UKhUPrdRKFFHaLAQIjp0F7Gxk32wTmv6S2znjBFIWEfpwxTDfPQd7sG3q9bqei+8H+n58ov2DL3q/t+/Cmj1mL3GmVqtpO77v69vhkd59+KTjXEGdm4GWq5ULa/aY0aH7mDfValWblC/K2vt4oOOfeSdIl7+1SG4VJ0sX1uwxo0MXZtthgiAQKZcv9fnroa7CluI0g/kZp3eKb9dhvTWjCwO78Tghl57Pl9S4bmo6j/+VPRE+SOnCwOJwQhal0rn8oKHJbKF5nGa3uC18kuwI6MLAOod1Gc+rqFA8V38w1myRPJxZ+krWZwoDiwOXycwNjadz9xcz4W6hCwOLA5cVXihsdu9vd5Fk0t2S3t82DlyGS+32hm5ztkhdKO2STR8WBy6Ty5+pZ8+Ay57MYvufS94UGFgcuMyPk4Lq1y1F7a6a7Z6iztviGMviwGV+2Weobp8lBq3u4L8CiwOXOTsrK6iHbtDpjdTpj9TtD3cKXRhYHLiMV/FV9qpucDOYZBnumHUfFgcuU6lUVCyV7eZQ/dFMg/Fcg8mOsV0YWBy47HNYUrXWUFALNbSl8TTWaJZo/Epcx3ZhYHHgMqenp87s2Utu2cOdzFNNY/tKvRI6dGFgceByQhKFkS69wJ3HIrnTPLXfwhfiZrZDFwZ24zHFYlGEX1qttv1y1BW1biywVLJcKbn7o3Qd1uwxo0MXBnbjMYVCQZuwEUWRfS/bCqrX9nb67pzi25ULa/aY0aELs+0w+Xxej8N3rdu1b46FGldNe+BXLqzZY5Z9lJ+yJpfL6bkw9DxPYRg6AWHNHrOXuL9Q4QqDB1Un4AAAAABJRU5ErkJggg=="],
m:[a("button-full/normal-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAXCAYAAADtNKTnAAAAiUlEQVQYGa3BMU4DURBEwdczHREgDu7ECRdcgYitdchv+DdgNVTpdn8Pv1bCVhJX6ePzKxAksSUBxN8EED6fT6YsianiHzhhzBCmTMKUw5yTMOW1wpQf58mUS8WUu8WUVc2Uu5spdzVT7i6mXNVMubuYcqmY8nEcbOt7sVUXV/nt9YUtCZskrvoBSb0pdiud7ZQAAAAASUVORK5CYII="]},"0 10 0 10")},"toolbar-button-full-hover":function(){return new uki.background.Sliced9({v:[a("button-full/hover-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAACZElEQVQ4T52U227aQBRF5/+l9imVEqlV1aqtgBBc4wvYHl+xPeAY0iRVfmf37CGoFEFFeNhimLPXshMPVlVV4ViyLMdwPMH1py94f3VjwzX3ODvFqbIssZ8sy/B9MMK7DzcYOh7qtsPzy4sN19zjjB12D3lVFAV2iaMYV9cfMbhz8fT8gv7hEcv7NcxruOYeZ+ywS2bfofI8BxPHCT5/GyDJF1j1DzBd/yrbyOc22/XazthhlwzZnccKeeuTnwHmukBtOrSrXqDtHR0LZ+ywS4YsHVbIhR/MEMxTLOoVmmVvy1vpVvxv/s7ZJUOWDrqU1ikcN0RWNqiaTq66LZ4TdsmQpYMuRbM/S1AsjB0u2vs3hQxZOuhSrjfHPCmQVy1Kuf2qeVvIkKWDLjVxAsSpnL+ylYFBLlcrzgy7ZMjSQZcaTzxE8qR0VkPnDXTRIj0z7FpGWDroUl9/jDAYuxjeTTGSjUtClg661GDk4FY2b+UsjS8MWTroUs40tBuO/EMdP7oswlqHuFQUa/niw5XH7s3Si0KWDrqUTlNrD6IMs6TETJfyczov7JIhSwddKgxDpHmJaZggzhoku6d3RtglQ5YOulQQBEjFHEQponSBggdVTn9Z/z/ssEuGrHWIywoZ0xqEcuu6NKiXa8kG9epEOJMOu2TI7jzK930w/LJadXLiK6RSbLtfMP0TlgfhHmfssEuG7M6jPM/DLtwwxqCRV30sp7+QP810j+g2v2245h5n7LBLZt+hptMpDsP3Wt/Lu1CuXi6W8jOrbbjmHmfsHGOV67o4Fg611mjb1goYrrnH2SnuDyOpxMgv4mmjAAAAAElFTkSuQmCC"],
m:[a("button-full/hover-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAXCAYAAADtNKTnAAAAmUlEQVQ4y82UsQrDMAxEJUteOhX621my9NdK6Tek4HSOr0PqEmgSCrohNxlxPE7CnHb9FfJRxfxMqrKlNY/e7o8vpM2BTcaqx8v4kqiSEOQiiEMAQpJacRAIUBlJCJBpIqwzPIc4JKX4f3Nzj0PcCJCcGUk8E5IwbmL5KIc1szhkLGXuzEVx6k5RoxWQqjSXX86nH8M/kKXnDbaGN3Y1p/buAAAAAElFTkSuQmCC"]},"0 10 0 10")},"toolbar-button-full-down":function(){return new uki.background.Sliced9({v:[a("button-full/pressed-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAACd0lEQVQ4T52Ua1PaUBRF779vHbVT1IJj0IIMjwTI8yaSB+GhgljqtOMP2j37tjjWQSv9sGau5+y9TJxr1Hw+xzbKcgJ7METtvIGDk1MDz5xx91pPzWYzPKcsS7R7Dg6PTzEING7u7vHw49HAM2fcMcPsy76aTqfYkKUZjk/rcNwQDz8fUUxvEKdjofzD2My4Y4ZZdp471GQyAUmzDOetDkaFnMsZ9Oi3KMn+hjPumGGWHXY3HiMcj8dodfvoDQMEcYboqngSboM7Zphlh106jJB/h4EXouP48KKRBPMn4Vswwyw77NJBl8rzAo1OH31fw9fydEn+JH2b3GTZYZcOupTrh2j1hhj4iSxT8xok/AebHDvs0kGX6vZdtB1PhjHccGRewYvSdzIyHXbpoEs12w7atg/H0/Losfltu8AOu3TQpaxGRx7XFXsIexj9F+zSQZfal1v/4XMVHytV7FVq2DvaEemwSwdd6sRqYP/kDAdVC4eG+o5YpksHXarRdfDp7CsqVhOVehNH9cudYIddOuhSgU5wfNHCF3n/arOLGrnsvQ/JssMuHXSZi33W6sHqDGDJXarb7k6wwy4d5mInSYI4K3DRddEcarQ8Er8TbTrs0kGXiuMYhfxj24FcTrlXPZ3DjoWkeBvJMMsOu3TQZYTkdrGEHaboS3iYz+GS4hVkxwyz7LC78SitNQh/WK5W8OXz5KZTRJMFotnddmTHDLPssLvxqCiKsIGDxXKJyc0SXjZDKEU9X+Hqdm3gmTPumGGWnecOFYYhXsLv2rf1d1wvV8iu5UnLawPPnHHHzLauCgL5Sm+By6IosFgssF6vDTxzxt1rvV9j938ICnFl4wAAAABJRU5ErkJggg=="],
m:[a("button-full/pressed-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAXCAYAAADtNKTnAAAAp0lEQVQ4y83UwQoCIRAG4P8XdS6deoDet2OHniuIHqBDUfQCUaDToVmWZQl2VyEHVBD8RkWH291eAcA5BwBQ1cE4JXg4nhRqiwjw243jl0nA3+4Py2xzxOzwXVpSe3ouMj671kDwLyTnciTlCjtJKTWCnK+XcsT7UI6EGFtBpAIiUcqRKNLKnYQaiL0TtTrCJUXp/XraYivQS5DNegUA6P4QyUGbUvk/4aM9dYCyVGwAAAAASUVORK5CYII="]},"0 10 0 10")},"toolbar-button-left-normal":function(){return new uki.background.Sliced9({v:[a("button-left/normal-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAXCAYAAADduLXGAAABwElEQVQ4y3XTyY4TMRDG8X9VO8t0OlFWFgkhEGeG5SG4cOCd8xhckDjMwASSzKST6bjtLg4dyEpJvlg/l0r6ym46nRoXKoTIbL5guVyxKQrKEHBmxzbGyO3dL37+XvLyxXM+fnjHcNTncb05xn7r+frtO8+ePuHL509U0YgxEnwkP8RlGbiZzXl//ZbJZEzpAyKCiILUzRyAmVEUJW9ev2Iw6GNmiAj/1K5cDT1Zt8tg0EdVkROEgRm4qjJixR6KHKvDzt6XdNIOruEOoJ06zAwHQju9OoJ2OsZfHCuj2WzsLuojYpdxVRmqiplRVRUigl3I1MxwIQTy9YZGI0FQTLhY+WaNS1wCGIIiqvzHoiK4VsMRY4W0FNU6LeF8DlXFNZqO0ns0y2rMWXB7LBjee8D2oVzCSYLbbrdknS75as1wNEBFMTkLnES13o0YPGYJxeaRTreL6jlWTeqtK4qC4WDIw8M96hzdLDvrniS63+f5Ys54PGF1vySUZb1YSQK7R6IH2MyYze4YjUaYRW5vfpCmKWknpdlq1WMcfqv6wYwsy+j1eoRQslwsiDEQYjz/sACr1Yo8z+vOacpVu41zjj8Dq+vM/h7p/wAAAABJRU5ErkJggg=="],
m:[a("button-left/normal-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAAAaElEQVRIx93Uuw2AMAwAUf8qCsRsSBTsREPDgt4AOW3MFlfgBZ5OiR3X/bQAE+exCwLVGAykqgwk0ES3UEUNQVBSNPdGUNGcEPRWMZCpMZA7dBnUnCqiIK4I+gz2vyJqjzKTgbZ1QaAPxYQYzEAnGikAAAAASUVORK5CYII="]},"0 1 0 10")},"toolbar-button-left-hover":function(){return new uki.background.Sliced9({v:[a("button-left/hover-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAXCAYAAADduLXGAAABx0lEQVQ4jXWTzU7bQBRGz525/olxgSYgUdQ9QuortLu+OI/RTaVKVSvSxgQb23HGc7sIkEDNt/JIx2fufJrRm5sbYyIhjCxXFdW6pu16hmFAzV6y4zjy6/YPv/9WfLy85NP1NSenJfV9/RIeNgPfvv/g7Pycr18+M4QtIQSah4679XoPb7eBn8sVV1dXHL8reehaRARDEMAMFMDMaNqBDxcXzPKMcRwREQCEncxgZ267DVmec5TPEHE8CXjEn6IxGttgnJQ5JsLheXff9rzQfjOQpAnO7Y02UWY00DEKWZo8QrY3vYpFQ8cw4txu+xgjyOGUB+YY0WgRMyOOEURAZBIeY0TbviPEiIg81zWVu6pCU03wzoFzk8anOOfQLM8I0VDvd2O8Ee8VLfKU+7bHqcfh3oRVPeq9AII6j3P+zTa8V3TYbJiflDx0A0mSIW66DU308dbFgPcOs0iqKSaCswkzQN/3zN/PqeqOoEqepbyeR9Xv7/OqWnF2ds666dkAs9kMOajTe93DZsZyectisSCap2ka0jQlSzO8erz3L5/V7oclZVkyPz5mO0aGTUdoAyFs/3+wAHVd0zQNRVFQFAVHs5zFack/i6zxYmg7DrMAAAAASUVORK5CYII="],
m:[a("button-left/hover-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAAAkElEQVRIx92WPQqAMAyFkyZdnASv7eLi1UQ8g0J1ts/B3wOUN/hNhUI/XtKWaNv1kIuMcxlUpSQQER3G6RHd5wNSHE/rJgyCkPCzggQRQEqUM34mAjIrEUm076TSzcvMEYXAebNu7hyRG0kUIyuRR1IiVo8s/u0ymBlHtKb0DBD3sKCFhpPv5+ZNXb0bhUVfDj/5LnR1f9QdAAAAAElFTkSuQmCC"]},"0 1 0 10")},"toolbar-button-left-down":function(){return new uki.background.Sliced9({v:[a("button-left/pressed-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAXCAYAAADduLXGAAAB2ElEQVQ4y3WTy24TQRBFT9V099hjBxELkgUhLIAV4guQkPj1/AUrJBQR8Csej4Mzj+5i4TixHVNS7U7fut11W66urowj1XWRyXzOvKy4W99jMeHM9tkYIzfjKb8nc95dXvD501uKXp/pbLoPN3XD9x8/OT8749vXL8xvS8qyoixXlOXiCW7aluvxlI8f3iOq/LoZIyKIyEbJDAeQUmI8KxkUA+q6RVUfoe1gMzbKt8s7ssyThxxVebS1a9HM0BgTq3WNDw4RBQMwzPY7kXDV3V8yVQQFjGSAgXDwoglc3XaoPoDJEDFAOKyYEq5pOpwLJDMsReQICJBixDVth2aO2KW9yz3baIy4RbWkWywQYaP6H361XOL6vR7rukF0a+A4rd7hhsOCxoxMFLbqR8r7gDs9GVKta1SzzXoBRI7AHlfkgdx7JHOgO1k4qBByXNs2vDl/xZ/ZkswHVI/7vg9hk408EwZFTmdC5vzGxcGEEMImdfX9PRevR1xPl6gK6sOD9x3PIaDboCxu51yev8RniqSEdw7vw077JzilxGwy4exFn9NBTte2WEqICM45nNuBtwemkwnWrLkYDTntZQSJdPUaVXn+YQGqqmK1WlEUBcOiYNTv40Yn/AMQAvxPIRAzswAAAABJRU5ErkJggg=="],
m:[a("button-left/pressed-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAAAfklEQVRIx2PpnDj1PwMdAIuboz0DA8gqRiJUU+AklucvXjHQxUfEeYUKFv3//3/UIjIt+vePPhb9/UcnH/39+3eYWfTg6RP6WMTCwkofi1jZ2IabRex0soidjZ0+FrGxsw+3OGKll0X0yke/fn6nj0VyQjwoAoyMmFU7NeosABiuJsuhWi5rAAAAAElFTkSuQmCC"]},"0 1 0 10")},"toolbar-button-right-normal":function(){return new uki.background.Sliced9({v:[a("button-right/normal-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAXCAYAAADduLXGAAAB0klEQVQ4y21S227TQBScvdiO4xjstoB4QURIvECqfidPvPBPVVWpEmp5ByouTWhD4jjJ+rKcs05C6nitY1v2zOzsnCM+fPxkPa3R7/WQJDGeHaXQWqFrieubLzaM+rj/M8XX2+/4dvsTL44TvHx+AqUek8T5xaVNkxSWLv4plcDV1Wf8+n2Ht8NX8AN/B5bNXUAIibquUZgSo/fvcHY6wo/xPYwpYK11JVuuiCTcjzRN8Gb4GqtVA3aa7mkPKJBSOsIgjolg9pXtXm0I4j+hqkEWLSsToF0bEhO0pxH1I+fdgW1L2+52awi9fujM6e1J22v/k+97ZMU2YPbTtXaRSekwOssX0L7fCRZ8BFD2RYWyLKEln1pIdKOpan4poWheNG+hlDi0wEjbYCvKLqBUHFhI1WkBG43CGHg+g2l42tO1Ta45fEUZG4QB2VBso6XsRBloa2TzBQZRiHwxZxusLA/AlqJaEbAqDDWmaiJkIBO2xf4VpbNcLjGb/aVWBzRIKyeihUtDNs3lrasKDw9TLCn/J3GEyWS867Czwd0x6zX5ypHnOYKeh5BqPL57NAp6Np0in89JXcPTEvEgoO1nyLLsICB9cvTUtZLjYQArdw0Wr3/Z9/0CcqEqewAAAABJRU5ErkJggg=="],
m:[a("button-right/normal-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAAAhElEQVQYGb3BsQEBARBE0b+7E0noTSBQkkSiQFcCJzUCAQUw7+l0vth8dBX/oONhzzfbvBW/YaDQfX2QoKoiQYTIJkJgEoRNgkyGbJOg59Mk6LauJKirSdBMkaDqIUEzQ4KmhwTNNAnqHhI00ySoq0nQcl2wDQYauhqKn9Nuu+FbVfEPL+gFIdGp1E0bAAAAAElFTkSuQmCC"]},"0 10 0 1")},"toolbar-button-right-hover":function(){return new uki.background.Sliced9({v:[a("button-right/hover-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAXCAYAAADduLXGAAABx0lEQVQ4y32SzVJTQRBGz8z0/QkQkQQpKEvU8jl057u5cuM7WfoCLly4AqoQpCBckty5M90ubhJBErrqm02f/qa7Z9ynz1+sLEu2BjV7u0NejPYQCawL9/Xbdxs+G3Jz3XB6fs7J2RmH4z2ODvYJ4WGRv765obmbIUXg3ZtjPn54Tygqfvz8RTtvMbOVxAwcDgNSSnRdx9vXx4xHI05OT3l5MKYopHc2AGyBAzhyzgzqiqPDQ5ppxKzPeQCzpWyVcM6zXQ+o6prprG/HY4bqUvcLwZxjMKjpUp8XNVA1NoX3nqIsmLcRMTXMdC24bE2koJ1nRFVRfQzb4jAD7x05ZSSrkrNtgHvazFBT5OrP1ZM9LzcUY4t47/Heb4YBVCmlQEIQgghPWJOAqq4QkYCEzbCikBNbddU7L99+3TZUMxFHCA6RQhAp1sKmRtdFRrs7tLO7hfN/PasDZ0bbRkLwoKn/GyKBUMg/iVCEQMpKTh2j4Rbz+Rygd14O2F+tzGYzNHWMn+9weXmx+okSQsB7T06ZNrbEGNmuS3wJFxe/VyCApNRxO7lGglCVnp26ZjKZ0DTNo6Hl1dE+KSVijNzdNkyn0wdu9+Mv25oPTSfSJYAAAAAASUVORK5CYII="],
m:[a("button-right/hover-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAAAjElEQVQYGb3BMYoCURRE0Xr9708mElyTILg1k0lmlwqtsa9ExVlBU+dw/v2zNta2XpYqfXE6HrS1Kr3Z+sd6uysBhSBZCdiKoNtKoNtKwG4l0N1K4PGwErhcL0pgWRYlMEAJMFACc6IEYCqBCUpgTJQAAyUwxlACt3XV1mzrrUqlD/a7H23Ntl6qSl9PqVQpzP9kSucAAAAASUVORK5CYII="]},"0 10 0 1")},"toolbar-button-right-down":function(){return new uki.background.Sliced9({v:[a("button-right/pressed-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAXCAYAAADduLXGAAAB0klEQVQ4T32SvW5TQRCFv/137BgnjkMA0QGRkJB4ACQkno+KhteiSgEFDQgTx4njOHZyd+/uUNgO18HhSCNt8c2ZM6tRHz99FmU0nZ0W/V6Xw34faw3bZN++ec3gYMDi9obfpyO+nHzlyWGfp48HGLPZpMfnE4anZ0ynM/Z6e3x4/w7nW5x8+051WyEid6URQSlQSlFVkV/DEb29Hq9evuDHaEwV419YBNa1VqwSVZXotDuMzqeUUpYxmmOk0aG1IviAMY7J1XzpXCj82yAgoJTGecv1TUXOBUsBWY1ZSxovhcZozWy+wOZSyKURuAEuUwlaa6pUY0vO5Jy3wCCsYokipoSt/wMDlCIUKcRUY38Oh1zO59tJWbuDNRqrncVatx1GEECKsBM81jmP8/5hVCBLYXe3jXXObYdl5SqCLpn97i7W+4ALDziLQBEk17SDxzrvCT5sQykFcowcHQ1IKWK99/hwD5blD+Q60WoHglFUSZbOG5mXO1FSRGnD88EjLicXAKsFXQMuhRQjzmiODrpcjMd312itdVhryTlTcianxH4nEAycn51tnK3VWlFXNwRn2GkZWt3A7GrK+Pqa+7LHzwbUdU2MkcV8xmSx2HBr6g9L/hlPJucDyAAAAABJRU5ErkJggg=="],
m:[a("button-right/pressed-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAAAmklEQVRIx2Psnjz9PwMS+P//P1Y2pYDx3IXLENMYoQIIBn5AihuAZrE8f/kaVYyRgSaABdNg2tjEghkN/2llEW0MHkCL/v2jj0V//9HJR3///h1mFj14+oQ+FrGwsNLHIlY2tuFmETudLGJnY6ePRWzs7MMtjljZ6JWPWNCqPRpVfH9+fker9mhkkRQ/F1qbgRFOI7NxtZSIBQDHcS98n02qWAAAAABJRU5ErkJggg=="]},"0 10 0 1")},"toolbar-button-mid-normal":function(){return new uki.background.Sliced9({v:[a("button-mid/normal-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAXCAYAAAAhrZ4MAAAATUlEQVQIW2PpmjD1PwMQsHi5OjKAGV++foMwGKAAwfj/H1PkP0HGl29fIQwmRkYog4kJncHMDGEwI6RgIsxQEUYMqU8fPkAYIkL8YAYAr+gazL6h6nwAAAAASUVORK5CYII="],
m:[a("button-mid/normal-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAXCAYAAACBMvbiAAAAiElEQVQYGc3BoVIEARBDwZeZKATFf2Mw/OAJQMNiN1RhEJzeSreeX14T/huJq+nt/SPckYQ/4gr+Or5pYUm0GIo4oYYhtDAJLRx6OAktfJ6hhT+PgxYeDS28K1pYs7Tw7tLCO0sL7w4tPLO08O7QwqOhhW+3GznDrwACBKMBcSk/PT5wjySu9gMKwyN3ltbnfAAAAABJRU5ErkJggg=="]},"0 1 0 1")},"toolbar-button-mid-hover":function(){return new uki.background.Sliced9({v:[a("button-mid/hover-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAXCAYAAAAhrZ4MAAAAW0lEQVQIW2Pp6Jv8nwEIWOyszBjAjA8fP0IY/8ESIAYDlMEAZ0DlWP7B1fyDifz7B2H8hTHevX0HYTAxMUEYzMwQo1hYWJjRRVhZCKphZoaK/PnzG8KQlRQBMwDxCRzMOh3CMQAAAABJRU5ErkJggg=="],
m:[a("button-mid/hover-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAXCAYAAACBMvbiAAAAdklEQVQYGc3BMQrCUBRFwUP++Y2V4JoEwa3Z2LjLCIl13rN0Cd4ZH89XE6AB77crKdz2DykkiNCksJsYVjUprGpS2F2ksKpI4XE0KVzfKylcloUUDiWFDknhnJJCnaRwKikcU1LokBSOMUjhvm38U/Pj5XwixRdnPSDKXAN+9AAAAABJRU5ErkJggg=="]},"0 1 0 1")},"toolbar-button-mid-down":function(){return new uki.background.Sliced9({v:[a("button-mid/pressed-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAXCAYAAAAhrZ4MAAAAY0lEQVQIW13KMQ6AMAhAUdoAXsDJA5iYmHhQJxdPaNJF4wUsVQs4yMLLhzAva4FncBoHqNiPUwGlKGy/sCIg9iN2ymJFclZcji0lRSRUELGDFMyNFWYv/CvfM6IhxqDou7biBpSbHMl9F6bdAAAAAElFTkSuQmCC"],
m:[a("button-mid/pressed-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAXCAYAAACBMvbiAAAApElEQVRIx2Ppnjz9PwMW8P//f7x8WgAWZ1sbBI8RmcmIIUYUoMDNLM9fvsYqwcjIQHfAgttS+ruGBXdS+D8QjqG/pUPEMf/+DR7H/P03iELm79+/o47B6pgHT58MHsewsLAOHsewsrGNOga7Y9gHkWPY2dgHj2PY2NlH0wx2x7AOIscAAY6m1QA0rv78/I6jaTUAjpHi58LRBmZEYaPzCfUmyAEAxG8szbIQ5CAAAAAASUVORK5CYII="]},"0 1 0 1")},"panel-dark":function(){return new uki.background.Sliced9({h:[a("panel/dark-h.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAECAYAAABodtTSAAAAIklEQVQYGWN89OjRfwYKAeOFCxcoN2T58uWUGxIYGEixIQC2uQv/2FmjnwAAAABJRU5ErkJggg=="],
m:[a("panel/dark-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAABCCAYAAACxdz2jAAAAQklEQVRYw+3SQREAIAwDwT7q31olBRHwAGYjoHO5pmcmtZmuA+kkhQQJser85YRYTt5y4jt2YiecEItEHTtBcv2RBQSZeQAFfY4LAAAAAElFTkSuQmCC",false,true]},"2 0 2 0")},"panel-light":function(){return new uki.background.Sliced9({h:[a("panel/light-h.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABCAYAAAAFKSQHAAAAD0lEQVQImWO4cuXKf1IxAKwwLUBaex9CAAAAAElFTkSuQmCC"],m:[a("panel/light-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAWCAYAAAAb+hYkAAAAMElEQVQ4y2P8+/fvfwYSARMDGYDl////w00TeQHx79+/wRwQ3759o09AjGoa1YQKAFiCG/x9cnwFAAAAAElFTkSuQmCC",
true]},"1 0 0 0")},input:function(){return new uki.background.Sliced9({c:[a("input/c.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAANElEQVQIHR3JMQ0AAAgDwdpFAV5wwowArNQBpB0+ueQREZeZTkZVXXc7GTNzJJ0M3d118gPy8TCF6xZeTwAAAABJRU5ErkJggg=="],v:[a("input/v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAASCAYAAAB8fn/4AAAAFklEQVQYV2M4fPjwfxgAsRlGBfCHBwBQvgWgyn4eOgAAAABJRU5ErkJggg=="],h:[a("input/h.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQMAAAAECAYAAACKo1rHAAAAJklEQVRYhe3DAQ0AAAgDoAe3nTmsohaBjVTVqaa7TzW7e6qZmVN9iNNyorfgv3oAAAAASUVORK5CYII="],
m:[a("input/m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQMAAAASCAYAAABfLLtBAAAAPUlEQVQYGe3BAQEAAAABIP9PY0iVAlwKcCnApQCXAlwKcCnApQCXAlwKcCnApQCXAlwKcCnApQCXAlwKcANerJNhvRm/sQAAAABJRU5ErkJggg=="]},"2 2 2 2")},"input-focus":function(){return new uki.background.Sliced9({c:[a("input/focus-c.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAArUlEQVQYGY2QuwrCQBRE9zPt7NXSxsJvkDQ2WlkEtNHG0gdplFQaVAhCAmqIieYbRs6tTJdi4DAzu3f3uqqq9C6/SrOPTkmpQ1yYYDwyOg6IH6WCW65FmGkSvEwwHhkdx6n9Ndd499Rglao3T0wwHhkdxwhOE7RGW7W9jQnGI6PjeBPjuKkzPcpbX0wwHhmdWrHvR/LDwgTXiv+ju7Ozhsu7Ca6NbvyZxutpuvAf9YpOCEjL5hcAAAAASUVORK5CYII="],
v:[a("input/focus-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAASCAYAAABit09LAAAAQ0lEQVQoU2M4dO35/2n7H//PWXnvf/2KM/+P3nwFxiA2SAwkB1LDgKywafX5/yfvvgNjEBuvwlP33oPxqMJRhQOgEADEvEfJuT80NgAAAABJRU5ErkJggg=="],h:[a("input/focus-h.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANcAAAAKCAYAAAAn3ctEAAAAa0lEQVRoge3ZMQ5AUBRE0Vmtyl7Q2INOoqKRiFpH5xcUFmABT+zhfURucerbz2hYDgPgT2W/GwB/SqtgAPwpyRoD4E/1OBsAf5q20wD4U96uVnQhqrvxRIcWrS+1GDSASJjigUj09tEG/NUFz/znOFFNNWgAAAAASUVORK5CYII="],m:[a("input/focus-m.png"),
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANcAAAASCAYAAADIWEuyAAAAJklEQVRoge3BMQEAAADCoPVP7W8GoAAAAAAAAAAAAAAAAAAAAN4APIoAAdvConYAAAAASUVORK5CYII=","input-focus-m.gif"]},"5 5 5 5",{inset:"-3 -3 -3 -3"})},"search-input":function(){return new uki.background.Sliced9({v:[a("search-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAADJ0lEQVRIx52WSUtrQRBG+286ElciggiuXAiiLkRdKThtVIjgAIrzPCMqKLgISQQRFRUUnHEevsepR4er75nkeqGg0131nb7V1XXjVlZW9D+bnZ1VZ2enGhoaVFNTo+rqatXW1qquri6t4UsMsWj8pO+Wl5cVtLm5ObW1tamxsVG9vb1aWFjQzs6O4vG4EomEkslkWsOXGGLRQAvN7xy3tLQkb2NjY2pqalJ/f792d3d1enqq29tbPT096eXlRa+vrxkNX2KIRQMtNNEOslLgiYkJNTc32/jk5EQPDw96f3/Xx8eHPj8/le2DLzHEooEWmmjDSIEXFxctFa2trVpfX9fl5aXtPAws3SbQQhNtGLBgGrirq0vz8/Pm8Pb2ZgHYxsaG2tvbVVFRYdbR0WFzYTOAJtowYBl4ampKfX19Oj4+/vKmIyMjikQiKigoUF5enhlj5lgLC0cbBiyYLhqNamtry87Di/FWhYWFKikpsR1ub2+bMWaONXzCph0GLJiOHRweHlo6eCiMlpYW5ebmqqenR9fX1xaAXV1d2Rxr+OAb5oEBC6abnJy0/HsRqrG0tFQ5OTl2L4NnTrqYYw2fsGD8YcF0q6urX9IMiHQifnBw8OUsGTPHGj5s8jfphulmZmb0/PycAiBGx0F8aGjoHzBzrOHjjycMGNb09PTfqn58fEwBSAebQbysrEyjo6M6Ozszo5qZY43537wxLKtq3oAWFwTzu7u724qICi4qKjJjzBzgyspK3dzchAajDdMNDg5aWwsWCimkgumv9fX1Ki4uNmM8MDCg8vJyu9dVVVUmFKa4YMF0iG9ubtpHIPiQRkTPz88tzTT9i4sLq8r9/X2D5+fnG/zu7i4rMAxYMB2Ne3h42ES/Xw/f7MkAxtifk4eTfppLNm8LAxZMA7MDmnfwWmU6Kz5/wPnYZ4rz14geDcvA4+PjwqhY0hCs8ExwUod/ukbiM0SLheF5dsbeuCJ8vjjbbLtSuk36G8JfHaBBlgMWNBxoaXt7e7q/v7ez9X8GsjF8iSEWDbTQ/M5xTP5knMXa2ppisZi1yqOjo4yGLzHEptP+A2XnG0kH7B78AAAAAElFTkSuQmCC"],
m:[a("search-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAAMUlEQVQoke3KsREAMAgCwLi7Q9KyhgW4Am3u/Pqru/0CBSCLM5NF2xcv/hclZZFkFBfzW1Vt2gDiogAAAABJRU5ErkJggg=="]},"0 10 0 20",{inset:"0 -10 0 -18"})},"search-input-focus":function(){return new uki.background.Sliced9({v:[a("search/focus-v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAEMUlEQVRIx7WV+09TdxyGz5+6DEQ3Zc4lu6EycaDsBltwihMo1FIKvdCettAWOL3RlrYC5eIER3DB7ILb4mKWbb+94znLMQy0g0i/ySf8cD7v87x8OeEY+Xxe/zfpbF7JdEHBmZLGkmV5EvWHHXbJkD2Kw8jlcnrZWJmcEta8xpMlDcSr6gkv6lpwWVf99YcddsmQhQGrnss4SoFPQou6NF5Tq2dNp9331TRcf9hhlwzZoxQystms9s9cOitzJi/3VEmfh+7pom9Zb7lrau4vqqlvVs29MTV/EdGpHlMtvdFDwzN27N29DFkYsGDCxnHQa2QyGTkza2UUSeU0GFtQV2BJ73hqarpVUEtfSm0uSzcm996RuZoihW9lFh8oWto4NDxjh10yZGHAggkbB679biOdTotxSgxES7oeqOq9uxWd6Uvo0khGo9a6CvcfyzjmIUMWBiyYsHE4ZRz/8yLxmaxcsaI6/Yt631PVua+Tuhkpa35959gFDh4YsGDCxoEL5/MilmVpZi4t79S8PgtW7Cts7Z/T7dg9be48eeUSzoEFEzYOXDhx08EuEktldNtcUNvYklq+WdB1f0XV73ZPrIRzYMLGgQsnbrtIatbSaDyv7r2/XevIsi4MFRSpfH/iJZwDGwcunLjpYJgJS/2Rkj70Lur0nbJ6zBWt7vzesCKwceDCiZsOxlg8q08DZZ11r+j8UEn+4nbDSjgHBy6cuOlgDJs5XR2v6tTwmi56q7LWf2p4ERy4cOKmgzEQzqp9rKrXXev2d2Jh67eGF8GBCyduOvynCD8r208bXgTHfqddZCicUYevombXqn1d8w8bfyM4cOHETQfDY1rqnijpzZGaLgyXNbWy2/AiOHDhxE0HIxRL6UYwb//rfWNw75oyj7Tx858NKwMbBy6cuOlgROPTGg5b6vSVdG54Se3+VWU2G/eewMaBCyduOhjxeFwBM6G+QM5ueNa190HK7zTkVmDCxoELJ2462EXM2JRck3O65ivobfeSLvsWlVj75cSLwGwfX7IduHDitovEYjEx/si0bgUsfeRd0LvusrpCq0qu/6rN3b9euRAMWDBh48CF0/Eb0WhUTNiMyTs5rb4JSx3egh3oCKxopPiD8lvP9PDJ38cuRIYsjCv+2r/MPTYOXDgdv2GappyZjEQ1GpqyF9tHSzo/smh/JbvMTblLP2r2wVOVHz3T8uM/6g477JIhCwMWTNg4cO13G5FIRPsnFDblCcZ1c2JGH4/m7d+ClwvYB74VdUc31JvY0lep7RcOz9hhlwxZGLBgwsZx0HuoiFPGF4ppIJDSl+NpXRmdt2FnXEtqGlrRa4OrdYcddsmQhQEL5otK2EXC4bBeNsHJiMaCUd3xJ21Ypzevy56i2u6W6g477JIhCwNWPVfdIgcLDQUS6p9I2Vdcb9hh9ygFnPkHMbkOQtw6wYIAAAAASUVORK5CYII=",
"search-focus-v.gif"],m:[a("search/focus-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAcCAYAAAC+lOV/AAAAUUlEQVQ4y2NcsuPkfwYyAcu9z2wMZGt++JUCzczv75Gl8f///wwsvhaqZGseBaNgFIwCygHj+cdfyC96D11/RX7pCbSZfM1SbF/J1yzDTr7NACn1GmiOSs0vAAAAAElFTkSuQmCC","search-focus-m.gif"]},"0 14 0 20",{inset:"-3 -13 -3 -21",zIndex:200})},"table-header":function(){return new uki.background.CssBox("background:url("+uki.theme.imageSrc("table-header")+");border-bottom:1px solid #CCC;")},"tree-list-header":function(){return new uki.background.Css({color:"#718193",
fontFamily:uki.theme.style("fontFamily"),fontSize:"11px",fontWeight:"bold",textShadow:"0 1px 0px rgba(255,255,255,0.8)"})},"drop-preview":function(){return new uki.background.Sliced9({c:[a("drop/c.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABwElEQVQ4jWNgQAK+aXdt/NPubvJPu/cGiP/7pd77B8NA/je/tLtbfFPvmjKgA8/o23z+qfcmgRQB8V8oRjEAjtPufvRLvVuEYgBQoBNowB+QgsCM+9ejSh7WF0187ti04LUxCBdNfOIcVfygNSD97kOw4SC1afeaIJpT7rkCnf0BJBGcfX9r+aynVjCN6Liw75lbcOb9oyDXAfX8AurVA9m+C6Q5IPPeTZBNuDQj48D0u49BeoAuXsgAdM5bECe69H4jMZpBOKroQTfYgLS7TxhATgFx8nueuRNrQGbLk1BoQH9jgIV67fznpsQaUDn9qTUsMOEGEKsZhKtnv7DAMKB02jNbYg3IaHkcDA3E78BYuPcFHIhlD6qJNSC84P40qAFPQS7YCUpAAen3nhETjSX9T5wCMu4+giS8u3MZ/JJv2cFiIijr3sHSSc/tcWnO7XjiDVRzGpKk770DJyRoUs4HZxawS+6+jCy+35nf89QVHGBznptldTz1BTp7BthmSPz/9k25V4WSH3xT75SAkyck5/3FhUH+9k+7k+eQsJ8DLU82MIGyqn/q3TWg7AyyBaERbPBToEuXeKXeMkDWBQDc2R7fquJzGwAAAABJRU5ErkJggg==",
a("drop/c.gif")],v:[a("drop/v.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAECAYAAACHtL/sAAAAHklEQVQYGWPwT7v3F4SbFrw2JgWD9aXe+8Mw9A0AAKdtlPmxoeQnAAAAAElFTkSuQmCC",a("drop/v.gif")],h:[a("drop/h.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAAAQCAYAAABXwODhAAAAU0lEQVRo3u3TQRGAMAwAwXjCR1EBQqoEZTGABjp1kMmPzz7WwM1cjCsXUAsRoDHKfN4DqBkFjAJGAaOAUcAoYBQwCmAUMAoYBf4e5bzzA2pGgYYNtJpkoHuF6t8AAAAASUVORK5CYII=",a("drop/h.gif")],m:[a("drop/m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAAAECAYAAADPh6BsAAAAKElEQVQYGe3BQQEAIBADoD3WyIYmsZ8lbOAVALrPXQG+GmDUAKMGGD34YQJREnniOQAAAABJRU5ErkJggg==",
a("drop/m.gif")]},"8 8 8 8")},field:function(){return new uki.background.Css({fontWeight:"bold",fontFamily:uki.theme.style("fontFamily"),color:"#666",textAlign:"right"})},"editor-field":function(){return new uki.background.Css({fontFamily:uki.theme.style("fontFamily"),textAlign:"right"})},value:function(){return new uki.background.Css({fontFamily:uki.theme.style("fontFamily"),cursor:"text"})}},images:{},imageSrcs:{x:function(){return[a("x.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",
a("x.gif")]},"list-selected-row":function(){return[a("list/selected-row.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAARCAYAAAArDQkmAAAAN0lEQVRYw+3RAQ0AMAjAsHNVN3atyAEbhHQS1ng/62hM1wIgAgJEQIAICBABASIgAgJEQIBIy2u67AKjWqm8DQAAAABJRU5ErkJggg==",a("list/selected-row.gif")]},"list-selected-blured-row":function(){return[a("list/selected-blured-row.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAAGUlEQVQokWO4cuXKf1Iww6iGUQ3DWAOpAABAkpxfQrJxGQAAAABJRU5ErkJggg==",a("list/selected-blured-row.gif")]},
"list-unread":function(){return[a("list/unread.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABJUlEQVQ4y2NgGAVYQc2qG4rtu17Wtux6ebxt1+sfILpj54uahuX3FQhqzmy/pFSz7OHKju2v//fuevN/4t43YBrEr179dFlB+3W8hjDmTrjSWL/6+f+Ora/+d2xBwkA+SDx/2p0afAYwp3VeP1255Mn/mhXPMDBIPKPz9nF8BrBEVVz6WTjz4f+SuQ//F89BYBAfJB5TfvkHXgO8k46dSWm//T9rwr3/mUgYxAeJ+6acxOsCZsegrW3+GWf/R1Rc+x9bf+N/QvMtMA3ig8SdIw7V4g1Ec+cZWk6hO9Z7xJ7875V49r938gUwDeK7RBxY6Ra6U5FQTDKZO0/SsvfZ3OYYvPeMS+jBn87Bu0/b++9qdAneokRsWmIEeQcUJlDMDBUbhAAARh3Ic97iQwkAAAAASUVORK5CYII=",
a("list/unread.png")]},"list-unread-selected":function(){return[a("list/unread-selected.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAASElEQVQ4y2NgGAVYwf///xWAuBqIjwHxDygN4isQq3npf+xgKUFDoDbhA9WEDDhGwIBjhAz4QcCAHzR3AcVhQFksUJwOhh4AAMVYJHi3XECRAAAAAElFTkSuQmCC",a("list/unread-selected.png")]},"list-attachment":function(){return[a("list/attachment.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlElEQVQ4y2NgGCpAFojbgHgmEGcCMRepmvuB2BmqEWRAPKmarZDEDIC4mBybGaB0DRD7kqIZpgGmOZ5UzfHU1GyALwYIabaCysviMgAUz5ZALAzEpaRqVoAqBgFWINYC4nJiNcOc34LEZwdiDiDWI0YzsheQE4wdEPcRq5kB6ndQCisA4gwgjgViMXIyjjgQixCrGABccB1YrtCQuwAAAABJRU5ErkJggg==",
a("list/attachment.gif")]},"list-attachment-selected":function(){return[a("list/attachment.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAm0lEQVQ4y2NgGBLg////+kC8GYiPAPFUIBYkVfNuIE4DaYQa0Emq5igkMR8gnk+yzVAxkAtWAnExKZrBGpA0d5KquZNqmqH+FyRXcxRUXh+XAaB4jgBieSBeSKpmY5BiKJsTiJ2AeAlRmpGcvxGJzwPEfEDsQVAzmheQE0w8EO8iSjNUA8jv84F4DhBPBuI2IFYhJ+OoAbEiseoB7WhRVygLSMwAAAAASUVORK5CYII=",a("list/attachment.gif")]},"attachment-header":function(){return[a("list/attachment.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAuElEQVQ4y+XQsWoCQRAG4M+ca+49UtkYLAJB0JN4IAd28QXyIoE0SWebBAu5SqsUeUKbEa5J3BRWGdhiYb6fmeFfVB9r7OMtUeTiAkNsAtYRMvgL/sA9rrHIDejiWeAbHPB4boUurvGFEd5xGzfJwg+BV/iMSRJ6P+ErTLGL5ldUgRf4xt1vAQkvaFDiGdsOnpwbf4AW42gsMc/Fpwne8BQhTVw9C59uUEVIG+tMc3E3JMU6Kf6XrSOKlBrzbNjuNAAAAABJRU5ErkJggg==",
a("list/attachment.gif")]},"table-header":function(){return[a("table/header.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAR0lEQVQoz8XNORIAIAgEQbn+/18Bj8TMMlgCJ6Wa1blrYFqwTT38fjk/6YEzEl/O/IVHBXd3HBMRjnc4FpFPyyVsZjhmZhgvHLIaOS+PnNYAAAAASUVORK5CYII="]},"splitPane-x":function(){return[a("splitPane/x.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAMklEQVQIHR3GoQ0AAAgDsP1/AxaNhSMIgoNGhmhSzAzN7Olwd1bV0xER7O6nY3eZmU8/oKwy0Tv1fE4AAAAASUVORK5CYII="]},
"splitPane-v-bg":function(){return[a("splitPane/v-bg.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAMklEQVQY083KMQEAMAgDMA48ohArNQUts9BzuZPdfWHIqgorSvIiSS/urhdn5vsIwIoPCOcbF8QKbsQAAAAASUVORK5CYII="]},"tree-list-header":function(){return[a("header/tree-list.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAANElEQVQ4y2NgGNagHQ1TZADFLvAl1wAGqGayDWEgxxBcCn2JDQ+aOLmdEkOoFpX0T4n0AQDoThJhbb2E6gAAAABJRU5ErkJggg==",a("header/tree-list.gif")]},"unread-header":function(){return[a("header/unread.png"),
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVQ4jWNgGAU0A4JAHAzE3VAcDBUjGoA0LEPDwaQY0I3FgG66GkCxFygOxFFAAgAAoF8RlRhg/AAAAAAASUVORK5CYII=",a("header/unread.gif")]},"toolbar-get-mail":function(){return[a("toolbar/get-mail.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAACKElEQVRIx9WUy0sbURTGtSIIjRtxoYRCQSi4EbHIiBQqFApdhO7c2H+gK83ateAqm0JLuxiQgrgRxC4EUwqFkpYq2tIQQzQPhsS8M0kmIe+cnu+aBBNNk+iU0gM/hjtzz/nm3vPo6/sPbJB5wDy8xAQz8DfE7jD3mEcmk+lZOp1+X6lUjuPx+DtJkp7y+3lmXE/BUUYyGo1PFEVZI6JkLBYjn89HiUSClxRyOByrvGeBmWVGbiM2zEwjmM1mW+bgZ6qqksfjIafT2SAUClEqmaRqtWq3Wq0va+JTzN1exIaYSTjLsvyiVCp9yWQy5Pf7yeVyNQFBGL4Hg0HKZrNULBY/WiyWRfZ/XMv/YCfBfmbObDY/5wDbhUKBotEoud3uK4TDYSG490Ojk0BBCOIWcPVs5VQqtYH8c7yZjqIGg2EBXsgXglxHJBK5EPypkfxZFdSFvV6v2JPkK+diIxyim+udRsB8Pi8ccSJcYx3kD7Z7EKM3+4Em7Eq24YcnrFYXHU2iFsvlciJQXXDn6zm9+uBp4u2ejw5caqsrRKUbiV62rU+ntL553OD1jp2+n4Tb7tdFFHbkDJC8e0jffimdtt5OlPuQeBIRV6UoEKyRN6w1TdNflHuPeOSJ6rzO8B7fuaf1EUVAFBB69k+GU6OnW3+sJ9FyuSx6td3p2qUA0wnjEinoSRRCmCz485sCf7Rat6Jo5iVmRQeWuh0OGPhjzH0dGKvF+/f2Gzk0rH9bwnSYAAAAAElFTkSuQmCC",
a("toolbar/get-mail.gif")]},"toolbar-delete":function(){return[a("toolbar/delete.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAACbklEQVQYGe3BTWgWBAAG4Of73PZNwjnnWqRkMAYb5ikr25rSCtyILLIMMaIWko2ZNbdDSj9iBlISlnnqoE0i6IfAEtKgg9ml0tqyLvZDuShBGzhHThtvhw4eOvlthw49D//7t2Ie7e7LQP/Hee6Zk3lx+1959ukfM9B3IGu7u1E0jQpZtWph+vuGs21rsuuVZO+e5NDB5I09yWuvJi88nzz5+JHxzs6rTYPC+PLli7O+Zzx9G5LennPfrLhz/5utS17a1NS08e221p1DK+/+6MKG9RPZ+ETSu+7MWGfHdSiYgqq03fBVbm1LbluatN84un9+wzo0oxEtuKln9qy1Z5a2nkpHe3LL4iFUKlNxkoGQcPYXRkLC+AT3oAol1KDxIR4If4b8wRoUlWFmOBpyiMEuHj7BiZBwITyCIgqoRuOXvBMSPkBJGWrD+ZAdPIiWJjqHOBoSEjajiAJqBukNCSdR43Kt5pqQkAFacQXmVbPsCAdDQsJuzEBpN10h4RzqXKYCrgoTIe9zOypQgQYsOcC+SRIS3t1CzWHuDQm/ol4ZrjzNtyHjbEGlf8xAHa7fy8vjXAwJn4XXQ37iE9QpQ+2H7AgJv73FPJcUUYtF23nqLGMh4XzIIP2oUYaZWPQDwyHh8DBzXFLELLS8x+ZwMeR7vkMzSspQRP1j3H+KsZAwEjaFjtAYusK2MBoywuk1rMRcFJWpCtfex+rjHJskISEhISET5As+vZm7sABVpqCAaixA+z52HufYCGO/k58Z/ZrPd7EVrZiPEgqmqIBKzMVCLMMdWIEutKMZc1BhmhVRjVrUowH1mI0Siv7L/gYT9B/L2Zyi6AAAAABJRU5ErkJggg==",
a("toolbar/delete.gif")]},"toolbar-junk":function(){return[a("toolbar/junk.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAC0UlEQVQYGeXBS2tcZQAA0PN9987MnckkadrYptKm0krBBkt1IYKI4EJXXYiCUP0LIgXRjQtB3LhyoVAXggguXImKUHVVcFVLKZSCiI+aoI2FPjSZzPPez0dxYZxp4tpz+L8Itu84gskSPrENua0dd0uWUvrQBCGEJ2xTbmvh1PkPPrKFk08dfPCFE0fmRimdOfDkp9+7jdwE377h6ciJ05ePNmzDw8f2vHT265uIfjhlOfWdTrx26HnLNslN0B84U9S9t7Azq1812btfXvSXR972p13nXjW1+Mzixo/vP9r5xXPGiCZYetHqoOPjsrfiv4nK7hXdDSeXXjEwRnAbF1/2WCh91pwnbx80WL9muParNCSVpEQaUFbkBbW5ReX6sv5NX9z/pseRjJGbLKwPFHMzVP4QqLXnZFNtUQ2RNFSNuqrqGqlpcGNZSJT8hgwjY+Qmyze6ji4skjXJWnNCmCL6QyBFIZWqqqvszSp732kuUPYZVpbQwMgYuckaw75jVUkoyQ3EYrcQa25JJIJpsVaIjQbVBtVltbZ9aGMDySbReAFFIziYSpSk1CcEf0tVKY3WSCMhqwtZTloTAo1C+9n7LJggmixv1e2rzdbUZu5Way/Ji72yYresMS/kLSmVYpySFXtkzf1icVg+vVc+zQMHHEFmjNwEhwutorArb94jNhfExk7yppQqoRqSEikhCVlTJgkhinlLNbxpx2z3EHKMbJKb4KH97hj29PLpe1uxOSPmbUIkDVWDoVhrC7EuNnaItbaQ5qRUqUY9w7UbprPzdyE3Rma8eOE675z1zfRye2p+70zr+kpvozPQWe+WnWs/r3dWLvU6/dV6FvrNvDG7Q2xN65e13srVjeVzF1a/ev2tnz6/wiUMbBKMF9DAPHbjTsyjjuCfRuhigD766GAFqxjYJLi9iDqaKBD9W8IIFUqUqNDHCMkmwfYF25Ns4XfmhwQY23b+DAAAAABJRU5ErkJggg==",
a("toolbar/junk.gif")]},"toolbar-reply":function(){return[a("toolbar/reply.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAB5klEQVRIx2NgGEKAkZ6WMQExt6urq5S5uTkfPSxnAWLRqqqqmI8fPz6IiYkxAvKZaRmUHECsvHv37ll///799R8I7O3tPaEOoToA+UQgISHB9eHDh+f+IwFTU9MwqGOoGsRsQCw9f/78qi9fvrz/jwYaGxv7cnJyQL5VA2IJUFxD45z8xKKtra1//vz5Lf8JgD9//vx49OjR6ZkzZ+YB9cmR63vWadOmeb579+7RfxIBKAr8/PysgWZwkWopR11dnf+TJ08e/icDgBwrLy9vCI0e4n0KSqmsrKyJa9euPfUPCEi1+MyZMzuBZsiQEswghZxArATEQQUFBYvevn37Gd3g7OzsTY6OjpMSExNnp6SkLJwyZcr+y5cvPwZmqb9A6b9FRUXh0PgluTAQA2JbNTW1qrNnz95FtlRTUzMfKAcqIEBBaQ7E7kCcCMy/vfeA4Pjx4yug+slKybxArA3EcVOnTt318+fP30j5lBMadyAfgYpFSSA2lZaWjr958+ZeIFuBkhIJZLAsEHsGBARMePHixRMXFxd3LCUSrPTSWLFiRa6SkpIcpYUHqHQSBPlEUlLSnY+PTwVH2QuyhFdISEhm4sSJcpQUGOiJTIBAIQByDLuvry8XNSxFtpyRCDVM9K57BxcAAFmihZEgAelPAAAAAElFTkSuQmCC",
a("toolbar/reply.gif")]},"toolbar-reply-all":function(){return[a("toolbar/reply-all.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAACy0lEQVRIx2NgGOSAkURxigATEPOmpKTIAGkuNHFuV1dXKXNzcz5qWs4CxOIdHR2pX79+fQJkKyKJi1ZVVcV8/PjxQUxMjBGQz0yNoOQAYpV9+/Yt+vv375//QADkW0LFlXfv3j0LKP4LJG5vb+8JdQjZAORiwfj4eLfHjx9f+g8FQAtAlnomJCS4Pnz48Nx/JGBqahoGdQxZQcwGxLKLFi2q+fnz52eYob9///6/bNmyMz09PZO+fPny/j8aaGxs7MvJyQH5Vg2IJUBxDY1zgomFW1VV1eDy5cs7YIb9+/fv//fv3/8DLTu3a9euM/8JgD9//vx49OjR6ZkzZ+YBzZMj5HvWKVOmeH14//4xsiG/fv36BxQ///z589f/SQSgKPDz87NGS/EogKOsrCzgyZMnD5E1fvv27e/EiROP37t37/l/MsC7d+8eycvLG0KjDdOnoBTJysqauH79+jP/QOEKCa7/wMT0v6Wl5eqKFSsuw8RJAWfOnNkJNFsGWzCDBDiBWAmIg4qKipYCg/orSBMwQf0HhsD/hQsXPs7MzFz79u3bz+gGZ2dnb3J0dJyUmJg4G1iILARGyX5g2nj8F5TkgQkfaF44NH5xFgZiQGynrq5ec/78+Qew7AIMKlCWSVNTU6s6e/bsXWRLNTU184FyoAICFJTmQOwOxInA/NsLjJp7x48fXwE1F3+xB8Q6QBw/Z86c/cAs8wcUsqB8CsTaQBw3derUXcBQ+I2UTzmhcQfyEahYlARiU2lp6fibN2/uBbIViCmR2KHJ3is8PHza69evX0J9Ac7LIAcEBARMePHixRMXFxd3LCUSrFTTAKaHXCUlJTliCw+QQcJAbAEMQm+oZfBSC+QTSUlJdz4+PhUcZS/IEl4hISEZYC6QI6bAQA5uLqgl7FgSnwCBQgDkGHZfX18uUiyFWcCIw2BGIoKNEWohI8OIAgAdEkrM+VJMxgAAAABJRU5ErkJggg==",
a("toolbar/reply-all.gif")]},"toolbar-forward":function(){return[a("toolbar/forward.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAABXklEQVRIx2NgGAXEAUa6WmZubs7n6uoqBWRzAzETPSxljomJMfr48eODqqqqGCBfFIhZaG0pi729ved/IPj79++v3bt3zwKKKQMxBy2DnMXa2jroPxJ4+PDhuYSEBFegnAAoJCgxnAuIZYFYDQ1r6ejoZP5HA1++fHk/f/78KqC8NBCzkWupyn8ywPnz57doa2vrk5vIrP6TCT68f/94ypQpXkAzWEm11JFcS588efKwrKwsAJq4SAKWpFr2DwjWrl17ipWVNRGaokn2qSIQxwJxBRqulJWVnYFu4du3bz8XFBQsAsoHAbESEHOSk4VAQSMBxApoWMXIyCgN2cKzZ8/eVVNTA6VcWyAWo0VhAc+nP3/+/D116tRdQLE4INYGYl5aFYssLi4u7i9evHgSEBAwAcj3hOZnNlqWSMx8fHwqkpKS7kC2KRALUloKEVXLQONbgNzEQonFdK1PKQIAnghowXUWSasAAAAASUVORK5CYII=",
a("toolbar/forward.gif")]},"toolbar-redirect":function(){return[a("toolbar/redirect.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAB40lEQVRIx2NgGAXEA0Z6W8iZkpIiA6R5gZiJXpbKffr06e6kSZMygWxJIGalh6UmX758+fT///+/x44dWwnkq4J8T+sgt/rw4cPH/1Dw7Nmza7m5ud5AcSEgZibFIA4glgBiFSBWI4DDkC0FgZ8/f35evnx5PSjogZiNWEsl3r17d+M/heDy5cu7LCwsjIDm8RCTyKQ6Ojp6/1MBvH///smUKVO8iElgoOTvc/v27ceUWvrkyZNH1dXVgdAowwtAQaEKVDyTEgs3bdp0lpWVNQloljKxWQkUD15A3z6CGfIPCBwcHJYAxeuAuAKKe4Hx/wXZsg/v338tLS1dAZQLBmIlYrIQyJdc0NTrkJWVNRfZwN27d+8DipsDsQIUBwAt+YSUeB6Zmpo2AsXtgVicWB+yAzN54P3791d+//79A3qQff78+SMwyMyQ8qA1sHD48hcIFi5ceBjIBwWnLhDzkVIsgvKVFNQ34WVlZTP37NlzCVjUfYNZPHfu3HqooSBg+Pz588dJSUnTgWxfIJYHOZzUEokJGgegEkURiC2AOASIC4qLi5cdPHjw9PXr17dDgw4EpNXV1T2gjhQBYhZKizhsDgBZAApeQVh0ALEANB1QvZaBOUAAGrSsSHUp40DUqSQDAL3v89667EwpAAAAAElFTkSuQmCC",
a("toolbar/redirect.gif")]},"toolbar-new":function(){return[a("toolbar/new.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAABkklEQVRIic3UMUgCcRTH8X+QBUEIQS0FLRY01lBDk4S0tTfVYELQZNTiIlK4BFGb1VJD0NmQhg4lNqSgixkUhp1FWtEgIhbUkeevdxmSENn/9KAH3+nP4wMH7xj7hzNWR6pnHCpG2Tux25vh9S5ROxAEPQ9qVIPqW5tNd6HQNQIBEAp4PAs8qIlbLMm4CK0/ZDIZBHw+PAtCnlCDhqgMpOYgxUZw5HdjZdlR8jmdkzwgJ1oGEWEoHTI8rrXn982D3CAHqoCzFfBtlRXEKTZK+z1UL9XWYLQalLcYbENskXb7qH7K0GCUQNFSAYubDE+xoHIyM9QA1U218IC10W/g+wbDzakXiURCQS1UJ9XEC/6OSvdA0vwJSi6Gy2M34vE4UqmUgk6owWqiL7cCcO7A6/Ywzvy7iEQiUG5TlmUFNTUcFZNXcNqmcbDnop9OANFoFLlcrvKuCZpOpxEMBhEOhyGKIiRJqnrXBC0UCshmsygWiz9+ek3QWlMvamTlm7NS83/M+rWnenRUB9XFma4eVJP5AH8kM5mHjOhWAAAAAElFTkSuQmCC",
a("toolbar/new.gif")]},"toolbar-send":function(){return[a("toolbar/send.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAUCAYAAAAOTSQ2AAACyUlEQVRIx+2WW2hScRzHt2rNoFYtoqJiFiOI6IIgdCOSQkbEisiSYLOnaFCxh6JgalQw2luBRC8KTgh92RiKPY01CFbOFxdMQce84ZxsOOdl3n99/4dj7GJR7GAv+8KHg+f8z///Pb/L/29d3YbqtoK9oBWcAqf56+b/YWYb2AeOg7NA1tnZeWN4ePhFKBQyJRcXv8hksgu1MrcdHAInwHlmRqPR3HE4HOp4PD6YSiZDgJaWlqhYLFJ/f/8bjDkHtghtpB7sAi3gJLjIzOh0ug6Px/M2kUh8LpVKMYIymQzFYjGCQcrlcuwWTU9POzBeBQ4KYYaFvhkcAWfAJZFIdMVisTzEQu+TyeRIuVxeJF4sMixKwWCQwuEwZxDPuWf5fD4ll8t7MAdL6SYhzB2VSqVtdrv9MRb8iNR8Y+vQbxQIBMjr9RIiuObZwMCABfPd5stg3WoAl6empvSIEM3NzdHMzAyhqMnv9xPuk8/nI6STfkxMkNPpJJvNlh4bGytUolXR7OysF3M9AMf40li3Wtvb2xVIVYali9VNNpvlYMWdTqe5CEWjUbY4hhQLzMjk5OSKyMJoAd36GvNdFapD2d4kQ4Q+VUsfV1upFM3Pz7O6WmEG5grLf4+Ojtox1z2wW6iubFQqlXfx1dlqxlgHsk6spuXmENloU1PTI76z64UyJwLXwRPwEryq0NfXlzWbzSwiVc253e5f5tRq9Tu8c43PhKBqBHvAfnCgAva0hNVqpaGhIS6Kq4UG4cy5XK6vGH+fPy1qI4PBsICjiPR6PUvhGnfo4jyaJS6RSJ5huFSoPe2vZDKZFoxGI6lUqhFEcHC1OWw3eXyAHkNv8uds7dTb2+vt6upi3dfS3d3dUzEViUQC4+Pj37Va7Qc+neKa/+VQKBQ7lzXNLbFY/BzXp/yZ2QYk4HBN0/mH/bCZZwdvuEHIbWND/6qfbs+UKDB46vAAAAAASUVORK5CYII=",
a("toolbar/send.gif")]},"toolbar-attach":function(){return[a("toolbar/attach.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAC90lEQVRIx72WX0hTURzHbTaLxkK20IZgqVCbGcUItYdqLyr4UEEauexhMBi2XoZkhhDGAhX/tEWwepGNLXCMLcUIJCHn3JalTZatpmv+wc2tmVPv8A+o9D1xBZ+3awe+cP7cez/ne87v/M5NS0u9HIJYUDpdP9BCABwop6CgoEihUFxG/TTEpSfBeCEfzVSr1dcpivqwu7sb2dnZiW5ubo7r9fq7GDt+EEBeV1fXnY2NjYDD4XDm5ua+FovF3aOjo56VlRUvxs8wudT/gO3t7dL19fVf/f39TrQf0JAioVD4BM4plUp1A202o0A4nOnr6xtBWw6dhDKgbIPBIF9dXaUqKytv0X0pA/kajaaWAG0220hWVtZ9LK0M/SdI8Mhksgosrc9qtX5C+yIdzcwALRbLMAHGYrH3S0tLnzEmlMvlZQmK8oyNjXm5XC5xz09lT/cD58xmsx3AOgAHg8HglEgkelZTU3ObAEkQcTicR83NzVfpY5P0OczU6XT3CNBkMn3Mz8+vW15etgcCgZ+otyiVyjLEjZcA+Xz+43A4bFxbWxvGe4JknWZUVVVdIVHa09NjRwJQAOjw+/0/BAKBur6+vgLASZfLNQ6HjfPz8+ZoNDorkUha6H1OymW21+t95fF4fKjLpqenjXA4xePxnjY0NBCHk06n8yuADxcWFiyRSGSupKREi2cLk41cAj2Lj31rbW3tRv0S6v7e3t7Bzs7O6kQi4RsaGvpCgFhS6+Li4kxxcfELGng02aUlL13A7ENarbaRQI1G4zvA4kh1vwcGBtxsNlsVCoXeAhqkHYpSAe5BCycmJr7jGLwhUKi6tLRUX15ebgJQiQnZAJxB+nvOBHCv5DQ1Neng7o/b7e7AXp4jZ7Ktre1mPB4fBHAWDjWkjykgKccgCaLUiiQQwC0S3tra8m1vb8fsdvtIXl5eB5MO9ycGckVdg1qQT41SqdTAYrFeol0HnYKOHMTFzaKdkLR2HhKTo0RnnMP/4y8hnQal/FfwF6qEb/YM+6RMAAAAAElFTkSuQmCC",
a("toolbar/attach.gif")]},"toolbar-address":function(){return[a("toolbar/address.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAB00lEQVQYGeXBO2tTYRzA4d85fU+uBNq0SnVQxKKoVekncHB0dRHcFdz9EFlcFboIip/BzcHJFkq1wcWtYDXR1HN7T5LzXmzAgEuSv7gIPg/8LwLmi4AnwKMXj08jcb/TqwAlf6EN+E6n4/8EEDGHYj7FieFwSPfpAySuPXzGiRYwYAaFQFEUrNy4yCI2H/KLYg6FgNYaXIsJ7xx2nBN4x+/CahPnLBIKgSzL8L6NN2NsOSSMmjTXtwijBhP5lz2M7mPyEgmFQJZlYA1GJ1SXL1A7dQX9eZcy7xFWmrTO38KVBYPuayQUAnEcY0YpzhkaZ7f49uEVa9fvMaWP3lNb3cBbi0SIQJqmeGOor15FHx1QbZ0jVDV6O9vU1y5R9D6Cd3hXIhEiEMcxzo0wxTHBUgVT/CBUddqbd7HjnMb6TcwowdkSCYVAkiTgLcN+l+WN2+jDd/R3n+O9I/n0hqh1hvzwLTiLhEIgSRKCJXCu5OvONsuX7xBWm7hRTkDAhO7tETYjJBQCaZrirSFqNDA65vv+S6aCMGDK+wAJhYC1FtyYCdWoMMtIl0gohNKsYBFdlCRJwiIB87WBTWAFCFjMA8fAATBghoD5IqAFKOQMkAIl/5Kfv8f9CXUkBA4AAAAASUVORK5CYII=",
a("toolbar/address.gif")]},"toolbar-fonts":function(){return[a("toolbar/fonts.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAB8ElEQVRIx82VPUhCURTHsw8yLIokgiwhKihoKILImhoCa6u5xQYLzKFNw3ISRJzCIXAx/CAFRYM2M5HAJREXFUMo+7CWchBMCOx/5D6QwEV90oEf7977HufvPfd/jx0dzYcAdLNnW4LExDabbQ3PvnYI0s7GotGoPZ1O32AsacduRSqVaq9UKpUzmcwz5gugk++yzmez2acKC8zXQRefZR31+XyOSk0oFIpDrAv5EhXK5fKtb0Q+ny9zoiaT6QzvhvkQpPJNJhKJO4fDEXO73S+cqN/vD+LdBB+iQ1arVf+FwPgUwnFONBKJJLE222oHk3kWC4XCp06nc2K8o9VqLznRVCr1gbWlVjqYEkmCwaAPyd/0ev2FxWIxmM3mq1oztdrBA0ajUU3mgeg7rsojIoum8FosFn/4cHD1TuZyuQc49JrOEqjAATDAVIVWO7ja6sLhsId2h/EumANSxkYgEEj9cbC02eshViqV+1RWjUbjwXwZ9LIzpga/4nQ67znRWCxGP0zGStyQi0WhUOgYeiVKSDv1er1qJtbjcrlk8XjcT7231kzJZPLWbrev0jcNibKdHQEjUNLZsl1QQvpX2QQn4BxY6YzBNhhvVJTKO0gdCMywRP2stAImPgKmWFMgpqkvN1PeWjMJ6iQR1OH/xS/t8CqHOGxTiwAAAABJRU5ErkJggg==",
a("toolbar/fonts.gif")]},"toolbar-colors":function(){return[a("toolbar/colors.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAADTUlEQVQYGe3BX0wUBADH8R/cC5fr1nZBPpA2tniwrTmnmw0ak0gggWKG/VuGDkNIQC4IzBRKxDyMGfFHVFI4+XceCiZaWYBt5gLpKJmdy45l7OAsgUX8CU6+vfd4+NBDn4/0v3+rSlkq28YMtSQ4ZF8/tLwtZj7K/sxQSss6x5u2qIzMqjVLdR8Fqj4jXmcyLj4w8C7xI1ZyZ2s4SjPnZhvo9JTT5rRQ1ZZ88VBdRLykQC1SgI7nbVDXoYE13nayuUwarcRhJYYCdpCLjQJuUsLt0RK+/Dp9oPb4ug2SAuS34qxQ2a2Xwr3XSMXFo5xD1PAYpUSzh3x200AhvVi4ww5GRi04Wl6/dLD4yVD5yaBjZTvl7OINZhHXEd0s5yxx1LGVjymjnM85iJti5sgD3mLwWiYnKhJ3SjLID0bVH+l83DPEemYQtxE/EUsfOXzFR3TQioNBGpmkChb2wZSFMdc2Gqs2dkoyyg8mNZ0afmV6GuFDTLGMCbbhoRI3HVznO3r5nR7wnYHxSnDvhe+zaKtMGZZkkh/MarL7dgHyge7BUwuwh3lOL8zQtzDGCG58fw+Ctxtu2KC7FNotnC/Z5JNklh+CVX3K897UDLoL+gOSx6BsHC5MgGtijtnJuzAyDAN98IUdTlqhzEJHerJHUrD8YNb7tT3pbg9Bbgh3wmYnlA9A5yDccMFfv8zD4J9w2QVN58F6mLmcbBoTE3okmeUHk9JKDiR95uTFHyCiHVIdsP802DuhvwfGrwDd89A2ApXfQlEDv24p5HD0cwckmeQHo56IiVz59one7e2jRFfCq1YoLINj1XDFBneagfoFqJiED35mbrsdR7ylN25ZeKQko/xgkBTy8NM5uZveuXArdb+Xl/LAUgA1RdBVCsMfAvuA3XPMpv/INy+cvFW46uVcSSGSDPJTkKSw0FVZ+Umvfdqfnu2kINNDXc4MPXngypnmt4xhbm7uozm2tj93ZVq+pDBJQVqEAElLJIU9+NDqpKjIXdVbnv/kalGKzXs0pfVea2KD98izFVf3ri2oXvvI6iRJYZKWSArQIgVKCpIUImmFpAhJsZISJMVKipC0QlKIpCBJgbqPDJKMkkySzJKCJZklmSQZJRn0X/YPspo51N3JVx4AAAAASUVORK5CYII=",
a("toolbar/colors.gif")]},"toolbar-save-as-draft":function(){return[a("toolbar/save-as-draft.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAACHElEQVRIic2Wz2/SYBjHibLDTp68Lc6Tdy8e9LCDxkSP/hdLDP8BCYknY2JMvPFPqCcPJJi5TMWFDQfIgA1taSmswIpApaPl6/N0paEwFtZy8Jt8k74/nvfT93mfvG0o9B/qNvkB+fEc89gN8jVymLzi+LrTd2Vx0AbmqNbqIVNSIMtyKxqN3r1kjSuJ3/zhRcB6u4/C7xZ2MkW7LYpiLxKJ3Pezs2lxmp5Mwiyy0PiD45qGstTG5928O7YsMEOfjhc1rRFK0imqJ11I5GZHx9ZuzpMBQRCMKfCKb+hfw0S2otrnODRH+Ck0MaSX+JTKzqSezrgfi8XuOWuEfUE73QHSxQbUU/180WYPVbVrPye/zkLtIqvVuhR7x/dOUwUFWs84P1Pa3Y9jFcaZabcTOwfzihsU+8g3VB+Y7kIKVW1Z1tx2MlXAu/cfEI/H8eLlG7x6/dZ+ZnOsb+hk5aZLDXR1w4V+y0tQ6g1IkoTiUQUftzMQ6ZnbS4Gqmo79I9WTwu+HCs5My23vlU/o7Pvj9AaH8i7r7Z4H+iWv2NU8Fo/zvKVAO1RI2zkZFrzivkmo5fTx/MBQTmtF0TCtrQOJ0jvy9PFtxfMDQfXBEIk9wbOjsZL7Vc+Zsngezw8C3cj+aiJHvkiJtDgDZfF8jvUD5StsnfyMvEl+vqA3nZj1kI9rkL+Fq+Sb5DXyrQW95sSshgJ8yCf/CBZ1+DLgP/Sq/+2+nMTKAAAAAElFTkSuQmCC",
a("toolbar/save-as-draft.gif")]},arrows:function(){return[a("arrows.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAABAElEQVQ4y62UvQ2DMBCFvQFsQDYzm5gN0kQCV6YBpDQ0MS2jMAIjOGfACrbOPhd50quwPt3POxi71E3L2qr5wQgZY1Yw+Y7JaTGHx6V/qrlMAJ16cEkDD6je20E3GNj42sENCvaAl2EMG4DrBNBpA9ck8GctCKCTICuU44dnVsiTM7RVSfkuMmYowEV0ht2kFQZCgAoF3XP4GnSVmUPy3f9kK0tt2H6/VZbS8Y7ZNlNANwbbJgGsblXCItDqtArmpyIw5W8YtnpGJYhOsG271SsqYXSw2EDuItcRQEX0OpAFbe5CiOhs7kLSvzA4s7Nd/9wQIL+APOO/qEVO3GKtfgEB6EwzIYKPOgAAAABJRU5ErkJggg==",
a("arrows.gif")]},"tree-selected-bg":function(){return[a("tree/selected-bg.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABJElEQVQ4y61UQZLDIAyTZrhu/3/sD/YjfdIi9QAhxoGmh80hEEMsydaYz9+X8Y9PeTx+wPFJAO4rYBgEYXhxuogQKJJhr0mShC2QHcDusb2oIilgOqAC7T8j/h+TZQUAUP6qdgJS+oVkErDa2hlMksnGKpyP2NdNqdLJyGkFQH9guKvhkSAzvGhOz6UkTE2xWjYrICgirJOOvYxSq3N4sffGlxyx0OWafOcPviOAU9GRmgGwtMucPHYm8PDiSoE6oIJLSq06r6QqX2x050sQRRN4Pz6Y9lcEdMjojujRNPUa7hglY39j/GJ5rk5mFMqWjZ/3ocvcTJs7Rteqllo1zbN5OuQM1/nX7pwAxQYMrXzcjGsN4xrqZl7fB5gl3xsj+nA10d9McATavUOaqgAAAABJRU5ErkJggg==",
a("tree/selected-bg.gif")]},"mb-sent":function(){return[a("mb/sent.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACBklEQVQ4jb2TTYhSURiGbZh+mZSSYaJBahVMUTqLNrlr1aYhksjCoEWzEVsG4qaYAjctgyBbmMigC5PxD2lr/lQgJDjXjZAi+ANqctPR8V6/3nPnKLepIWjRCw/34P3e777nO0eN5j/rKNCpuPQ3wzxYAIvAAM4lEglzp9N50e/3P9hstmv7DXPgBDgNlpmBPQVBuDkcDl/KstwVf4g0GAwom82+2Z9ggRsMVqvV0Gi17kqS9I6I+oB6vR7VajXCl2k0Gn3T6/U21J6amZ1O52q9Xneg9hMYEddYGlOlUlHMbM3k8/mew3NVPZjVQCBwOxaLrW1FtzaCweCraDQa8Xq9nwuFQovFngpJPqL+Djg+bXAhmUyuIxaJokjd711qt9tULpepVCrJqVSKVJJcLteTX/aOvaxMJpOv0woMSomLwY0bjQZlMhnCAJV31Wr1PSy3+OnMdB3cM5lM6/F4XI5EIuT3+ymXyynNisUiNZtN5u+YzeZHfNB/FkwxFjkcDtO2IOwyFwarJMrn829RcgMcOrBBKBS67/F4yG63f0mn05uswc5wh53CtlarfcAv1G9iHY8AndFoXLZYLK+xvuxwOJ5N5+J2uzfw25pm74Kd5Cc3p27Abt8SOA8ugivgIXgK2JcfgxU2c147r94KWxwGxzR7f5DZFQZnwRkeXceTHjyDf9FP6cxD9Zp6oCUAAAAASUVORK5CYII=",
a("mb/sent.gif")]},"mb-inbox":function(){return[a("mb/inbox.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB1UlEQVQ4T62RTUsbURiFg4i7EBTp3v6FIi5KiP+gLV249j+0m+66qHSpVFBwZZW6SMSYtLQ2KY5KTBkTyKeJaSedJMaJkXQ+AmkyzXi8b0jC5KNIoC888N73nnO4HxbLf6wJxiPG7D2QZnxYwINAILAiSRL+VbQXjUZ3mXZqwO1yuZ7ncrmzcrmMhZfOodBeUSoW97x7T/v94xzHvapUKs14uoAXbw+HEknkwTTgef4184yZA6bP0+kNRVHg5VJYdkWw6kn08G4/gU9BAaQRBMHJPJNdt9vtfiYrMq9qVay5Y1j/nMLG14tBDlKQFQ2yLMc9Hs+Tjn8sFAotqaqaT+dumDCD98cCI9vD1kkWm0cCkuINtKpWCYfDbzrXsImiuNNoNOCPF7EdFLF9+gs7fL6HzsyXkEDaQqFAv2GjgIe6rpfM3/UtJWE3dtUDzfqLeWcoYM4wjOp38TeIZEnDh5MMjn+U4M9ct6CeZrTX0bF34MhrsVqtjyktL9e6+PgsuPMrfIxdtqCeZmYNFXnpBHZalLR6l8tyFb7gTzi/JFtQTzOzpn0FOwU4aCHX9C5q/S/+NA0Yt2hBPc3MmnaAgwLmaVHTmyPRDpi3tI+xwFgcEfLY7wCqtGPkrXAP2wAAAABJRU5ErkJggg==",
a("mb/inbox.gif")]},"mb-trash":function(){return[a("mb/trash.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACdUlEQVQ4y4WTTU8aYRDH99IP0VN76Sew6UFDiBcS+4JBJQKuScOyVViBQC0IS3lTlqUJoEINarGtEkkTTY3WphfTNDVtSloubQRUhAWe8VTTj9BZD22ihU7yP2ye+f9mnplnKepvXEkkEjpBEJamp2eKk5OT0tjYGJjNZuJ0PmxEIpHvqVRqE8XIudTFiMfjOYvF0jKZTNBJHMe1RDH26hLA5fI05ASapqGvrw+0Wi0oFArQaDTQ29sLer0eBocGzyEej6dxCZBMJj/p9QbS09MDOp3uj1n+lo1KpRIMBgPg1Ug2my1cArjdbu/i4iJEIgIYjcy5uavrJqhUKtlMGIYhWBmSiRSk0+kQ9a/w+/0kHA43dnZ2m8VikRQK30ipVCblcrmZz+el2bnZGnYKVLvAqUuiKBzhJo5Xnq9U0SBls8+qaKplMplqNBqthUKhjoCS3W6vxWIxCSH1jY2NYzRJa2trdVEUmwiSAoGA1BZgtVo/Y0LJZrOd4L7rPp9PyuVyh4IQqcnt47mEHRy2BWD1XZZlj7DaCc5DWl1drfI838I30nA4HE25OkKLbQG4opdTU/zB6CiDV3hCHA4PBIMi4TgbwcdD8FVKOOQ3bQFery9z987Aj4mJR3UTYwEfPwNOhxdXmwQL5yQmhqsEg9P5DgA/zxjHv6jV2qrV6mqOjLDAMDZQq3XAPrC0+vsHK/Nz6XhbQHe30ry99fb9wsJShWXHWzRtJC43D/NzT2F5+UVzZ/vdEU3ff0x1iOv4L9j39j7sbb3ePdjf/1o7Pf15cvbrrLy+vvlxeFgfxZwb1H/iKuoW6jZqADWEuodSoK5dTP4Nv1tkKI/PLDEAAAAASUVORK5CYII=",
a("mb/trash.gif")]},"mb-drafts":function(){return[a("mb/drafts.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABlElEQVQ4T42SW07CUBCGG12DqyDeXnnABbgDN+BqgBXog0++QeHRBDUQEyRACDe5RqAXoFAqFKTcxpkjbWwLxD/509PMP1/nnB6O+9XZHnvQp+gT9BF3QJewQ9lSvUBPVVXFQCDgOQTxOptlVYfX95L1PhwOpUMQnxlco1u9MTREDRKpog2Kk8j7IAywWm+gKoyg3Z9AByH5ch2cwkm6fr//HHuObYBvYwX5pgLSUIflagPFTwVa7Y4LYEKCweCFDZCu9KA/mrGAONBxijEIgrATQKLt2ACabrDCGreRaygwN5bQVxR4TiQhFOLh7uEReJ6HSDQC0Wh0EA6H720AkyyrU6jhAZIWiwXEkmU2STxVgkyhxtaSJAH2XLsA9AfS1R5MZoY1aqrSZc/xdI61LsuQsOfKBVC0GWTrCvxV8kO21lSjzBbgcwHo6/JItwHeipK1phpldgK+8BDjBdEa0VQ8L1prqlGGsi4AjdeUNXDqJWe/Cw1JY1txAZ4yLXaBnIpl7QDKUNYJ8KJv0Lf/9M22h/sBFOp0+67glEsAAAAASUVORK5CYII=",
a("mb/drafts.gif")]},"mb-folder":function(){return[a("mb/folder.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABvElEQVQYGQXBMauXZRgH4Ot+/u85uEaFBCHi4GKBEQ62eIZaGnLWST+Bn6HFwa0PEPgFgjhDiw46OUjg4ByOQYNUyvG87/vcP68LAAAAAAAAAECBr3764frJrXsA8OrZ88denz4BAAAAWOD6ya17D+7cvgtB4Re8en36BAAAAKCu3v/54Zeff3ry43c3LlcB8MeLl2/goEABygCtvfn7n+fLpc8+ufnowf2bEkAzhpNvrn2xZSdszZpJx+zoDo48+vXxusDb/9/TE9AYumPrXaG7nKeloxNzxhjH2rBs+7r/dzZV7QYUSZuJ7ujQpoSEdLSWPea+bcue9Fqx7NOsEiREJFRiNkkEnQi66JYlM+bGnE0VSEhiiiQSWqRJSGFMWzrLrr1dpws9BQCNDt1tKJ1oqIC9j43uWjpjbOfnph0EkBDRDUBQgDlWa41aZiz/btNRdqWAEEASOxaAQtocQ+RoaZyds2UXw8QoMjmgDwRHCIJDWJeSZqnurOsH1WdaaQRpGgYNgGBim0hneffh7P1vp7+/UBQAAAAgAAGOq9/VlW+/v/TXn09XHHDAAQMDAwNBo9GYmBe/vnH8EaMMKbkNQ17cAAAAAElFTkSuQmCC",
a("mb/folder.png")]},"mb-folder-empty":function(){return[a("mb/folder-empty.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABOklEQVQ4jaVRO26EQAxlJhPOQIVWXIKWJg1HSJWWgisgqpwjEoegSBFSRVwCbcMNAkh8d94EI+9I+axiyfPx59l+dpx/isARhuFDFEVP3FFV1Utd16+/ASgcSE7T9NF2/gVAJEny7HleFMfxiTvKsjybACG+TW7b9t3J8/xtu1GWZTF3lmWVIrR1Xc2t7aYq7nEcj2p4w4Y4qFJfqWqaprnve2Pk7eoqxkZJBE72PWZS+rPO83wAIIiC6W0lcdumqAJvl0bi1elPoLttU6jedd0RQELBvDMCI7/+CzAhh2G4cnIAtCqlvCKaRtB+gREUSCT2OQAHsn07F/dmF3oTDkax18iT0AWBUUdmjSACIwDkFnFdF11sSid3RVF8UJWfxOZJx3+KIAj8pmmwwzum0lIQsjIFAYvv++4FKBNU/tlKtPcAAAAASUVORK5CYII=",
a("mb/folder-empty.gif")]},dragging:function(){return[a("drag/letters.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAECklEQVRYw+2W/2sbdRjHa3W4IZu6yfxl/4A/+R8IMkEUhCn4k+4Hf3V0DFxBKyVFa7vYmrSrZnkimfGWLPR6Np6JabOV5kaIhqMhEALhIBwcB+HgOAgH4SAcnM/zaYnp9yxr6i8GXtznPvfl/c7zfD7PcyMj//+e4be1tXXmPzUQT69dnbv/8NNTF15fX784E+GvBzkxJDwuwp1wfJ+JqampF5Jr0oc4fO7EDfy0nP4gsvLoXqfTAdd1gScToX9NpB/9dXUymgoupSR48uTvN05MuFCtvhp6mL4WFnLfG6YFitaCbEEDx3EgmZUguvLHmD+R9vFSGZyOC03LhrnEmo/n+XMnYiCYWPkomnoMDd2AYqUJXy7J8EWgBLlCA0RJhrAogdFqg+d5UNY9diQzFJFnEqZ8RpYz7/4QF/26YeI/t8AX2hYPJIowm8hCVTWYoNryYD7VBl9MA7nhQdvpgO8XMZjP518ZSFwUxfMzkcT1xUQGSJzC3bLbEOBK4ItmICvXmDBhOR4TngjX4ZuYDv6kgWnwYLOswAMx/8lABu7/lnln/tfU3ZZtM3EDTcQw31yuBJbd7ooTHdeDAK/CNNeEyZ8VjJAMUsXGeRf8GKVsPn+lb+GNjY1LC9zqx8GYGDQtC2wUyxUrKJCDmmbsEqaI2GiODNR1hwlPhstQqJgsBUSppsJC8s+blM7+Fhy3veBotctVBcMqsHDb+DISdREHBU1cdIqqISoYuOqbeL+wieOWjdd2Q+ZX05tvHise5n5/fyGxekeu1mGWEzHkRdAMC1qOi3lG2h0wbIeteLVpQk1RoVJvsHv0HrQ9lBUNvg4nv53juJeONBCI8bCEbueTWZDxIc20Qbfa+BIbVKMFjaa1jY47ArdkTdWhjmmhsaIdTUjYhHu4ow4RFuC0wOJ0cZf4d5HUe1TNehfXsEhmCzCxGB/rio8H42OzXBa4jIS13QNd16FUksHEBUVHRWmw+UG4Nl7t8tm8y+ZI51bwwe2ugekfl9/6CoRQVJRYc9E0HcVNBo3JEM0PAon2QnOksy//n89Eboexe1HROEn2RoDmSGd/vb8bv0Ltk7qYivu6iRWPKBZL3XO69rTsjQDNhYQDDNCHQ0CQBhJ5WhYPMTDi56Vu6TyKSrXGImJaLTZuYBUk+nmWIJ0DDUwnJVZqhw3pHGjAl0ADbedY9KYBKu6OcqXGxhQFmqe+0c/zpHOggYmYhC3WORaVyi/Wf9YDanV2To2I6n8/z09whxgY79PAYZCJfu4jnX07ABm9FZXAxBuGDemg3vO9n+yjyNkbZABb7LC5sW3g3I4uc0FfKRfevrkIpwXqvbyj2zVwHnkNuYy8PkQu7+hcQM70poBOXqRUnBKkN/oPxp1z+wD30VMAAAAASUVORK5CYII=",
a("drag/letters.gif")]},"dragging1-2":function(){return[a("drag/badge-1-2.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAC80lEQVRIx7XWX2jWdRTH8demubKpNIug/xeLMiWoiyCUtSn0V6Sx/lwWYtGNBZlsVIh0tQ2TIYYlQcYIo24EFxWGXdQa1kqSRpFr5uY298z5PM+e7Vmzp3272O+3trn/rgMHzpcffN+/8znnd86P+dvSyBffNnL7J7wIdeysYyd8yrZS7rhiQD0VWygroyLHyCEOtHLuDJ2HOJBjZCNPP0XpYbbOW5oSbkXBUQ5nyTXTkiYMEVKRDxHShJP8liXXwBEs38Btc5W2oJGGZppO0TpAGCBcnMYz0fOTnG6mqZEvUDATIH8dN+Lm9/goEPpnAEz2fkIgvMvHuGU9N2HJlKR9VHcz1EZfah6Q2FOENvq6GHqHmukyWrKG8g4GswuAxD5IaCe7hnLkTyCspbCJgy20djKcvALQRUIHw6f441s+KGLleFbeZl6Ni7uQy/si743OCUIFVROyepDiXdT+Trp/gZALESQRxb+S2U3deu4aA73O9iTDmUWAnCd0R3E3f1fy2phsWPUCezNR51wpJAZtYx+KIgav8GyCVGaBkJ5xkE7COULXaPdlqnh+TLr7eOwtjp5hsH+RIC0MvcFnD01q8/zHeSlBrn8OkFiqGNI1DtIexW2MPMH2CXPvOlYd48gvDJ4nl5ylfWeCtBNO808T2QaOrRyt0Zhdi7X38HI72cFZit4TSRVDOiLA2f9k++tudizjXhReNoPq2JscTftScpbOmgpylvAzl9oIe9g/3ay7qoSHV/NcDZ/H07t3CkgsVQz5M4pThGqO38DWTTw53brIi0t2nG++48IJEmlCcgZIfP6a3i/pa+AHXB/dlz/TXlrxAOVLebSer9KE70n1RBJ2Rp6IYI2kOwn1NGHz/Txj0iCddgFGb3P1Dt7cQm0ZtQOE/TT/SPInUtWc6CNs4u1HqKliD1bMJZPL9lM0PgrvpGQ3B1FSyYeV1GPDLt5fR2nUWasX4zfsmtHPzbICigsojgpdhOX+J8sb1zhztn8BfjnSqGxySMwAAAAASUVORK5CYII=",
a("drag/badge-1-2.gif")]},dragging3:function(){return[a("drag/badge-3.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAaCAYAAADfcP5FAAAED0lEQVRIx7XXWWzVRRTH8Q+byF4FRBQRDa4YICIhJpDIC0QjAZQI0QcVVIwPilFR0CjERAUNgWgxKqtRA4Kg0QdAYlzKVlCQtmyFQoGyFbqXktY6PtxpLaW3QIFJTs7cuZP//3vP+Z0zc7n40Qot47x19C2TrLVyJcZobl/IeJjPO2/wTC+uT2dJT675gJdmMKkXKeksuZnuk5nwBdNgIU+N4M5LBvmKscMZMpKnq6ieT+oh8newezlfVxGWsDib3L0cXMqiKsIKvsli12FOzSf1H6pHM344Q77jOTS7GI6WA7kJbVazoozKP9lZQqggFBKKCWWEguiLotVdK457KwglhK3sKaZyDavQYQA9LzSlbTezehPrt5NTRiglnIovq7HCej7ZWgHhZAQsImwjJ40N6/gV7RoDaX4P3dBjEctC/GUFl2CnouUTThCOx/kZwjx+aEPPQfSoUxBnj1Q+PELFfgqKLgPMyXowxwhHomVSmE3FLOYki1CLvozJ40z5FYA5GkEOEw7Fz7up7MO4GKH/hX4tHTcwL5N9R6gsvIwwxxqAySUcIOykaj25v8T2cZZ+RvNa4SXqJhlMXoQ5GGH2E3Lq+Ed5G81raQZx2zQ+2kNJyWWAOX4BMHuj30L5VFL70acW6E0mFVFZeplhDkerSdF+wj5CNmFPQkMhO2H/vsJbNTpqhpTnmVMae0VTYOqLNy/q5WAjMLvi2ng+R+daYb/M4/kUlzQBpqGyPh/MroSgQ1b0GZS/zsTalN3HQ9P56QCni5vY8JLB5JwHZhNnJrPmAcaiRW2VjeCFfKpLmthj8qIdrKOZfY3AZEb/N2EEr8ZzLZGyXqSs5cdMyo9TXXiJPaYmRXvr6WVnBMmItoXqtVQsZ117rqvbh9qhT18mJevUF9tj9sbI1MDsiBHJiFHJIqRTdTdTcC86nHN2fMKcgsRDz+rWDcEcaSLM9giURuVfhPeZn+wsu+p+hnfmydmsrTntTzbQY+rC5EbLSZKm+pHJiHtnkNaNZ4fyGNo2BFRzuHX5nY1/cGIL+SWxNx1L0vByG6ik3VEvO6JmtkefSVhF4UoKVpKF7vG9zRu7F3UayCN4cCm/FSfEV5QfU1dzfTgaKymvTqoO1Gl2u2JksiPIz5RmEb5kWwtG9ecJ9Q7UpBe1SN1mKtOG8d4oPi4nzCY9g7I0TsxhyynCLDanUbCRwplszkvs27qKExs5PZ30fYnS/mwoM6cwN4KcNzLn3I8SNxPtBjBsKp9i8Lt8O5HUroxZxtYOjHyRBZNY3IGRS9nWhXETmDuN7zF4Mgv68XCspK5Jb4gXMdoiBa27cMfV3IKUG+mPjq3p3Zre6HRDooRTOnFrZ+6K/9M6o70rNJolmV/o942O/wCWgGlL1BxZXgAAAABJRU5ErkJggg==",
a("drag/badge-3.gif")]}},templates:{"table-header-cell":function(){return new uki.theme.Template('<div style="position:relative;border:1px solid #CCC;border-top:none;border-left:none;font-size:11px;line-height:13px;font-family: '+uki.theme.style("fontFamily")+';${style}" class="${className}">${data}</div>')},"table-cell":function(){return new uki.theme.Template('<div style="position:relative;margin-right:1px;height:100%;font-family: '+uki.theme.style("fontFamily")+';${style}" class="${className}">${data}</div>')}},
styles:{fontFamily:function(){return"Lucida Grande,Arial,Helvetica,sans-serif"}},doms:{resizer:function(b){var c=new uki.theme.Template("position:absolute;width:7px;top:0;right:-4px;height:${height}px;cursor:col-resize;cursor:ew-resize;z-index:101;background:url("+uki.theme.imageSrc("x")+")");b=uki.createElement("div",c.render({height:b}));if(!b.style.cursor||window.opera)b.style.cursor="e-resize";return b},"splitPane-vertical":function(b){b=b.handleWidth==1?uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;width:100%;height:5px;margin-top:-2px;cursor:row-resize;cursor:ns-resize;z-index:200;overflow:hidden;background: url("+
uki.theme.imageSrc("x")+")",'<div style="position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;background:#999;width:100%;height:1px;left:0px;top:2px;overflow:hidden;"></div>'):uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;width:100%;height:"+b.handleWidth+"px;cursor:row-resize;cursor:ns-resize;z-index:200;overflow:hidden;background: url("+uki.theme.imageSrc("splitPane-v-bg")+") 50% 50% repeat-x;",
'<div style="position:absolute;left:50%;top:50%;margin:-2px 0 0 -2px;width:4px;height:4px;background: url('+uki.theme.imageSrc("splitPane-x")+') 50% 50% no-repeat"></div>');if(!b.style.cursor||window.opera)b.style.cursor="n-resize";return b},"splitPane-horizontal":function(b){b=b.handleWidth==1?uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;height:100%;width:5px;margin-left:-2px;cursor:col-resize;cursor:ew-resize;z-index:200;overflow:hidden;background: url("+
uki.theme.imageSrc("x")+")",'<div style="position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;background:#999;height:100%;width:1px;top:0px;left:2px;overflow:hidden;"></div>'):uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;height:100%;width:"+(b.handleWidth-2)+"px;border: 1px solid #CCC;cursor:col-resize;cursor:ew-resize;z-index:200;overflow:hidden;background: url("+uki.theme.imageSrc("splitPane-horizontal")+
") 50% 50% no-repeat;");if(!b.style.cursor||window.opera)b.style.cursor="e-resize";return b}},styles:{base:function(){return'font-family:"Lucida Grande",Arial,Helvetica,sans-serif;'},label:function(){return"font-size:12px;"},button:function(){return"color:#333;text-align:center;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,0.6);"},input:function(){return"font-size:12px;"}}});uki_mail_app.theme.backgrounds["toolbar-button-full-disabled"]=uki_mail_app.theme.backgrounds["toolbar-button-full-normal"];
uki_mail_app.theme.backgrounds["toolbar-button-left-disabled"]=uki_mail_app.theme.backgrounds["toolbar-button-left-normal"];uki_mail_app.theme.backgrounds["toolbar-button-right-disabled"]=uki_mail_app.theme.backgrounds["toolbar-button-right-normal"];uki_mail_app.theme.backgrounds["toolbar-button-mid-disabled"]=uki_mail_app.theme.backgrounds["toolbar-button-mid-normal"];uki.theme.register(uki_mail_app.theme)})();uki.data={};var Q=window&&window.JSON?window.JSON:{};Q.stringify||function(){function a(j){return j<
10?"0"+j:j}function b(j){e.lastIndex=0;return e.test(j)?'"'+j.replace(e,function(l){var p=f[l];return typeof p==="string"?p:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+j+'"'}function c(j,l){var p,m,o=g,n,k=l[j];if(k&&typeof k==="object"&&typeof k.toJSON==="function")k=k.toJSON(j);if(typeof h==="function")k=h.call(l,j,k);switch(typeof k){case "string":return b(k);case "number":return isFinite(k)?String(k):"null";case "boolean":case "null":return String(k);case "object":if(!k)return"null";
g+=d;n=[];if(Object.prototype.toString.apply(k)==="[object Array]"){m=k.length;for(j=0;j<m;j+=1)n[j]=c(j,k)||"null";l=n.length===0?"[]":g?"[\n"+g+n.join(",\n"+g)+"\n"+o+"]":"["+n.join(",")+"]";g=o;return l}if(h&&typeof h==="object"){m=h.length;for(j=0;j<m;j+=1){p=h[j];if(typeof p==="string")if(l=c(p,k))n.push(b(p)+(g?": ":":")+l)}}else for(p in k)if(Object.hasOwnProperty.call(k,p))if(l=c(p,k))n.push(b(p)+(g?": ":":")+l);l=n.length===0?"{}":g?"{\n"+g+n.join(",\n"+g)+"\n"+o+"}":"{"+n.join(",")+"}";
g=o;return l}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g,d,f={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;if(typeof Q.stringify!=="function")Q.stringify=function(j,l,p){var m;d=g="";if(typeof p==="number")for(m=0;m<p;m+=1)d+=" ";else if(typeof p==="string")d=p;if((h=l)&&typeof l!=="function"&&(typeof l!=="object"||typeof l.length!=="number"))throw new Error("JSON.stringify");return c("",{"":j})}}();uki.extend(uki,{parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=uki.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))();else throw"Invalid JSON: "+a;},stringifyJSON:function(a){return Q.stringify(a)}});(function(){var a=+new Date,b=/=\?(&|$)/,c=/\?/,e=/(\?|&)_=.*?(&|$)/,g=/^(\w+:)?\/\/([^\/?#]+)/,d=/%20/g,f=/\S/,h=function(){};uki.extend(uki,{globalEval:function(m){if(m&&f.test(m)){var o=document.getElementsByTagName("head")[0]||
document.documentElement,n=document.createElement("script");n.type="text/javascript";if(uki.scriptEval)n.appendChild(document.createTextNode(m));else n.text=m;o.insertBefore(n,o.firstChild);o.removeChild(n)}},scriptEval:false});var j=document.createElement("script"),l="script"+a;j.type="text/javascript";try{j.appendChild(document.createTextNode("window."+l+"=1;"))}catch(p){}document.documentElement.insertBefore(j,document.documentElement.firstChild);if(window[l]){uki.scriptEval=true;delete window[l]}uki.extend(uki,
{get:function(m,o,n,k){if(uki.isFunction(o)){k=k||n;n=o;o=null}return uki.ajax({type:"GET",url:m,data:o,success:n,dataType:k})},getScript:function(m,o){return uki.get(m,null,o,"script")},getJSON:function(m,o,n){return uki.get(m,o,n,"json")},post:function(m,o,n,k){if(uki.isFunction(o)){k=k||n;n=o;o={}}return uki.ajax({type:"POST",url:m,data:o,success:n,dataType:k})},ajaxSetup:function(m){uki.extend(uki.ajaxSettings,m)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",
processData:true,async:true,xhr:window.XMLHttpRequest&&(window.location.protocol!=="file:"||!window.ActiveXObject)?function(){return new window.XMLHttpRequest}:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(m){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(m){function o(){k.success&&k.success.call(y,
D,u,v)}function n(){k.complete&&k.complete.call(y,v,u)}var k=uki.extend({},uki.ajaxSettings,m),q,u,D,y=m&&m.context||k,E=k.type.toUpperCase();if(k.data&&k.processData&&typeof k.data!=="string")k.data=uki.param(k.data,k.traditional);if(k.dataType==="jsonp"){if(E==="GET")b.test(k.url)||(k.url+=(c.test(k.url)?"&":"?")+(k.jsonp||"callback")+"=?");else if(!k.data||!b.test(k.data))k.data=(k.data?k.data+"&":"")+(k.jsonp||"callback")+"=?";k.dataType="json"}if(k.dataType==="json"&&(k.data&&b.test(k.data)||
b.test(k.url))){q=k.jsonpCallback||"jsonp"+a++;if(k.data)k.data=(k.data+"").replace(b,"="+q+"$1");k.url=k.url.replace(b,"="+q+"$1");k.dataType="script";window[q]=window[q]||function(K){D=K;o();n();window[q]=undefined;try{delete window[q]}catch(S){}L&&L.removeChild(G)}}if(k.dataType==="script"&&k.cache===null)k.cache=false;if(k.cache===false&&E==="GET"){var C=+new Date,V=k.url.replace(e,"$1_="+C+"$2");k.url=V+(V===k.url?(c.test(k.url)?"&":"?")+"_="+C:"")}if(k.data&&E==="GET")k.url+=(c.test(k.url)?
"&":"?")+k.data;C=(C=g.exec(k.url))&&(C[1]&&C[1]!==location.protocol||C[2]!==location.host);if(k.dataType==="script"&&E==="GET"&&C){var L=document.getElementsByTagName("head")[0]||document.documentElement,G=document.createElement("script");G.src=k.url;if(k.scriptCharset)G.charset=k.scriptCharset;if(!q){var W=false;G.onload=G.onreadystatechange=function(){if(!W&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){W=true;o();n();G.onload=G.onreadystatechange=null;L&&G.parentNode&&
L.removeChild(G)}}}L.insertBefore(G,L.firstChild)}else{var O=false,v=k.xhr();if(v){k.username?v.open(E,k.url,k.async,k.username,k.password):v.open(E,k.url,k.async);try{if(k.data||m&&m.contentType)v.setRequestHeader("Content-Type",k.contentType);if(k.ifModified){uki.lastModified[k.url]&&v.setRequestHeader("If-Modified-Since",uki.lastModified[k.url]);uki.etag[k.url]&&v.setRequestHeader("If-None-Match",uki.etag[k.url])}C||v.setRequestHeader("X-Requested-With","XMLHttpRequest");v.setRequestHeader("Accept",
k.dataType&&k.accepts[k.dataType]?k.accepts[k.dataType]+", */*":k.accepts._default)}catch(ca){}if(k.beforeSend&&k.beforeSend.call(y,v,k)===false){v.abort();return false}var T=v.onreadystatechange=function(K){if(!v||v.readyState===0||K==="abort"){O||n();O=true;if(v)v.onreadystatechange=h}else if(!O&&v&&(v.readyState===4||K==="timeout")){O=true;v.onreadystatechange=h;u=K==="timeout"?"timeout":!uki.httpSuccess(v)?"error":k.ifModified&&uki.httpNotModified(v,k.url)?"notmodified":"success";var S;if(u===
"success")try{D=uki.httpData(v,k.dataType,k)}catch(Z){u="parsererror";S=Z}if(u==="success"||u==="notmodified")q||o();else uki.handleError(k,v,u,S);n();K==="timeout"&&v.abort();if(k.async)v=null}};try{var $=v.abort;v.abort=function(){v&&$.call(v);T("abort")}}catch(da){}k.async&&k.timeout>0&&setTimeout(function(){v&&!O&&T("timeout")},k.timeout);try{v.send(E==="POST"||E==="PUT"||E==="DELETE"?k.data:null)}catch(aa){uki.handleError(k,v,null,aa);n()}k.async||T();return v}}},handleError:function(m,o,n,k){if(m.error)m.error.call(m.context||
m,o,n,k)},active:0,httpSuccess:function(m){try{return!m.status&&location.protocol==="file:"||m.status>=200&&m.status<300||m.status===304||m.status===1223||m.status===0}catch(o){}return false},httpNotModified:function(m,o){var n=m.getResponseHeader("Last-Modified"),k=m.getResponseHeader("Etag");if(n)uki.lastModified[o]=n;if(k)uki.etag[o]=k;return m.status===304||m.status===0},httpData:function(m,o,n){var k=m.getResponseHeader("content-type")||"",q=o==="xml"||!o&&k.indexOf("xml")>=0;m=q?m.responseXML:
m.responseText;if(q&&m.documentElement.nodeName==="parsererror")throw"parsererror";if(n&&n.dataFilter)m=n.dataFilter(m,o);if(typeof m==="string")if(o==="json"||!o&&k.indexOf("json")>=0)m=uki.parseJSON(m);else if(o==="script"||!o&&k.indexOf("javascript")>=0)uki.globalEval(m);return m},param:function(m,o){function n(D,y){if(uki.isArray(y))uki.each(y,function(E,C){o||/\[\]$/.test(D)?k(D,C):n(D+"["+(typeof C==="object"||uki.isArray(C)?E:"")+"]",C)});else!o&&y!=null&&typeof y==="object"?uki.each(y,function(E,
C){n(D+"["+E+"]",C)}):k(D,y)}function k(D,y){y=uki.isFunction(y)?y():y;q[q.length]=encodeURIComponent(D)+"="+encodeURIComponent(y)}var q=[];if(o===undefined)o=uki.ajaxSettings.traditional;if(uki.isArray(m)||m.uki)uki.each(m,function(){k(this.name,this.value)});else for(var u in m)n(u,m[u]);return q.join("&").replace(d,"+")}})})();uki.data.Observable={bind:function(a,b){var c=this;b.huid=b.huid||uki.guid++;uki.each(a.split(" "),function(e,g){c._observersFor(g).push(b)})},unbind:function(a,b){var c=
this;uki.each(a.split(" "),function(e,g){c._observers[g]=!b?[]:uki.grep(c._observersFor(g),function(d){return d!=b&&d.huid!=b.huid});c._observers[g]&&delete c._observers[g]})},trigger:function(a){var b=Array.prototype.slice.call(arguments,1);uki.each(this._observersFor(a,true),function(c,e){e.apply(this,b)},this)},_observersFor:function(a,b){if(b&&(!this._observers||!this._observers[a]))return[];if(!this._observers)this._observers={};this._observers[a]||(this._observers[a]=[]);return this._observers[a]}};
uki.data.Model=uki.newClass(uki.data.Observable,function(){this._fields=[];this.init=function(a){this.update(a||{})};this.fields=function(){return this._fields};this.update=function(a){var b=[],c={};uki.each(a,function(e,g){var d=uki.isFunction(this[e])?"_"+e:e;if(this[d]!=g){c[e]=true;b.push(e);this[d]=g;this.trigger("change."+e,{model:this})}},this);b.length&&this.trigger("change",{changes:c,fields:b,model:this});return this}});uki.data.model={_newProp:function(a){return uki.newProp("_"+a,function(b){var c=
{};c[a]=b;this.update(c)})},addFields:function(a,b){for(var c=0;c<b.length;c++)a[b[c]]=uki.data.model._newProp(b[c]);a._fields=b.concat(a._fields||[])},newLoader:function(a,b){return function(c){c=c||uki.F;if(this["loaded."+a])c.call(this,this[a]());else{this.bind("load."+a,c);if(!this["loading."+a]){this["loading."+a]=true;uki.ajax(uki.extend({url:uki.isFunction(b.url)?b.url.call(this):b.url,data:uki.isFunction(b.data)?b.data.call(this):b.data?b.data:{id:this.id()},success:uki.proxy(function(e){this["loading."+
a]=false;this["loaded."+a]=true;b.setter?b.setter.call(this,e):(this["_"+a]=e);this.trigger("load."+a,e);this.unbind("load."+a)},this)},b.ajaxOptions||{}))}}}}};var M=[];uki_mail_app.view={};uki.view.declare("uki_mail_app.view.ToolbarButton",uki.view.Container,function(a){loadImage=function(b,c){for(var e=b.length,g,d=0,f=b.length;d<f;d++){if(!(g=b[d])||g.width){--e||c();return}var h=function(){g.onload=g.onerror=g.onabort=null;--e||c()};g.onload=h;g.onerror=h;g.onabort=h}};uki.each(["html","backgroundPrefix",
"inset"],function(b,c){uki.delegateProp(this,c,"_button")},this);this.label=function(b){if(b===undefined)return this._label.html();this._label.html(b).resizeToContents("width").layout();return this};this.icon=uki.newProp("_icon",function(b){this._icon=b;var c=uki.createElement("img","position:absolute;top:1px");c.ondragstart=function(){return false};c.src=b;loadImage([c],uki.proxy(function(){c.style.left=(this.rect().width-c.width)/2+"px";this._button._label.appendChild(c)},this))});this.disabled=
function(b){if(b===undefined)return this._button.disabled();this._button.disabled(b);this._label.style("color",b?"#666":"#000");this._button._label.style.opacity=b?"0.5":"";return this};this._createDom=function(){a._createDom.call(this);var b=this.rect();this._button=uki({view:"Button",rect:b.clone().normalize(),anchors:"left top right bottom",inset:"0",focusable:false})[0];this._label=uki({view:"Label",rect:new uki.geometry.Rect(b.width/2,b.height+2,0,11),anchors:"bottom",style:{fontSize:"11px",
textShadow:"0 1px 0px rgba(255,255,255,0.5)",fontFamily:"Lucida Grande,Arial,Helvetica,sans-serif"}})[0];this.appendChild(this._button);this.appendChild(this._label);this._label.bind("mousedown",uki.proxy(this._passEvent,this));this._label.bind("mouseleave",uki.proxy(this._passEvent,this));this._label.bind("click",uki.proxy(this._passEvent,this));this._button._updateBg=uki.proxy(this._updateBg,this)};this._passEvent=function(b){this._button.trigger(b.type,b)};this._updateBg=function(){uki.view.Button.prototype._updateBg.call(this._button);
this.style("zIndex",this._button._down||this._button._over?200:100)}});uki_mail_app.view.messageTable={};uki.view.declare("uki_mail_app.view.MessageTable",uki.view.Table,function(a){function b(d){return d*1?'<div class="unread"></div>':""}function c(d){d*=1;if(!d)return"";return e.render({count:d})}this._setup=function(){a._setup.call(this);this._initialWidths=[];this._rowHeight=17};var e=new uki.theme.Template('<div class="attachment"></div>${count}');this.mailbox=uki.newProp("_mailbox",function(d){this._mailbox&&
this._mailbox.unbind("change.messages",this._messagesChange);this._mailbox=d;this.header().columns()[3].label(d.id()=="SENT"?"Date Sent":"Date Recieved");this.header().columns()[1].label(d.id()=="SENT"?"To":"From").key(d.id()=="SENT"?"toName":"fromName");this.header().redrawColumn(1);this.header().redrawColumn(3);this.data(d.messages());d.bind("change.messages",uki.proxy(this._messagesChange,this));this.trigger("change.messages")});this._messagesChange=function(){this.data(this.mailbox().messages());
this.trigger("change.messages")};this._createDom=function(){a._createDom.call(this);this._scrollPane.scrollableH(false);this._scrollPane.scrollV(true);this._header.background("theme(table-header)");this._list.background("white");this._list.render(new uki_mail_app.view.messageTable.Render(this));this._list.draggable(true).bind("dragstart",uki.proxy(this._dragstart,this));this.getDragImage(2).x(-999).attachTo(window);this.getDragImage(100).x(-999).attachTo(window);this.columns([{view:"uki_mail_app.view.messageTable.Column",
label:'<img src="'+uki.theme.imageSrc("unread-header")+'" style="margin:0 0 0 1px;" />',inset:"0 0",width:19,minWidth:19,formatter:b,key:"unread"},{view:"uki_mail_app.view.messageTable.Column",label:"From",width:200,minWidth:150,resizable:true,key:"fromName"},{view:"uki_mail_app.view.messageTable.Column",label:"Subject",width:300,minWidth:150,resizable:true,key:"subject"},{view:"uki_mail_app.view.messageTable.DateColumn",label:"Date Recieved",width:200,minWidth:70,resizable:true,name:"date",table:this,
key:"recieved"},{view:"uki_mail_app.view.messageTable.Column",label:'<img src="'+uki.theme.imageSrc("attachment-header")+'" style="margin:-1px 0 0 1px;" />',width:30,minWidth:30,formatter:c,resizable:true,key:"attachments"}]);var d=this._list.render().classPrefix,f=(new uki.theme.Template(".${classPrefix}-selected { background: url("+uki.theme.imageSrc("list-selected-row")+"); color: #FFF } .${classPrefix}-selected-blured { background: url("+uki.theme.imageSrc("list-selected-blured-row")+"); } .${classPrefix}-list .unread { background: url("+
uki.theme.imageSrc("list-unread")+"); width: 16px; height: 16px; margin: -1px 0 0 1px; } .${classPrefix}-list .attachment { background: url("+uki.theme.imageSrc("list-attachment")+"); width: 16px; height: 16px; margin: -1px 4px 0 1px; float: left; } .${classPrefix}-selected .unread { background: url("+uki.theme.imageSrc("list-unread-selected")+"); } .${classPrefix}-selected .attachment { background: url("+uki.theme.imageSrc("list-attachment-selected")+"); } ")).render({classPrefix:d});this._list.className(d+
"-list");uki.dom.createStylesheet(f)};this.columns=uki.newProp("_columns",function(d){for(var f=0;f<this._columns.length;f++)this._columns[f].unbind();this._columns=uki.build(d);this._initialTotalWidth=0;this._initialWidths=[];for(f=this._resizableCols=0;f<this._columns.length;f++){d=this._columns[f];this._initialWidths[f]=d.width();d.resizable()&&this._resizableCols++;d.position(f);this._initialTotalWidth+=d.width();this._columns[f].bind("beforeResize",uki.proxy(this._beforeColumnResize,this,f))}this._header.columns(this._columns);
this._fitWidth()});this.relayout=function(){this._list.relayout()};this.getDragImage=function(d){return uki({view:"uki_mail_app.view.messageTable.Drag",rect:"100 32",anchors:"left top",count:d||this._list.selectedIndexes().length})};this._dragstart=function(d){if(this.selectedIndexes().length){d=d.dataTransfer;d.effectAllowed="move";d.setData("text/plain",uki.map(this.selectedRows(),"summary").join("\n"));d.setData("uki/messages",uki.map(this.selectedRows(),"id").join(","));d.setData("uki/mailbox",
this.mailbox().id()+"");d.setDragImage(this.getDragImage(),10,10)}};var g=false;this._beforeColumnResize=function(d,f){if(!g){g=true;f=f.newWidth-f.oldWidth;var h,j,l,p;if(f>0){l=this._columns.length;p=-1}else{l=d;p=1}do{h=this._columns[l+=p];if(l==d||!h)break;if(h.resizable()){h.maxWidth(0);j=h.width();h.width(j-f);h=j-h.width();f-=h}}while(f);this._fixMaxWidths();this._recalcInitialWidths();g=false}};this._recalcInitialWidths=function(){for(var d=this._initialTotalWidth=0;d<this._columns.length;d++){this._initialWidths[d]=
this._columns[d].width();this._initialTotalWidth+=this._initialWidths[d]}};this._layoutDom=function(d){a._layoutDom.call(this,d);this._fitWidth()};this._fixMaxWidths=function(){for(var d=0,f=[0],h=this.rect().width-uki.view.ScrollPane.initScrollWidth(),j=1;j<this._columns.length;j++)f[j]=f[j-1]+this._columns[j-1].width();for(j=this._columns.length-1;j>=0;j--){var l=this._columns[j];l.resizable()&&l.maxWidth(h-f[j]-d);d+=l.minWidth()||l.width()}};this._fitWidth=function(){g=true;var d=uki.view.ScrollPane.initScrollWidth();
d=this.rect().width-d-this._initialTotalWidth;for(var f,h,j=this._resizableCols,l=[].concat(this._initialWidths);d&&j;)for(var p=j,m=0;p>0&&m<this._columns.length;m++){h=this._columns[m];h.maxWidth(0);if(h.resizable()){f=d/p<<0;h.width(l[m]+f);h=h.width()-l[m];h!=f&&j--;l[m]+=h;d-=h;p--}}this._updateTotalWidth();this._fixMaxWidths();g=false}});uki_mail_app.view.messageTable.Render=uki.newClass(uki.view.table.Render,function(a){this.init=function(b){this.classPrefix="messageTable-"+uki.guid++;a.init.call(this,
b)};this.setSelected=function(b,c,e,g){b.className=!e?"":g?this.classPrefix+"-selected":this.classPrefix+"-selected-blured"}});uki.view.declare("uki_mail_app.view.SearchField",uki.view.Container,function(a){uki.each(["html","backgroundPrefix","inset"],function(b,c){uki.delegateProp(this,c,"_input")},this);this.label=function(b){if(b===undefined)return this._label.innerHTML;this._label.html(b).resizeToContents("width").layout();return this};this.disabled=function(b){if(b===undefined)return this._button.disabled();
this._input.disabled(b);this._label.style("color",b?"#666":"#000");return this};this._createDom=function(){a._createDom.call(this);var b=this.rect();this._input=uki({view:"TextField",rect:b.clone().normalize(),anchors:"left top right bottom"})[0];this._label=uki({view:"Label",rect:new uki.geometry.Rect((b.width-10)/2,b.height+2,0,11),anchors:"bottom",style:{fontSize:"11px",textShadow:"0 1px 0px rgba(255,255,255,0.5)",fontFamily:"Lucida Grande,Arial,Helvetica,sans-serif"}})[0];this.appendChild(this._input);
this.appendChild(this._label)}});uki.view.declare("uki_mail_app.view.messageTable.Column",uki.view.table.Column,function(){this._inset=new uki.geometry.Inset(1,3)});uki_mail_app.layout={};uki_mail_app.layout.main=function(){return uki({view:"Box",rect:"1000 1000",anchors:"left top right bottom",childViews:[{view:"Box",rect:"1000 68",anchors:"left top right",id:"top",background:"theme(panel-dark)",childViews:[{view:"Label",rect:"0 0 1000 20",anchors:"left top right",id:"title",style:{textAlign:"center",
textShadow:"0 1px 0px rgba(255,255,255,0.8)",color:"#000"},text:"Inbox"},{view:"uki_mail_app.view.Toolbar",rect:"0 25 1000 23",anchors:"left top right",algorithm:"ResizeLast",childViews:[{view:"Box",rect:"60 23",anchors:"left top",textSelectable:false,childViews:{view:"uki_mail_app.view.ToolbarButton",label:"Get Mail",rect:"10 0 41 23",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-get-mail"),action:"get-mail"}},{view:"Box",rect:"100 23",anchors:"left top",
spacer:true,minSize:"30 0",prefferedWidth:"190"},{view:"uki_mail_app.view.Toolbar",rect:"750 23",anchors:"left top right",textSelectable:false,childViews:[{view:"Box",rect:"110 23",anchors:"left top",childViews:[{view:"uki_mail_app.view.ToolbarButton",rect:"0 0 55 23",label:"Delete",anchors:"left top",backgroundPrefix:"toolbar-button-left-",icon:uki.theme.imageSrc("toolbar-delete"),togglable:1,not_empty:1,action:"delete"},{view:"uki_mail_app.view.ToolbarButton",rect:"54 0 55 23",label:"Junk",anchors:"left top",
backgroundPrefix:"toolbar-button-right-",icon:uki.theme.imageSrc("toolbar-junk"),togglable:1,not_empty:1,action:"junk"}]},{view:"Box",rect:"351 23",anchors:"left top",childViews:[{view:"uki_mail_app.view.ToolbarButton",rect:"10 0 55 23",label:"Reply",anchors:"left top",backgroundPrefix:"toolbar-button-left-",icon:uki.theme.imageSrc("toolbar-reply"),togglable:1,not_empty:1,not_multy:1,action:"reply"},{view:"uki_mail_app.view.ToolbarButton",rect:"64 0 55 23",label:"Reply All",anchors:"left top",backgroundPrefix:"toolbar-button-mid-",
icon:uki.theme.imageSrc("toolbar-reply-all"),togglable:1,not_empty:1,not_multy:1,action:"reply-all"},{view:"uki_mail_app.view.ToolbarButton",rect:"118 0 55 23",label:"Forward",anchors:"left top",backgroundPrefix:"toolbar-button-right-",icon:uki.theme.imageSrc("toolbar-forward"),togglable:1,not_empty:1,action:"forward"},{view:"uki_mail_app.view.ToolbarButton",label:"Redirect",rect:"190 0 41 23",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-redirect"),togglable:1,
not_empty:1,not_multy:1,action:"redirect"},{view:"uki_mail_app.view.ToolbarButton",label:"New Message",rect:"260 0 41 23",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-new"),action:"new-message"}]},{view:"Box",rect:"100 23",anchors:"left top",spacer:true,minSize:"10 0"},{view:"Box",rect:"200 23",anchors:"top right",childViews:{view:"uki_mail_app.view.SearchField",rect:"10 1 170 22",anchors:"right top",backgroundPrefix:"search-",label:"Search"}}]}]}]},
{view:"HSplitPane",rect:"0 68 1000 932",anchors:"left top right bottom",handlePosition:250,minLeft:150,handleWidth:1,leftPane:{textSelectable:false,childViews:[{view:"ScrollPane",rect:"250 910",anchors:"left top right bottom",background:"#DDE4EB",childViews:[{view:"uki_mail_app.view.Folders",rect:"250 200",anchors:"left top right",style:{fontSize:"12px"},childViews:[{view:"Label",rect:"250 20",anchors:"left top right",text:"MAILBOXES",inset:"5 0 2 9",background:"theme(tree-list-header)"},{view:"uki.more.view.TreeList",
rect:"250 10",anchors:"left top right",style:{fontSize:"11px",fontFamily:uki.theme.style("fontFamily"),lineHeight:"11px"},render:new uki_mail_app.view.folders.Render,data:[],rowHeight:20,focusable:false,textSelectable:false},{view:"Label",rect:"250 22",anchors:"left top right",text:"mail@ukijs.org".toUpperCase(),inset:"7 0 2 9",background:"theme(tree-list-header)"},{view:"uki.more.view.TreeList",rect:"250 10",anchors:"left top right",style:{fontSize:"11px",fontFamily:uki.theme.style("fontFamily"),
lineHeight:"11px"},render:new uki_mail_app.view.folders.Render,data:[],rowHeight:20,focusable:false,textSelectable:false}]}]},{view:"Box",rect:"0 910 250 22",anchors:"left bottom right",background:"theme(panel-light)"}]},rightChildViews:[{view:"VSplitPane",rect:"749 932",anchors:"left top right bottom",handleWidth:10,handlePosition:200,minTop:100,topChildViews:[{view:"uki_mail_app.view.MessageTable",rect:"749 200",anchors:"left top right bottom",style:{fontSize:"12px",lineHeight:"12px"},multiselect:true}],
bottomChildViews:[{view:"ScrollPane",rect:"749 722",anchors:"left top right bottom",scrollV:true,childViews:[{view:"VFlow",rect:"10 0 729 78",anchors:"left top right",background:"cssBox(border-bottom: 1px solid #CCC)",id:"meta",childViews:[{view:"Box",rect:"200 22",anchors:"left top",childViews:[{view:"Label",rect:"0 6 50 16",anchors:"left top",background:"theme(field)",text:"From:"},{view:"Label",rect:"60 6 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"from",textSelectable:true}]},
{view:"Box",rect:"200 16",anchors:"left top",childViews:[{view:"Label",rect:"0 0 50 16",anchors:"left top",background:"theme(field)",text:"Subject:"},{view:"Label",rect:"60 0 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"subject",textSelectable:true,style:{fontWeight:"bold"}}]},{view:"Box",rect:"200 16",anchors:"left top",childViews:[{view:"Label",rect:"0 0 50 16",anchors:"left top",background:"theme(field)",text:"Date:"},{view:"Label",rect:"60 0 140 16",anchors:"left top rigth",
text:"-",background:"theme(value)",field:"recieved",textSelectable:true}]},{view:"Box",rect:"200 16",anchors:"left top",childViews:[{view:"Label",rect:"0 0 50 16",anchors:"left top",background:"theme(field)",text:"To:"},{view:"Label",rect:"60 0 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"to",textSelectable:true}]}]},{view:"Label",rect:"0 80 749 100",anchors:"left top right",text:"content",multiline:true,inset:"5 10",id:"content",textSelectable:true,style:{cursor:"text"}}]}]}]}]})};
uki.view.declare("uki_mail_app.view.messageTable.DateColumn",uki_mail_app.view.messageTable.Column,function(a){function b(k){return k.getHours()%12+":"+d(k.getMinutes())+" "+(k.getHours()>12?"PM":"AM")}function c(k){return o[k.getMonth()]+" "+k.getDate()+", "+k.getFullYear()}function e(k){return n[k.getMonth()]+" "+k.getDate()+", "+k.getFullYear()}function g(k){if(k>1900)k-=1900;if(k>100)k-=100;return d(k)}function d(k){return k<10?"0"+k:k}function f(k){return d(k.getMonth()+1)+"/"+d(k.getDate())+
"/"+g(k.getYear())}function h(k){var q=new Date;q.setTime(k*1E3);return'<div style="float:right;">'+b(q)+"</div>"+c(q)}function j(k){var q=new Date;q.setTime(k*1E3);return'<div style="float:right;">'+b(q)+"</div>"+e(q)}function l(k){var q=new Date;q.setTime(k*1E3);return'<div style="float:right;">'+b(q)+"</div>"+f(q)}function p(k){var q=new Date;q.setTime(k*1E3);return e(q)}function m(k){var q=new Date;q.setTime(k*1E3);return f(q)}this.table=uki.newProp("_table");this.width=function(k){if(k===undefined)return a.width.call(this);
a.width.call(this,k);this._updateColumnFormatting();return this};this._updateColumnFormatting=function(){var k;k=this.width();k=k>190?h:k>150?j:k>130?l:k>100?p:m;if(this.formatter()!=k){this.formatter(k);this.table()&&this.table().redrawColumn(uki.inArray(this,this.table().columns()))}};var o=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});uki.view.declare("uki_mail_app.view.Toolbar",
uki.view.HFlow,function(a){function b(c,e){c=c.clone();c.width=e;return c}this.initWidths=function(){for(var c=0,e=0,g=this.childViews();e<g.length;e++){c+=g[e].minSize().width||g[e].rect().width;if(uki.attr(g[e],"spacer"))this._spacer=g[e]}this._minSize=new uki.geometry.Size(c,this.minSize.height)};this.algorithm=function(c){this._resizeChildViews=this["_algorithm"+c]};this._resizeChildViews=this._algorithmResizeSpacer=function(c){this._contentChanged&&this.initWidths();var e=this.rect().width-this.minSize().width;
this._spacer.rect(b(this._spacer.rect(),this._spacer.minSize().width+e));a._resizeChildViews.call(this,c)};this._algorithmResizeLast=function(c){var e=this.childViews()[this.childViews().length-1];if(this._contentChanged){e.resizeToContents("width");this.initWidths()}var g=uki.attr(this._spacer,"prefferedWidth")*1,d=this._spacer.minSize().width;d=g-d;d=this.rect().width-this.minSize().width-d;if(d<0){this._spacer.rect(b(this._spacer.rect(),g+d));e.rect(b(e.rect(),e.minSize().width))}else{this._spacer.rect(b(this._spacer.rect(),
g));e.rect(b(e.rect(),e.minSize().width+d))}a._resizeChildViews.call(this,c)}});uki_mail_app.model={};uki_mail_app.model.Message=uki.newClass(uki.data.Model,function(){uki.data.model.addFields(this,["id","subject","from","to","cc","recieved","body","unread","flagged","attachments","mailbox"]);this.loadBody=uki.data.model.newLoader("body",{url:function(){return"message/"+this.id()+"/body/?callback=?"},ajaxOptions:{dataType:"jsonp"}});this.markAsRead=function(a){uki.ajax({url:"message/"+this.id()+"/markAsRead/",
type:"POST",success:uki.proxy(function(){this.unread(false);a&&a.call(this)},this)})};this.fromName=function(){return this.from().replace(/<[^>]+>/g,"").replace(/\s+/," ")};this.toName=function(){return this.to().replace(/<[^>]+>/g,"").replace(/\s+/," ")};this.summary=function(){return this.subject()+" from "+this.from()}});uki_mail_app.model.Message.fetch=function(a,b){uki.ajax({url:"message/"+a+"/?callback=?",dataType:"jsonp",success:function(c){b(new uki_mail_app.model.Message(c))}})};uki.more=
{};uki.more.view={};uki.viewNamespaces.push("uki.more.view.");uki.more.view.treeList={};uki.view.declare("uki.more.view.TreeList",uki.view.List,function(a){function b(e,g,d){for(g=g;g<e.length;g++)e[g]+=d}function c(e){e=uki.attr(e,"children");for(var g=e.length,d=0;d<e.length;d++)if(e[d].__opened)g+=c(e[d]);return g}this._setup=function(){a._setup.call(this);this._render=new uki.more.view.treeList.Render};this.listData=a.data;this.data=uki.newProp("_treeData",function(e){this._treeData=e;this._data=
this._treeNodeToListData(e);e=false;for(var g=this.listData().length-1;g>=0;g--)if(this._data[g].__opened){e=true;this._openSubElement(g)}this.listData(this._data);e&&this.trigger("open")});this._treeNodeToListData=function(e,g){g=g||0;return uki.map(e,function(d){d.__indent=g;return d})};this.toggle=function(e){this._data[e].__opened?this.close(e):this.open(e)};this._openSubElement=function(e){var g=this._data[e],d=uki.attr(g,"children");if(!d||!d.length)return 0;var f=d.length;g.__opened=true;this._data.splice.apply(this._data,
[e+1,0].concat(this._treeNodeToListData(d,g.__indent+1)));for(g=d.length-1;g>=0;g--)if(this._data[e+1+g].__opened)f+=this._openSubElement(e+1+g);return f};this.open=function(e){if(this._data[e].__opened)return this;var g=this._openSubElement(e),d=uki.binarySearch(e,this._selectedIndexes),f=this._lastClickIndex,h=this._selectedIndexes;this.clearSelection(true);b(h,d+(h[d]==e?1:0),g);this.listData(this._data);this.selectedIndexes(h);this._lastClickIndex=f>e?f+g:f;this.trigger("open");return this};this.close=
function(e){var g=this._data[e],d=this._selectedIndexes,f=uki.attr(g,"children");if(!(!f||!f.length||!g.__opened)){f=c(g);g.__opened=false;this._data.splice(e+1,f);g=uki.binarySearch(e,d);for(var h=g+(d[g]==e?1:0),j=0,l=this._lastClickIndex;d[h+j]&&d[h+j]<=e+f;)j++;this.clearSelection(true);b(d,h,-f);j>0&&d.splice(g,j);this.listData(this._data);this.selectedIndexes(d);this._lastClickIndex=l>e?l-f:l;this.trigger("close")}};this._mousedown=function(e){if(e.target.className.indexOf("toggle-tree")>-1){var g=
uki.dom.offset(this._dom);this.toggle((e.pageY-g.y)/this._rowHeight<<0)}else a._mousedown.call(this,e)};this._keypress=function(e){a._keypress.call(this,e);e=e.domEvent;if(e.which==39||e.keyCode==39)this.open(this._lastClickIndex);else if(e.which==37||e.keyCode==37)this.close(this._lastClickIndex)}});uki.more.view.treeList.Render=uki.newClass(uki.view.list.Render,new (function(){this._parentTemplate=new uki.theme.Template('<div class="${classPrefix}-row ${classPrefix}-${opened}" style="margin-left:${indent}px"><div class="${classPrefix}-toggle"><i class="toggle-tree"></i></div>${text}</div>');
this._leafTemplate=new uki.theme.Template('<div class="${classPrefix}-row" style="margin-left:${indent}px">${text}</div>');this.initStyles=function(){this.classPrefix="treeList-"+uki.guid++;var a=(new uki.theme.Template(".${classPrefix}-row { color: #333; position:relative; padding-top:3px; } .${classPrefix}-toggle { overflow: hidden; position:absolute; left:-15px; top:5px; width: 10px; height:9px; } .${classPrefix}-toggle i { display: block; position:absolute; left: 0; top: 0; width:20px; height:18px; background: url(${imageSrc});} .${classPrefix}-selected { background: #3875D7; } .${classPrefix}-selected .${classPrefix}-row { color: #FFF; } .${classPrefix}-selected i { left: -10px; } .${classPrefix}-selected-blured { background: #CCCCCC; } .${classPrefix}-opened i { top: -9px; }")).render({classPrefix:this.classPrefix,
imageSrc:"i/arrows.png"});uki.dom.createStylesheet(a)};this.render=function(a){this.classPrefix||this.initStyles();var b=a.data,c=uki.attr(a,"children");return c&&c.length?this._parentTemplate.render({text:b,indent:a.__indent*18+22,classPrefix:this.classPrefix,opened:a.__opened?"opened":""}):this._leafTemplate.render({text:b,indent:a.__indent*18+22,classPrefix:this.classPrefix})};this.setSelected=function(a,b,c,e){a.className=!c?"":e?this.classPrefix+"-selected":this.classPrefix+"-selected-blured"}}));
uki_mail_app.view.folders={};uki.view.declare("uki_mail_app.view.Folders",uki.view.VFlow,function(a){this._setup=function(){a._setup.call(this)};this._setMailboxes=function(b,c){uki("[selectedIndex]",this)[b].data(c);this._bindUnread(c);this.resizeToContents("height").layout();return this};this._bindUnread=function(b){uki.each(b,function(c,e){e.bind("change.unread",uki.proxy(this._unreadChanged,this,e));e.children()&&this._bindUnread(e.children())},this)};this._unreadChanged=function(b){(b=this._findMailbox(b))&&
b.list.redrawRow(b.position)};this.mainMailboxes=function(b){if(b===undefined)return uki("[selectedIndex]:eq(0)",this).data();return this._setMailboxes(0,b)};this.subMailboxes=function(b){if(b===undefined)return uki("[selectedIndex]:eq(1)",this).data();return this._setMailboxes(1,b)};this.appendChild=function(b){this._bindListEvents(b);return a.appendChild.apply(this,arguments)};this.insertBefore=function(b){this._bindListEvents(b);return a.insertBefore.apply(this,arguments)};this.removeChild=function(b){this._unbindListEvents(b);
return a.removeChild.apply(this,arguments)};this.relayout=function(){this._listUpdate()};this.dropPreview=function(){if(!this._dropPreview)this._dropPreview=uki({view:"Box",rect:"0 0 100 100",anchors:"left top",style:{zIndex:100},background:"theme(drop-preview)",visible:false}).appendTo(this)[0];this._dropPreview.parent()||this.appendChild(this._dropPreview);return this._dropPreview};this.selectedRow=uki.newProp("_selectedRow",function(b){(b=this._findMailbox(b))&&b.list.selectedIndex(b.position)});
this._findMailbox=function(b){var c=-1,e=false;uki("[data]",this).each(function(g,d){if((c=uki.inArray(b,d.listData()))>-1){e={list:d,position:c};return false}});return e};this._createDom=function(){a._createDom.call(this);uki.dom.bind(s.body,"mouseup drop"+(uki.dom.dnd.nativeDnD?" dragend":""),uki.proxy(this._dragend,this));uki.dom.bind(s.body,"dragenter",uki.proxy(this._dragenter,this));uki.dom.bind(this.dom(),"dragenter",uki.proxy(this._dragenter,this));this.dropPreview().bind("dragover",function(b){b.preventDefault();
b.dataTransfer.dropEffect="move"}).bind("drop",uki.proxy(this._drop,this))};this._unbindListEvents=function(b){b.unbind("open close",this._listUpdate);b.unbind("open close",this._selectionUpdate)};this._bindListEvents=function(b){if(b.selectedIndexes){b.bind("open close",uki.proxy(this._listUpdate,this));b.bind("selection",uki.proxy(this._selectionUpdate,this,b));b.bind("dragover",uki.proxy(this._dragover,this,b));b.bind("drop",uki.proxy(this._drop,this))}};this._dragend=function(){this.dropPreview().visible(false)};
this._dragenter=function(b){uki.dom.contains(this.dom(),b.target)||this.dropPreview().visible(false)};this._dragover=function(b,c){var e=uki.dom.offset(b.dom()),g=(c.pageY-e.y)/b.rowHeight()<<0;e=b.listData()[g];if(this._lastRow!=e){if((this._lastRow=e)&&e.dropTarget()){this.dropPreview().visible(true);this.dropPreview().rect(new uki.geometry.Rect(0,b.rect().y+g*b.rowHeight()-1,b.rect().width,b.rowHeight())).layout()}else this.dropPreview().visible(false);if(this._openTimeout){clearTimeout(this._openTimeout);
this._openTimeout=null}if(e&&e.children())this._openTimeout=setTimeout(uki.proxy(function(){b.open(g)},this),1E3)}if(e&&e.dropTarget()){c.preventDefault();c.dataTransfer.dropEffect="move"}};this._drop=function(b){b.preventDefault();var c=b.dataTransfer.getData("uki/mailbox");b=b.dataTransfer.getData("uki/messages").split(",");if((c=U(c))&&b&&b.length&&this._lastRow){b=c.removeMessages(b);this._lastRow.addMessages(0,b)}};this._selectionUpdate=function(b){if(b.selectedIndexes().length){uki("[selectedIndexes]",
this).each(function(c,e){e!=b&&e.clearSelection()});this._selectedRow=b.selectedRows()[0];this.trigger("selection")}};this._listUpdate=function(){uki("[selectedIndexes]",this).resizeToContents("height");this.resizeToContents("height");this.layout();this.parent()&&this.parent().layout()}});uki_mail_app.view.folders.Render=uki.newClass(uki.more.view.treeList.Render,function(){this._parentTemplate=new uki.theme.Template('<div class="${classPrefix}-row ${classPrefix}-${opened}" style="margin-left:${indent}px;background:url(${icon}) no-repeat 0 50%;"><div class="${classPrefix}-toggle"><i class="toggle-tree"></i></div>${text}</div>');
this._leafTemplate=new uki.theme.Template('<div class="${classPrefix}-row" style="margin-left:${indent}px;background:url(${icon}) no-repeat 0 1px; padding-right: ${unreadPadding}px">${text}<div class="${classPrefix}-unread" style="display:${unreadDisplay}">${unread}</div></td></div>');this.initStyles=function(){this.classPrefix="treeList-"+uki.guid++;var a=(new uki.theme.Template(".${classPrefix}-unread { position: absolute; padding: 2px 4px; min-width: 14px; text-align: center; right: 5px; top: 3px; color: #FFF; background: #94A7C8; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; line-height: 10px; font-size: 10px; font-weight: bold;  } .${classPrefix}-row { color: #000; position:relative; padding: 4px 3px 3px 22px; white-space: nowrap; text-overflow: ellipsis; *zoom: 1; } .${classPrefix}-toggle { overflow: hidden; position:absolute; left:-14px; top:5px; width: 10px; height:9px; } .${classPrefix}-toggle i { display: block; position:absolute; left: 0; top: 0; width:20px; height:18px; background: url(${imageSrc});} .${classPrefix}-selected-blured .${classPrefix}-row { color: #FFF; } .${classPrefix}-selected-blured i { left: -10px; } .${classPrefix}-selected-blured { background: url(${bgSrc}); } .${classPrefix}-selected-blured .${classPrefix}-unread { background: #FFF; color: #94A7C8 } .${classPrefix}-opened i { top: -9px; }")).render({classPrefix:this.classPrefix,
imageSrc:uki.theme.imageSrc("arrows"),bgSrc:uki.theme.imageSrc("tree-selected-bg")});uki.dom.createStylesheet(a)};this.render=function(a){this.classPrefix||this.initStyles();a.title();var b=uki.attr(a,"children"),c={text:a.title(),unread:a.unread(),unreadDisplay:a.unread()?"block":"none",unreadPadding:a.unread()>100?"40":a.unread()>0?"30":0,icon:uki.theme.imageSrc(a.icon()),classPrefix:this.classPrefix};if(b&&b.length){c.indent=a.__indent*18+35;c.opened=a.__opened?"opened":"";return this._parentTemplate.render(c)}else{c.indent=
a.__indent*18+20+(a.leaf?0:15);return this._leafTemplate.render(c)}}});uki.view.declare("uki_mail_app.view.messageTable.Drag",uki.view.Container,function(a){this._createDom=function(){a._createDom.call(this);uki([{view:"Image",rect:"32 32",anchors:"left top",src:uki.theme.imageSrc("dragging")},{view:"Label",rect:"24 16 26 26",anchors:"left top",background:"url("+uki.theme.imageSrc("dragging1-2")+")",text:"1",style:{textAlign:"center",color:"#FFF",fontSize:"11px",fontFamily:uki.theme.style("fontFamily")}}]).appendTo(this)};
this.count=uki.newProp("_count",function(b){this._count=b;uki("Label",this)[0].text(b).background("url("+uki.theme.imageSrc(b<100?"dragging1-2":"dragging3")+")").width(b<100?26:36).layout()})});uki_mail_app.model.Mailbox=uki.newClass(uki.data.Model,function(a){this.init=function(c){this._messages=[];this._length=this._unread=0;a.init.call(this,c)};uki.data.model.addFields(this,["unread","id","title","messages","children","sortField"]);var b={INBOX:"mb-inbox",DRAFTS:"mb-drafts",SENT:"mb-sent",TRASH:"mb-trash"};
this.icon=function(){return b[this.id()]||(this.children()?"mb-folder-empty":"mb-folder")};this.dropTarget=function(){return!this.children()};this.loadMessages=this.loadNewMessages=uki.data.model.newLoader("messages",{url:function(){return"mailbox/"+this.id()+"/messages/?callback=?"},data:function(){return{from:this.messages().length?this.messages()[this.messages().length-1].id():"-1"}},setter:function(c){c=c||[];if(this._messages.length)this._updateCounts();else this._unread=0;this.addMessages(this.messages().length,
uki.map(c,function(e){return new uki_mail_app.model.Message(e)}),true)},ajaxOptions:{dataType:"jsonp"}});this._sortBy=function(c){this._messages=this._messages.sort(function(e,g){return g[c]()*1-e[c]()*1})};this.addMessages=function(c,e){this._messages.splice.apply(this._messages,[c,0].concat(e));this._unreadChangeHandler=this._unreadChangeHandler||uki.proxy(this._unreadChanged,this);for(c=e.length-1;c>=0;c--){e[c].mailbox(this);e[c].bind("change.unread",this._unreadChangeHandler)}this.sortField()&&
this._sortBy(this.sortField());this.trigger("change.messages");this._updateCounts(e)};this.removeMessages=function(c){for(var e={},g=[],d=c.length-1;d>=0;d--)e[c[d]]=true;this._messages=uki.grep(this._messages,function(f){if(!e[f.id()])return true;f.mailbox(null);f.unbind("change.unread",this._unreadChanged);g.push(f);return false},this);this.sortField()&&this._sortBy(this.sortField());this.trigger("change.messages");this._updateCounts();return g};this._updateCounts=function(c){this.unread(uki.grep(c||
this._messages,function(e){return e.unread()}).length+(c?this.unread():0))};this._unreadChanged=function(){this.unread(this.unread()-1)}});uki_mail_app.controller={};uki_mail_app.controller.main=function(){function a(o){var n=uki.map(d.selectedRows(),"id");window.open(location.href+"?"+uki.param({action:o,messages:n.join("-")}),"_blank","toolbar=no")}function b(o){if(o.children)o.children=uki.map(o.children,b);o.sortField="recieved";return new uki_mail_app.model.Mailbox(o)}var c=uki_mail_app.layout.main(),
e=uki("Toolbar [spacer]",c)[0];uki("HSplitPane",c).bind("handleMove",function(){e.prefferedWidth=this.handlePosition()-60;e.parent()._resizeChildViews(e.rect());e.parent().layout()}).handlePosition(200);c.attachTo(window,"1000 1000");uki("#top",c).bind("mousedown",function(o){o.target.tagName!="INPUT"&&o.preventDefault()});var g={};uki("#meta [field]",c).each(function(){g[this.field]=this});var d=uki("MessageTable",c),f=uki("Toolbar:eq(0)",c),h=uki("#content",c),j=uki("#meta",c),l=uki("#title",c);
uki("MessageTable List",c).bind("selection",function(){var o=this.selectedIndexes();uki("[togglable]",f).disabled(false);o.length==0&&uki("[not_empty]",f).disabled(true);o.length>1&&uki("[not_multy]",f).disabled(true);j.visible(false);h.visible(false);if(o.length==1){var n=this.selectedRows()[0];if(n){j.visible(true).layout();g.from.text(n.from()||"");g.to.text(n.to()||"");g.subject.text(n.subject()||"");g.recieved.text(new Date(n.recieved()*1E3)||"");setTimeout(function(){d.selectedIndexes()==o&&
n.loadBody(function(k){if(d.selectedIndexes()==o){n.unread()&&n.markAsRead(function(){d[0].redrawCell(o[0],0)});h.visible(true).html(k).resizeToContents("height").layout()}})},42)}}});d.bind("change.messages",function(){var o=d[0].mailbox();o?l.html(o.title()+" &mdash; mail@ukijs.org ("+o.messages().length+" messages)"):l.text("No Mailbox Selected")});var p=uki("Folders",c);p.bind("selection",function(){var o=this.selectedRow();if(o){uki("ScrollPane",d).attr("scrollTop",0);d[0].mailbox(o).selectedIndexes(o.messages().length?
[0]:[]).lastClickIndex(0).focus();o["loaded.messages"]||o.loadMessages(function(){if(o==p[0].selectedRow())d[0].mailbox(this).selectedIndexes(this.messages().length?[0]:[]).lastClickIndex(0).focus()})}});var m={"get-mail":function(){},"delete":function(){var o=d.selectedRows();o.length&&o[0].mailbox().removeMessages(uki.map(o,"id"))},junk:function(){alert("Junk mail is not supported in this demo")},reply:function(){a("reply")},"reply-all":function(){a("reply-all")},forward:function(){a("forward")},
redirect:function(){a("redirect")},"new-message":function(){a("new-message")}};uki("ToolbarButton",c).click(function(){m[this.action]&&m[this.action].call(this)});uki.ajax({url:"mailbox/?callback=?",dataType:"jsonp",success:function(o){M=uki.map(o,b);uki("Folders",c)[0].mainMailboxes(M.slice(0,4)).subMailboxes(M.slice(4)).selectedRow(M[0])}})};uki_mail_app.controller.editor=function(a,b){function c(j,l){var p="";j=j.replace(/<br\s?\/>/g,"\n").split(/\r?\n/);for(var m=0;m<j.length;m++){for(var o=j[m];o.length>
80;){var n=o.substr(0,80).lastIndexOf(" ");p+=l+o.substr(0,n==-1?80:n)+"\n";o=o.substr(n==-1?80:n+1)}p+=l+o+"\n"}return p}function e(j){j.focus();try{r=j.createTextRange();r.collapse();r.select()}catch(l){}try{j.selectionStart=j.selectionEnd=0}catch(p){}}function g(j,l,p){p=p||[];j.length>0?uki_mail_app.model.Message.fetch(j.shift(),function(m){m.loadBody(function(o){p.push(o);g(j,l,p)})}):l(p)}var d=uki_mail_app.layout.editor();d.attachTo(window,"1000 1000");uki("[field=subject]",d).bind("keyup blur click change",
function(){document.title=this.value()||"(No Subject)"});uki("ToolbarButton[label=Send]",d).click(function(){alert("Demo server does not support sending messages.")});var f=uki("#content",d)[0]._label.firstChild,h={reply:function(){uki_mail_app.model.Message.fetch(b[0],function(j){uki("[field=to]",d).value(j.from());uki("[field=subject]",d).value("Re: "+j.subject()).trigger("change");j.loadBody(function(l){f.value="\nOn "+new Date+" "+j.fromName()+" wrote: \n\n"+c(l,"> ");e(f)})})},forward:function(){uki_mail_app.model.Message.fetch(b[0],
function(j){b.length==1&&uki("[field=subject]",d).value("Fwd: "+j.subject()).trigger("change");g(b,function(l){for(var p=0;p<l.length;p++)f.value+="\nBegin forwarded message:\n\n"+c(l[p],">")});uki("[field=to]",d).focus()})},redirect:function(){uki_mail_app.model.Message.fetch(b[0],function(j){uki("[field=subject]",d).value(j.subject()).trigger("change");j.loadBody(function(l){f.value=c(l,"")});uki("[field=to]",d).focus()})},"new-message":function(){document.title="New Message";uki("[field=to]",d).focus()}};
h["reply-all"]=h.reply;h[a]&&h[a]()};uki_mail_app.layout.editor=function(){var a=uki({view:"Box",rect:"1000 1000",anchors:"left top right bottom",childViews:[{view:"Box",rect:"0 -20 1000 68",anchors:"left top right",id:"top",background:"theme(panel-dark)",childViews:[{view:"uki_mail_app.view.ToolbarButton",rect:"10 25 46 23",label:"Send",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-send")},{view:"uki_mail_app.view.ToolbarButton",rect:"70 25 41 23",label:"Attach",
anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-attach"),disabled:true},{view:"uki_mail_app.view.ToolbarButton",rect:"120 25 41 23",label:"Address",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-address"),disabled:true},{view:"uki_mail_app.view.ToolbarButton",rect:"170 25 41 23",label:"Fonts",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-fonts"),disabled:true},{view:"uki_mail_app.view.ToolbarButton",
rect:"220 25 41 23",label:"Colors",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-colors"),disabled:true},{view:"uki_mail_app.view.ToolbarButton",rect:"290 25 41 23",label:"Save As Draft",anchors:"left top",backgroundPrefix:"toolbar-button-full-",icon:uki.theme.imageSrc("toolbar-save-as-draft"),disabled:true}]},{view:"Box",rect:"0 48 1000 94",anchors:"left top right",background:"cssBox(background: #EDEDED; border-bottom: 1px solid #666)",childViews:[{view:"Label",
rect:"0 6 105 22",anchors:"left top",text:"To:",background:"theme(editor-field)"},{view:"TextField",rect:"110 6 875 22",anchors:"left top right",field:"to",style:{fontSize:"12px"}},{view:"Label",rect:"0 34 105 22",anchors:"left top",text:"Cc:",background:"theme(editor-field)"},{view:"TextField",rect:"110 34 875 22",anchors:"left top right",field:"cc",style:{fontSize:"12px"}},{view:"Label",rect:"0 62 105 22",anchors:"left top",text:"Subject:",background:"theme(editor-field)"},{view:"TextField",rect:"110 62 875 22",
anchors:"left top right",field:"subject",style:{fontSize:"12px"}}]},{view:"Label",rect:"0 142 1000 858",anchors:"left top right bottom",inset:"0",id:"content",textSelectable:true}]});uki("#content",a).html('<textarea style="position:absolute;z-index:100;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;width:100%;height:100%;border:none;outline:none;font-size:12px;font-family:'+uki.theme.style("fontFamily")+'"></textarea>');/MSIE 6/.test(navigator.userAgent)&&
uki("#content",a).bind("layout",function(){this._label.firstChild.style.height=this.rect().height+"px"});return a};uki_mail_app.theme.imagePath="i/theme/";if(!window.TESTING){var X;if(X=location.href.match(/[?&]action=([^&]+)/)){var Y=location.href.match(/[?&]messages=([^&]+)/);uki_mail_app.controller.editor(X[1],Y&&Y[1].split("-")||[])}else uki_mail_app.controller.main()}})();
